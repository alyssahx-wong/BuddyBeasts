function Kh(e,n){for(var i=0;i<n.length;i++){const l=n[i];if(typeof l!="string"&&!Array.isArray(l)){for(const c in l)if(c!=="default"&&!(c in e)){const f=Object.getOwnPropertyDescriptor(l,c);f&&Object.defineProperty(e,c,f.get?f:{enumerable:!0,get:()=>l[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&l(g)}).observe(document,{childList:!0,subtree:!0});function i(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(c){if(c.ep)return;c.ep=!0;const f=i(c);fetch(c.href,f)}})();var is=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var M0={exports:{}},Cl={},D0={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qs=Symbol.for("react.element"),qh=Symbol.for("react.portal"),Jh=Symbol.for("react.fragment"),$h=Symbol.for("react.strict_mode"),ex=Symbol.for("react.profiler"),tx=Symbol.for("react.provider"),nx=Symbol.for("react.context"),rx=Symbol.for("react.forward_ref"),ix=Symbol.for("react.suspense"),sx=Symbol.for("react.memo"),ox=Symbol.for("react.lazy"),Qc=Symbol.iterator;function lx(e){return e===null||typeof e!="object"?null:(e=Qc&&e[Qc]||e["@@iterator"],typeof e=="function"?e:null)}var k0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P0=Object.assign,B0={};function ji(e,n,i){this.props=e,this.context=n,this.refs=B0,this.updater=i||k0}ji.prototype.isReactComponent={};ji.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};ji.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function L0(){}L0.prototype=ji.prototype;function Mu(e,n,i){this.props=e,this.context=n,this.refs=B0,this.updater=i||k0}var Du=Mu.prototype=new L0;Du.constructor=Mu;P0(Du,ji.prototype);Du.isPureReactComponent=!0;var Kc=Array.isArray,F0=Object.prototype.hasOwnProperty,ku={current:null},j0={key:!0,ref:!0,__self:!0,__source:!0};function U0(e,n,i){var l,c={},f=null,g=null;if(n!=null)for(l in n.ref!==void 0&&(g=n.ref),n.key!==void 0&&(f=""+n.key),n)F0.call(n,l)&&!j0.hasOwnProperty(l)&&(c[l]=n[l]);var y=arguments.length-2;if(y===1)c.children=i;else if(1<y){for(var m=Array(y),p=0;p<y;p++)m[p]=arguments[p+2];c.children=m}if(e&&e.defaultProps)for(l in y=e.defaultProps,y)c[l]===void 0&&(c[l]=y[l]);return{$$typeof:Qs,type:e,key:f,ref:g,props:c,_owner:ku.current}}function ax(e,n){return{$$typeof:Qs,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function Pu(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qs}function ux(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return n[i]})}var qc=/\/+/g;function la(e,n){return typeof e=="object"&&e!==null&&e.key!=null?ux(""+e.key):n.toString(36)}function Po(e,n,i,l,c){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(f){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case Qs:case qh:g=!0}}if(g)return g=e,c=c(g),e=l===""?"."+la(g,0):l,Kc(c)?(i="",e!=null&&(i=e.replace(qc,"$&/")+"/"),Po(c,n,i,"",function(p){return p})):c!=null&&(Pu(c)&&(c=ax(c,i+(!c.key||g&&g.key===c.key?"":(""+c.key).replace(qc,"$&/")+"/")+e)),n.push(c)),1;if(g=0,l=l===""?".":l+":",Kc(e))for(var y=0;y<e.length;y++){f=e[y];var m=l+la(f,y);g+=Po(f,n,i,m,c)}else if(m=lx(e),typeof m=="function")for(e=m.call(e),y=0;!(f=e.next()).done;)f=f.value,m=l+la(f,y++),g+=Po(f,n,i,m,c);else if(f==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return g}function mo(e,n,i){if(e==null)return e;var l=[],c=0;return Po(e,l,"","",function(f){return n.call(i,f,c++)}),l}function cx(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var Ft={current:null},Bo={transition:null},fx={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:Bo,ReactCurrentOwner:ku};function z0(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:mo,forEach:function(e,n,i){mo(e,function(){n.apply(this,arguments)},i)},count:function(e){var n=0;return mo(e,function(){n++}),n},toArray:function(e){return mo(e,function(n){return n})||[]},only:function(e){if(!Pu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ve.Component=ji;ve.Fragment=Jh;ve.Profiler=ex;ve.PureComponent=Mu;ve.StrictMode=$h;ve.Suspense=ix;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fx;ve.act=z0;ve.cloneElement=function(e,n,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=P0({},e.props),c=e.key,f=e.ref,g=e._owner;if(n!=null){if(n.ref!==void 0&&(f=n.ref,g=ku.current),n.key!==void 0&&(c=""+n.key),e.type&&e.type.defaultProps)var y=e.type.defaultProps;for(m in n)F0.call(n,m)&&!j0.hasOwnProperty(m)&&(l[m]=n[m]===void 0&&y!==void 0?y[m]:n[m])}var m=arguments.length-2;if(m===1)l.children=i;else if(1<m){y=Array(m);for(var p=0;p<m;p++)y[p]=arguments[p+2];l.children=y}return{$$typeof:Qs,type:e.type,key:c,ref:f,props:l,_owner:g}};ve.createContext=function(e){return e={$$typeof:nx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:tx,_context:e},e.Consumer=e};ve.createElement=U0;ve.createFactory=function(e){var n=U0.bind(null,e);return n.type=e,n};ve.createRef=function(){return{current:null}};ve.forwardRef=function(e){return{$$typeof:rx,render:e}};ve.isValidElement=Pu;ve.lazy=function(e){return{$$typeof:ox,_payload:{_status:-1,_result:e},_init:cx}};ve.memo=function(e,n){return{$$typeof:sx,type:e,compare:n===void 0?null:n}};ve.startTransition=function(e){var n=Bo.transition;Bo.transition={};try{e()}finally{Bo.transition=n}};ve.unstable_act=z0;ve.useCallback=function(e,n){return Ft.current.useCallback(e,n)};ve.useContext=function(e){return Ft.current.useContext(e)};ve.useDebugValue=function(){};ve.useDeferredValue=function(e){return Ft.current.useDeferredValue(e)};ve.useEffect=function(e,n){return Ft.current.useEffect(e,n)};ve.useId=function(){return Ft.current.useId()};ve.useImperativeHandle=function(e,n,i){return Ft.current.useImperativeHandle(e,n,i)};ve.useInsertionEffect=function(e,n){return Ft.current.useInsertionEffect(e,n)};ve.useLayoutEffect=function(e,n){return Ft.current.useLayoutEffect(e,n)};ve.useMemo=function(e,n){return Ft.current.useMemo(e,n)};ve.useReducer=function(e,n,i){return Ft.current.useReducer(e,n,i)};ve.useRef=function(e){return Ft.current.useRef(e)};ve.useState=function(e){return Ft.current.useState(e)};ve.useSyncExternalStore=function(e,n,i){return Ft.current.useSyncExternalStore(e,n,i)};ve.useTransition=function(){return Ft.current.useTransition()};ve.version="18.3.1";D0.exports=ve;var Y=D0.exports;const Gn=O0(Y),dx=Kh({__proto__:null,default:Gn},[Y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hx=Y,xx=Symbol.for("react.element"),gx=Symbol.for("react.fragment"),px=Object.prototype.hasOwnProperty,mx=hx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wx={key:!0,ref:!0,__self:!0,__source:!0};function V0(e,n,i){var l,c={},f=null,g=null;i!==void 0&&(f=""+i),n.key!==void 0&&(f=""+n.key),n.ref!==void 0&&(g=n.ref);for(l in n)px.call(n,l)&&!wx.hasOwnProperty(l)&&(c[l]=n[l]);if(e&&e.defaultProps)for(l in n=e.defaultProps,n)c[l]===void 0&&(c[l]=n[l]);return{$$typeof:xx,type:e,key:f,ref:g,props:c,_owner:mx.current}}Cl.Fragment=gx;Cl.jsx=V0;Cl.jsxs=V0;M0.exports=Cl;var E=M0.exports,Pa={},H0={exports:{}},rn={},W0={exports:{}},G0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(ie,ge){var we=ie.length;ie.push(ge);e:for(;0<we;){var Xe=we-1>>>1,be=ie[Xe];if(0<c(be,ge))ie[Xe]=ge,ie[we]=be,we=Xe;else break e}}function i(ie){return ie.length===0?null:ie[0]}function l(ie){if(ie.length===0)return null;var ge=ie[0],we=ie.pop();if(we!==ge){ie[0]=we;e:for(var Xe=0,be=ie.length,on=be>>>1;Xe<on;){var Qe=2*(Xe+1)-1,Or=ie[Qe],ce=Qe+1,tr=ie[ce];if(0>c(Or,we))ce<be&&0>c(tr,Or)?(ie[Xe]=tr,ie[ce]=we,Xe=ce):(ie[Xe]=Or,ie[Qe]=we,Xe=Qe);else if(ce<be&&0>c(tr,we))ie[Xe]=tr,ie[ce]=we,Xe=ce;else break e}}return ge}function c(ie,ge){var we=ie.sortIndex-ge.sortIndex;return we!==0?we:ie.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var g=Date,y=g.now();e.unstable_now=function(){return g.now()-y}}var m=[],p=[],C=1,v=null,I=3,O=!1,D=!1,k=!1,F=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(ie){for(var ge=i(p);ge!==null;){if(ge.callback===null)l(p);else if(ge.startTime<=ie)l(p),ge.sortIndex=ge.expirationTime,n(m,ge);else break;ge=i(p)}}function j(ie){if(k=!1,T(ie),!D)if(i(m)!==null)D=!0,Ne(q);else{var ge=i(p);ge!==null&&me(j,ge.startTime-ie)}}function q(ie,ge){D=!1,k&&(k=!1,M(Q),Q=-1),O=!0;var we=I;try{for(T(ge),v=i(m);v!==null&&(!(v.expirationTime>ge)||ie&&!Se());){var Xe=v.callback;if(typeof Xe=="function"){v.callback=null,I=v.priorityLevel;var be=Xe(v.expirationTime<=ge);ge=e.unstable_now(),typeof be=="function"?v.callback=be:v===i(m)&&l(m),T(ge)}else l(m);v=i(m)}if(v!==null)var on=!0;else{var Qe=i(p);Qe!==null&&me(j,Qe.startTime-ge),on=!1}return on}finally{v=null,I=we,O=!1}}var z=!1,L=null,Q=-1,X=5,he=-1;function Se(){return!(e.unstable_now()-he<X)}function re(){if(L!==null){var ie=e.unstable_now();he=ie;var ge=!0;try{ge=L(!0,ie)}finally{ge?K():(z=!1,L=null)}}else z=!1}var K;if(typeof b=="function")K=function(){b(re)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,H=se.port2;se.port1.onmessage=re,K=function(){H.postMessage(null)}}else K=function(){F(re,0)};function Ne(ie){L=ie,z||(z=!0,K())}function me(ie,ge){Q=F(function(){ie(e.unstable_now())},ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ie){ie.callback=null},e.unstable_continueExecution=function(){D||O||(D=!0,Ne(q))},e.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<ie?Math.floor(1e3/ie):5},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_getFirstCallbackNode=function(){return i(m)},e.unstable_next=function(ie){switch(I){case 1:case 2:case 3:var ge=3;break;default:ge=I}var we=I;I=ge;try{return ie()}finally{I=we}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ie,ge){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var we=I;I=ie;try{return ge()}finally{I=we}},e.unstable_scheduleCallback=function(ie,ge,we){var Xe=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Xe+we:Xe):we=Xe,ie){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=we+be,ie={id:C++,callback:ge,priorityLevel:ie,startTime:we,expirationTime:be,sortIndex:-1},we>Xe?(ie.sortIndex=we,n(p,ie),i(m)===null&&ie===i(p)&&(k?(M(Q),Q=-1):k=!0,me(j,we-Xe))):(ie.sortIndex=be,n(m,ie),D||O||(D=!0,Ne(q))),ie},e.unstable_shouldYield=Se,e.unstable_wrapCallback=function(ie){var ge=I;return function(){var we=I;I=ge;try{return ie.apply(this,arguments)}finally{I=we}}}})(G0);W0.exports=G0;var yx=W0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ex=Y,nn=yx;function $(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var X0=new Set,_s={};function $r(e,n){Oi(e,n),Oi(e+"Capture",n)}function Oi(e,n){for(_s[e]=n,e=0;e<n.length;e++)X0.add(n[e])}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ba=Object.prototype.hasOwnProperty,Cx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jc={},$c={};function vx(e){return Ba.call($c,e)?!0:Ba.call(Jc,e)?!1:Cx.test(e)?$c[e]=!0:(Jc[e]=!0,!1)}function Ax(e,n,i,l){if(i!==null&&i.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Sx(e,n,i,l){if(n===null||typeof n>"u"||Ax(e,n,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function jt(e,n,i,l,c,f,g){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=l,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=n,this.sanitizeURL=f,this.removeEmptyString=g}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){bt[e]=new jt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];bt[n]=new jt(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){bt[e]=new jt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){bt[e]=new jt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){bt[e]=new jt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){bt[e]=new jt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){bt[e]=new jt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){bt[e]=new jt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){bt[e]=new jt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Bu=/[\-:]([a-z])/g;function Lu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(Bu,Lu);bt[n]=new jt(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(Bu,Lu);bt[n]=new jt(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(Bu,Lu);bt[n]=new jt(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){bt[e]=new jt(e,1,!1,e.toLowerCase(),null,!1,!1)});bt.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){bt[e]=new jt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Fu(e,n,i,l){var c=bt.hasOwnProperty(n)?bt[n]:null;(c!==null?c.type!==0:l||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(Sx(n,i,c,l)&&(i=null),l||c===null?vx(n)&&(i===null?e.removeAttribute(n):e.setAttribute(n,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(n=c.attributeName,l=c.attributeNamespace,i===null?e.removeAttribute(n):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,l?e.setAttributeNS(l,n,i):e.setAttribute(n,i))))}var $n=Ex.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wo=Symbol.for("react.element"),di=Symbol.for("react.portal"),hi=Symbol.for("react.fragment"),ju=Symbol.for("react.strict_mode"),La=Symbol.for("react.profiler"),Y0=Symbol.for("react.provider"),Z0=Symbol.for("react.context"),Uu=Symbol.for("react.forward_ref"),Fa=Symbol.for("react.suspense"),ja=Symbol.for("react.suspense_list"),zu=Symbol.for("react.memo"),cr=Symbol.for("react.lazy"),Q0=Symbol.for("react.offscreen"),e1=Symbol.iterator;function ss(e){return e===null||typeof e!="object"?null:(e=e1&&e[e1]||e["@@iterator"],typeof e=="function"?e:null)}var et=Object.assign,aa;function hs(e){if(aa===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);aa=n&&n[1]||""}return`
`+aa+e}var ua=!1;function ca(e,n){if(!e||ua)return"";ua=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(p){var l=p}Reflect.construct(e,[],n)}else{try{n.call()}catch(p){l=p}e.call(n.prototype)}else{try{throw Error()}catch(p){l=p}e()}}catch(p){if(p&&l&&typeof p.stack=="string"){for(var c=p.stack.split(`
`),f=l.stack.split(`
`),g=c.length-1,y=f.length-1;1<=g&&0<=y&&c[g]!==f[y];)y--;for(;1<=g&&0<=y;g--,y--)if(c[g]!==f[y]){if(g!==1||y!==1)do if(g--,y--,0>y||c[g]!==f[y]){var m=`
`+c[g].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=g&&0<=y);break}}}finally{ua=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?hs(e):""}function Nx(e){switch(e.tag){case 5:return hs(e.type);case 16:return hs("Lazy");case 13:return hs("Suspense");case 19:return hs("SuspenseList");case 0:case 2:case 15:return e=ca(e.type,!1),e;case 11:return e=ca(e.type.render,!1),e;case 1:return e=ca(e.type,!0),e;default:return""}}function Ua(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hi:return"Fragment";case di:return"Portal";case La:return"Profiler";case ju:return"StrictMode";case Fa:return"Suspense";case ja:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Z0:return(e.displayName||"Context")+".Consumer";case Y0:return(e._context.displayName||"Context")+".Provider";case Uu:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zu:return n=e.displayName||null,n!==null?n:Ua(e.type)||"Memo";case cr:n=e._payload,e=e._init;try{return Ua(e(n))}catch{}}return null}function Ix(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ua(n);case 8:return n===ju?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Nr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function K0(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function bx(e){var n=K0(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),l=""+e[n];if(!e.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,f=i.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(g){l=""+g,f.call(this,g)}}),Object.defineProperty(e,n,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(g){l=""+g},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function yo(e){e._valueTracker||(e._valueTracker=bx(e))}function q0(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),l="";return e&&(l=K0(e)?e.checked?"true":"false":e.value),e=l,e!==i?(n.setValue(e),!0):!1}function Yo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function za(e,n){var i=n.checked;return et({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function t1(e,n){var i=n.defaultValue==null?"":n.defaultValue,l=n.checked!=null?n.checked:n.defaultChecked;i=Nr(n.value!=null?n.value:i),e._wrapperState={initialChecked:l,initialValue:i,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function J0(e,n){n=n.checked,n!=null&&Fu(e,"checked",n,!1)}function Va(e,n){J0(e,n);var i=Nr(n.value),l=n.type;if(i!=null)l==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Ha(e,n.type,i):n.hasOwnProperty("defaultValue")&&Ha(e,n.type,Nr(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function n1(e,n,i){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var l=n.type;if(!(l!=="submit"&&l!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,i||n===e.value||(e.value=n),e.defaultValue=n}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Ha(e,n,i){(n!=="number"||Yo(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var xs=Array.isArray;function Ni(e,n,i,l){if(e=e.options,n){n={};for(var c=0;c<i.length;c++)n["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=n.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&l&&(e[i].defaultSelected=!0)}else{for(i=""+Nr(i),n=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function Wa(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error($(91));return et({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function r1(e,n){var i=n.value;if(i==null){if(i=n.children,n=n.defaultValue,i!=null){if(n!=null)throw Error($(92));if(xs(i)){if(1<i.length)throw Error($(93));i=i[0]}n=i}n==null&&(n=""),i=n}e._wrapperState={initialValue:Nr(i)}}function $0(e,n){var i=Nr(n.value),l=Nr(n.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),n.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),l!=null&&(e.defaultValue=""+l)}function i1(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function ef(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ga(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?ef(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Eo,tf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,i,l,c){MSApp.execUnsafeLocalFunction(function(){return e(n,i,l,c)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Eo=Eo||document.createElement("div"),Eo.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Eo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Ts(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var ys={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_x=["Webkit","ms","Moz","O"];Object.keys(ys).forEach(function(e){_x.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),ys[n]=ys[e]})});function nf(e,n,i){return n==null||typeof n=="boolean"||n===""?"":i||typeof n!="number"||n===0||ys.hasOwnProperty(e)&&ys[e]?(""+n).trim():n+"px"}function rf(e,n){e=e.style;for(var i in n)if(n.hasOwnProperty(i)){var l=i.indexOf("--")===0,c=nf(i,n[i],l);i==="float"&&(i="cssFloat"),l?e.setProperty(i,c):e[i]=c}}var Tx=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xa(e,n){if(n){if(Tx[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error($(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error($(61))}if(n.style!=null&&typeof n.style!="object")throw Error($(62))}}function Ya(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Za=null;function Vu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qa=null,Ii=null,bi=null;function s1(e){if(e=Js(e)){if(typeof Qa!="function")throw Error($(280));var n=e.stateNode;n&&(n=Il(n),Qa(e.stateNode,e.type,n))}}function sf(e){Ii?bi?bi.push(e):bi=[e]:Ii=e}function of(){if(Ii){var e=Ii,n=bi;if(bi=Ii=null,s1(e),n)for(e=0;e<n.length;e++)s1(n[e])}}function lf(e,n){return e(n)}function af(){}var fa=!1;function uf(e,n,i){if(fa)return e(n,i);fa=!0;try{return lf(e,n,i)}finally{fa=!1,(Ii!==null||bi!==null)&&(af(),of())}}function Rs(e,n){var i=e.stateNode;if(i===null)return null;var l=Il(i);if(l===null)return null;i=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error($(231,n,typeof i));return i}var Ka=!1;if(Qn)try{var os={};Object.defineProperty(os,"passive",{get:function(){Ka=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{Ka=!1}function Rx(e,n,i,l,c,f,g,y,m){var p=Array.prototype.slice.call(arguments,3);try{n.apply(i,p)}catch(C){this.onError(C)}}var Es=!1,Zo=null,Qo=!1,qa=null,Ox={onError:function(e){Es=!0,Zo=e}};function Mx(e,n,i,l,c,f,g,y,m){Es=!1,Zo=null,Rx.apply(Ox,arguments)}function Dx(e,n,i,l,c,f,g,y,m){if(Mx.apply(this,arguments),Es){if(Es){var p=Zo;Es=!1,Zo=null}else throw Error($(198));Qo||(Qo=!0,qa=p)}}function ei(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function cf(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function o1(e){if(ei(e)!==e)throw Error($(188))}function kx(e){var n=e.alternate;if(!n){if(n=ei(e),n===null)throw Error($(188));return n!==e?null:e}for(var i=e,l=n;;){var c=i.return;if(c===null)break;var f=c.alternate;if(f===null){if(l=c.return,l!==null){i=l;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===i)return o1(c),e;if(f===l)return o1(c),n;f=f.sibling}throw Error($(188))}if(i.return!==l.return)i=c,l=f;else{for(var g=!1,y=c.child;y;){if(y===i){g=!0,i=c,l=f;break}if(y===l){g=!0,l=c,i=f;break}y=y.sibling}if(!g){for(y=f.child;y;){if(y===i){g=!0,i=f,l=c;break}if(y===l){g=!0,l=f,i=c;break}y=y.sibling}if(!g)throw Error($(189))}}if(i.alternate!==l)throw Error($(190))}if(i.tag!==3)throw Error($(188));return i.stateNode.current===i?e:n}function ff(e){return e=kx(e),e!==null?df(e):null}function df(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=df(e);if(n!==null)return n;e=e.sibling}return null}var hf=nn.unstable_scheduleCallback,l1=nn.unstable_cancelCallback,Px=nn.unstable_shouldYield,Bx=nn.unstable_requestPaint,lt=nn.unstable_now,Lx=nn.unstable_getCurrentPriorityLevel,Hu=nn.unstable_ImmediatePriority,xf=nn.unstable_UserBlockingPriority,Ko=nn.unstable_NormalPriority,Fx=nn.unstable_LowPriority,gf=nn.unstable_IdlePriority,vl=null,Fn=null;function jx(e){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(vl,e,void 0,(e.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:Vx,Ux=Math.log,zx=Math.LN2;function Vx(e){return e>>>=0,e===0?32:31-(Ux(e)/zx|0)|0}var Co=64,vo=4194304;function gs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qo(e,n){var i=e.pendingLanes;if(i===0)return 0;var l=0,c=e.suspendedLanes,f=e.pingedLanes,g=i&268435455;if(g!==0){var y=g&~c;y!==0?l=gs(y):(f&=g,f!==0&&(l=gs(f)))}else g=i&~c,g!==0?l=gs(g):f!==0&&(l=gs(f));if(l===0)return 0;if(n!==0&&n!==l&&!(n&c)&&(c=l&-l,f=n&-n,c>=f||c===16&&(f&4194240)!==0))return n;if(l&4&&(l|=i&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=l;0<n;)i=31-Sn(n),c=1<<i,l|=e[i],n&=~c;return l}function Hx(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wx(e,n){for(var i=e.suspendedLanes,l=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-Sn(f),y=1<<g,m=c[g];m===-1?(!(y&i)||y&l)&&(c[g]=Hx(y,n)):m<=n&&(e.expiredLanes|=y),f&=~y}}function Ja(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pf(){var e=Co;return Co<<=1,!(Co&4194240)&&(Co=64),e}function da(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function Ks(e,n,i){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Sn(n),e[n]=i}function Gx(e,n){var i=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-Sn(i),f=1<<c;n[c]=0,l[c]=-1,e[c]=-1,i&=~f}}function Wu(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var l=31-Sn(i),c=1<<l;c&n|e[l]&n&&(e[l]|=n),i&=~c}}var Pe=0;function mf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wf,Gu,yf,Ef,Cf,$a=!1,Ao=[],mr=null,wr=null,yr=null,Os=new Map,Ms=new Map,dr=[],Xx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function a1(e,n){switch(e){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":Os.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ms.delete(n.pointerId)}}function ls(e,n,i,l,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:i,eventSystemFlags:l,nativeEvent:f,targetContainers:[c]},n!==null&&(n=Js(n),n!==null&&Gu(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function Yx(e,n,i,l,c){switch(n){case"focusin":return mr=ls(mr,e,n,i,l,c),!0;case"dragenter":return wr=ls(wr,e,n,i,l,c),!0;case"mouseover":return yr=ls(yr,e,n,i,l,c),!0;case"pointerover":var f=c.pointerId;return Os.set(f,ls(Os.get(f)||null,e,n,i,l,c)),!0;case"gotpointercapture":return f=c.pointerId,Ms.set(f,ls(Ms.get(f)||null,e,n,i,l,c)),!0}return!1}function vf(e){var n=zr(e.target);if(n!==null){var i=ei(n);if(i!==null){if(n=i.tag,n===13){if(n=cf(i),n!==null){e.blockedOn=n,Cf(e.priority,function(){yf(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Lo(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=eu(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);Za=l,i.target.dispatchEvent(l),Za=null}else return n=Js(i),n!==null&&Gu(n),e.blockedOn=i,!1;n.shift()}return!0}function u1(e,n,i){Lo(e)&&i.delete(n)}function Zx(){$a=!1,mr!==null&&Lo(mr)&&(mr=null),wr!==null&&Lo(wr)&&(wr=null),yr!==null&&Lo(yr)&&(yr=null),Os.forEach(u1),Ms.forEach(u1)}function as(e,n){e.blockedOn===n&&(e.blockedOn=null,$a||($a=!0,nn.unstable_scheduleCallback(nn.unstable_NormalPriority,Zx)))}function Ds(e){function n(c){return as(c,e)}if(0<Ao.length){as(Ao[0],e);for(var i=1;i<Ao.length;i++){var l=Ao[i];l.blockedOn===e&&(l.blockedOn=null)}}for(mr!==null&&as(mr,e),wr!==null&&as(wr,e),yr!==null&&as(yr,e),Os.forEach(n),Ms.forEach(n),i=0;i<dr.length;i++)l=dr[i],l.blockedOn===e&&(l.blockedOn=null);for(;0<dr.length&&(i=dr[0],i.blockedOn===null);)vf(i),i.blockedOn===null&&dr.shift()}var _i=$n.ReactCurrentBatchConfig,Jo=!0;function Qx(e,n,i,l){var c=Pe,f=_i.transition;_i.transition=null;try{Pe=1,Xu(e,n,i,l)}finally{Pe=c,_i.transition=f}}function Kx(e,n,i,l){var c=Pe,f=_i.transition;_i.transition=null;try{Pe=4,Xu(e,n,i,l)}finally{Pe=c,_i.transition=f}}function Xu(e,n,i,l){if(Jo){var c=eu(e,n,i,l);if(c===null)va(e,n,l,$o,i),a1(e,l);else if(Yx(c,e,n,i,l))l.stopPropagation();else if(a1(e,l),n&4&&-1<Xx.indexOf(e)){for(;c!==null;){var f=Js(c);if(f!==null&&wf(f),f=eu(e,n,i,l),f===null&&va(e,n,l,$o,i),f===c)break;c=f}c!==null&&l.stopPropagation()}else va(e,n,l,null,i)}}var $o=null;function eu(e,n,i,l){if($o=null,e=Vu(l),e=zr(e),e!==null)if(n=ei(e),n===null)e=null;else if(i=n.tag,i===13){if(e=cf(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return $o=e,null}function Af(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lx()){case Hu:return 1;case xf:return 4;case Ko:case Fx:return 16;case gf:return 536870912;default:return 16}default:return 16}}var xr=null,Yu=null,Fo=null;function Sf(){if(Fo)return Fo;var e,n=Yu,i=n.length,l,c="value"in xr?xr.value:xr.textContent,f=c.length;for(e=0;e<i&&n[e]===c[e];e++);var g=i-e;for(l=1;l<=g&&n[i-l]===c[f-l];l++);return Fo=c.slice(e,1<l?1-l:void 0)}function jo(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function So(){return!0}function c1(){return!1}function sn(e){function n(i,l,c,f,g){this._reactName=i,this._targetInst=c,this.type=l,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(i=e[y],this[y]=i?i(f):f[y]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?So:c1,this.isPropagationStopped=c1,this}return et(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=So)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=So)},persist:function(){},isPersistent:So}),n}var Ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zu=sn(Ui),qs=et({},Ui,{view:0,detail:0}),qx=sn(qs),ha,xa,us,Al=et({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==us&&(us&&e.type==="mousemove"?(ha=e.screenX-us.screenX,xa=e.screenY-us.screenY):xa=ha=0,us=e),ha)},movementY:function(e){return"movementY"in e?e.movementY:xa}}),f1=sn(Al),Jx=et({},Al,{dataTransfer:0}),$x=sn(Jx),eg=et({},qs,{relatedTarget:0}),ga=sn(eg),tg=et({},Ui,{animationName:0,elapsedTime:0,pseudoElement:0}),ng=sn(tg),rg=et({},Ui,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ig=sn(rg),sg=et({},Ui,{data:0}),d1=sn(sg),og={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ag={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ug(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=ag[e])?!!n[e]:!1}function Qu(){return ug}var cg=et({},qs,{key:function(e){if(e.key){var n=og[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=jo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qu,charCode:function(e){return e.type==="keypress"?jo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?jo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fg=sn(cg),dg=et({},Al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),h1=sn(dg),hg=et({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qu}),xg=sn(hg),gg=et({},Ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),pg=sn(gg),mg=et({},Al,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wg=sn(mg),yg=[9,13,27,32],Ku=Qn&&"CompositionEvent"in window,Cs=null;Qn&&"documentMode"in document&&(Cs=document.documentMode);var Eg=Qn&&"TextEvent"in window&&!Cs,Nf=Qn&&(!Ku||Cs&&8<Cs&&11>=Cs),x1=" ",g1=!1;function If(e,n){switch(e){case"keyup":return yg.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xi=!1;function Cg(e,n){switch(e){case"compositionend":return bf(n);case"keypress":return n.which!==32?null:(g1=!0,x1);case"textInput":return e=n.data,e===x1&&g1?null:e;default:return null}}function vg(e,n){if(xi)return e==="compositionend"||!Ku&&If(e,n)?(e=Sf(),Fo=Yu=xr=null,xi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Nf&&n.locale!=="ko"?null:n.data;default:return null}}var Ag={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function p1(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Ag[e.type]:n==="textarea"}function _f(e,n,i,l){sf(l),n=el(n,"onChange"),0<n.length&&(i=new Zu("onChange","change",null,i,l),e.push({event:i,listeners:n}))}var vs=null,ks=null;function Sg(e){jf(e,0)}function Sl(e){var n=mi(e);if(q0(n))return e}function Ng(e,n){if(e==="change")return n}var Tf=!1;if(Qn){var pa;if(Qn){var ma="oninput"in document;if(!ma){var m1=document.createElement("div");m1.setAttribute("oninput","return;"),ma=typeof m1.oninput=="function"}pa=ma}else pa=!1;Tf=pa&&(!document.documentMode||9<document.documentMode)}function w1(){vs&&(vs.detachEvent("onpropertychange",Rf),ks=vs=null)}function Rf(e){if(e.propertyName==="value"&&Sl(ks)){var n=[];_f(n,ks,e,Vu(e)),uf(Sg,n)}}function Ig(e,n,i){e==="focusin"?(w1(),vs=n,ks=i,vs.attachEvent("onpropertychange",Rf)):e==="focusout"&&w1()}function bg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sl(ks)}function _g(e,n){if(e==="click")return Sl(n)}function Tg(e,n){if(e==="input"||e==="change")return Sl(n)}function Rg(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var In=typeof Object.is=="function"?Object.is:Rg;function Ps(e,n){if(In(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),l=Object.keys(n);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var c=i[l];if(!Ba.call(n,c)||!In(e[c],n[c]))return!1}return!0}function y1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function E1(e,n){var i=y1(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=n&&l>=n)return{node:i,offset:n-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=y1(i)}}function Of(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Of(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Mf(){for(var e=window,n=Yo();n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=Yo(e.document)}return n}function qu(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function Og(e){var n=Mf(),i=e.focusedElem,l=e.selectionRange;if(n!==i&&i&&i.ownerDocument&&Of(i.ownerDocument.documentElement,i)){if(l!==null&&qu(i)){if(n=l.start,e=l.end,e===void 0&&(e=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(e,i.value.length);else if(e=(n=i.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,f=Math.min(l.start,c);l=l.end===void 0?f:Math.min(l.end,c),!e.extend&&f>l&&(c=l,l=f,f=c),c=E1(i,f);var g=E1(i,l);c&&g&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(n=n.createRange(),n.setStart(c.node,c.offset),e.removeAllRanges(),f>l?(e.addRange(n),e.extend(g.node,g.offset)):(n.setEnd(g.node,g.offset),e.addRange(n)))}}for(n=[],e=i;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)e=n[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Mg=Qn&&"documentMode"in document&&11>=document.documentMode,gi=null,tu=null,As=null,nu=!1;function C1(e,n,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;nu||gi==null||gi!==Yo(l)||(l=gi,"selectionStart"in l&&qu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),As&&Ps(As,l)||(As=l,l=el(tu,"onSelect"),0<l.length&&(n=new Zu("onSelect","select",null,n,i),e.push({event:n,listeners:l}),n.target=gi)))}function No(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var pi={animationend:No("Animation","AnimationEnd"),animationiteration:No("Animation","AnimationIteration"),animationstart:No("Animation","AnimationStart"),transitionend:No("Transition","TransitionEnd")},wa={},Df={};Qn&&(Df=document.createElement("div").style,"AnimationEvent"in window||(delete pi.animationend.animation,delete pi.animationiteration.animation,delete pi.animationstart.animation),"TransitionEvent"in window||delete pi.transitionend.transition);function Nl(e){if(wa[e])return wa[e];if(!pi[e])return e;var n=pi[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in Df)return wa[e]=n[i];return e}var kf=Nl("animationend"),Pf=Nl("animationiteration"),Bf=Nl("animationstart"),Lf=Nl("transitionend"),Ff=new Map,v1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function br(e,n){Ff.set(e,n),$r(n,[e])}for(var ya=0;ya<v1.length;ya++){var Ea=v1[ya],Dg=Ea.toLowerCase(),kg=Ea[0].toUpperCase()+Ea.slice(1);br(Dg,"on"+kg)}br(kf,"onAnimationEnd");br(Pf,"onAnimationIteration");br(Bf,"onAnimationStart");br("dblclick","onDoubleClick");br("focusin","onFocus");br("focusout","onBlur");br(Lf,"onTransitionEnd");Oi("onMouseEnter",["mouseout","mouseover"]);Oi("onMouseLeave",["mouseout","mouseover"]);Oi("onPointerEnter",["pointerout","pointerover"]);Oi("onPointerLeave",["pointerout","pointerover"]);$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$r("onBeforeInput",["compositionend","keypress","textInput","paste"]);$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ps="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pg=new Set("cancel close invalid load scroll toggle".split(" ").concat(ps));function A1(e,n,i){var l=e.type||"unknown-event";e.currentTarget=i,Dx(l,n,void 0,e),e.currentTarget=null}function jf(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],c=l.event;l=l.listeners;e:{var f=void 0;if(n)for(var g=l.length-1;0<=g;g--){var y=l[g],m=y.instance,p=y.currentTarget;if(y=y.listener,m!==f&&c.isPropagationStopped())break e;A1(c,y,p),f=m}else for(g=0;g<l.length;g++){if(y=l[g],m=y.instance,p=y.currentTarget,y=y.listener,m!==f&&c.isPropagationStopped())break e;A1(c,y,p),f=m}}}if(Qo)throw e=qa,Qo=!1,qa=null,e}function We(e,n){var i=n[lu];i===void 0&&(i=n[lu]=new Set);var l=e+"__bubble";i.has(l)||(Uf(n,e,2,!1),i.add(l))}function Ca(e,n,i){var l=0;n&&(l|=4),Uf(i,e,l,n)}var Io="_reactListening"+Math.random().toString(36).slice(2);function Bs(e){if(!e[Io]){e[Io]=!0,X0.forEach(function(i){i!=="selectionchange"&&(Pg.has(i)||Ca(i,!1,e),Ca(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Io]||(n[Io]=!0,Ca("selectionchange",!1,n))}}function Uf(e,n,i,l){switch(Af(n)){case 1:var c=Qx;break;case 4:c=Kx;break;default:c=Xu}i=c.bind(null,n,i,e),c=void 0,!Ka||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(n,i,{capture:!0,passive:c}):e.addEventListener(n,i,!0):c!==void 0?e.addEventListener(n,i,{passive:c}):e.addEventListener(n,i,!1)}function va(e,n,i,l,c){var f=l;if(!(n&1)&&!(n&2)&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var y=l.stateNode.containerInfo;if(y===c||y.nodeType===8&&y.parentNode===c)break;if(g===4)for(g=l.return;g!==null;){var m=g.tag;if((m===3||m===4)&&(m=g.stateNode.containerInfo,m===c||m.nodeType===8&&m.parentNode===c))return;g=g.return}for(;y!==null;){if(g=zr(y),g===null)return;if(m=g.tag,m===5||m===6){l=f=g;continue e}y=y.parentNode}}l=l.return}uf(function(){var p=f,C=Vu(i),v=[];e:{var I=Ff.get(e);if(I!==void 0){var O=Zu,D=e;switch(e){case"keypress":if(jo(i)===0)break e;case"keydown":case"keyup":O=fg;break;case"focusin":D="focus",O=ga;break;case"focusout":D="blur",O=ga;break;case"beforeblur":case"afterblur":O=ga;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=f1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=$x;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=xg;break;case kf:case Pf:case Bf:O=ng;break;case Lf:O=pg;break;case"scroll":O=qx;break;case"wheel":O=wg;break;case"copy":case"cut":case"paste":O=ig;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=h1}var k=(n&4)!==0,F=!k&&e==="scroll",M=k?I!==null?I+"Capture":null:I;k=[];for(var b=p,T;b!==null;){T=b;var j=T.stateNode;if(T.tag===5&&j!==null&&(T=j,M!==null&&(j=Rs(b,M),j!=null&&k.push(Ls(b,j,T)))),F)break;b=b.return}0<k.length&&(I=new O(I,D,null,i,C),v.push({event:I,listeners:k}))}}if(!(n&7)){e:{if(I=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",I&&i!==Za&&(D=i.relatedTarget||i.fromElement)&&(zr(D)||D[Kn]))break e;if((O||I)&&(I=C.window===C?C:(I=C.ownerDocument)?I.defaultView||I.parentWindow:window,O?(D=i.relatedTarget||i.toElement,O=p,D=D?zr(D):null,D!==null&&(F=ei(D),D!==F||D.tag!==5&&D.tag!==6)&&(D=null)):(O=null,D=p),O!==D)){if(k=f1,j="onMouseLeave",M="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(k=h1,j="onPointerLeave",M="onPointerEnter",b="pointer"),F=O==null?I:mi(O),T=D==null?I:mi(D),I=new k(j,b+"leave",O,i,C),I.target=F,I.relatedTarget=T,j=null,zr(C)===p&&(k=new k(M,b+"enter",D,i,C),k.target=T,k.relatedTarget=F,j=k),F=j,O&&D)t:{for(k=O,M=D,b=0,T=k;T;T=fi(T))b++;for(T=0,j=M;j;j=fi(j))T++;for(;0<b-T;)k=fi(k),b--;for(;0<T-b;)M=fi(M),T--;for(;b--;){if(k===M||M!==null&&k===M.alternate)break t;k=fi(k),M=fi(M)}k=null}else k=null;O!==null&&S1(v,I,O,k,!1),D!==null&&F!==null&&S1(v,F,D,k,!0)}}e:{if(I=p?mi(p):window,O=I.nodeName&&I.nodeName.toLowerCase(),O==="select"||O==="input"&&I.type==="file")var q=Ng;else if(p1(I))if(Tf)q=Tg;else{q=bg;var z=Ig}else(O=I.nodeName)&&O.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(q=_g);if(q&&(q=q(e,p))){_f(v,q,i,C);break e}z&&z(e,I,p),e==="focusout"&&(z=I._wrapperState)&&z.controlled&&I.type==="number"&&Ha(I,"number",I.value)}switch(z=p?mi(p):window,e){case"focusin":(p1(z)||z.contentEditable==="true")&&(gi=z,tu=p,As=null);break;case"focusout":As=tu=gi=null;break;case"mousedown":nu=!0;break;case"contextmenu":case"mouseup":case"dragend":nu=!1,C1(v,i,C);break;case"selectionchange":if(Mg)break;case"keydown":case"keyup":C1(v,i,C)}var L;if(Ku)e:{switch(e){case"compositionstart":var Q="onCompositionStart";break e;case"compositionend":Q="onCompositionEnd";break e;case"compositionupdate":Q="onCompositionUpdate";break e}Q=void 0}else xi?If(e,i)&&(Q="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Q="onCompositionStart");Q&&(Nf&&i.locale!=="ko"&&(xi||Q!=="onCompositionStart"?Q==="onCompositionEnd"&&xi&&(L=Sf()):(xr=C,Yu="value"in xr?xr.value:xr.textContent,xi=!0)),z=el(p,Q),0<z.length&&(Q=new d1(Q,e,null,i,C),v.push({event:Q,listeners:z}),L?Q.data=L:(L=bf(i),L!==null&&(Q.data=L)))),(L=Eg?Cg(e,i):vg(e,i))&&(p=el(p,"onBeforeInput"),0<p.length&&(C=new d1("onBeforeInput","beforeinput",null,i,C),v.push({event:C,listeners:p}),C.data=L))}jf(v,n)})}function Ls(e,n,i){return{instance:e,listener:n,currentTarget:i}}function el(e,n){for(var i=n+"Capture",l=[];e!==null;){var c=e,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=Rs(e,i),f!=null&&l.unshift(Ls(e,f,c)),f=Rs(e,n),f!=null&&l.push(Ls(e,f,c))),e=e.return}return l}function fi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function S1(e,n,i,l,c){for(var f=n._reactName,g=[];i!==null&&i!==l;){var y=i,m=y.alternate,p=y.stateNode;if(m!==null&&m===l)break;y.tag===5&&p!==null&&(y=p,c?(m=Rs(i,f),m!=null&&g.unshift(Ls(i,m,y))):c||(m=Rs(i,f),m!=null&&g.push(Ls(i,m,y)))),i=i.return}g.length!==0&&e.push({event:n,listeners:g})}var Bg=/\r\n?/g,Lg=/\u0000|\uFFFD/g;function N1(e){return(typeof e=="string"?e:""+e).replace(Bg,`
`).replace(Lg,"")}function bo(e,n,i){if(n=N1(n),N1(e)!==n&&i)throw Error($(425))}function tl(){}var ru=null,iu=null;function su(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ou=typeof setTimeout=="function"?setTimeout:void 0,Fg=typeof clearTimeout=="function"?clearTimeout:void 0,I1=typeof Promise=="function"?Promise:void 0,jg=typeof queueMicrotask=="function"?queueMicrotask:typeof I1<"u"?function(e){return I1.resolve(null).then(e).catch(Ug)}:ou;function Ug(e){setTimeout(function(){throw e})}function Aa(e,n){var i=n,l=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(l===0){e.removeChild(c),Ds(n);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=c}while(i);Ds(n)}function Er(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function b1(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return e;n--}else i==="/$"&&n++}e=e.previousSibling}return null}var zi=Math.random().toString(36).slice(2),Ln="__reactFiber$"+zi,Fs="__reactProps$"+zi,Kn="__reactContainer$"+zi,lu="__reactEvents$"+zi,zg="__reactListeners$"+zi,Vg="__reactHandles$"+zi;function zr(e){var n=e[Ln];if(n)return n;for(var i=e.parentNode;i;){if(n=i[Kn]||i[Ln]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=b1(e);e!==null;){if(i=e[Ln])return i;e=b1(e)}return n}e=i,i=e.parentNode}return null}function Js(e){return e=e[Ln]||e[Kn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function mi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function Il(e){return e[Fs]||null}var au=[],wi=-1;function _r(e){return{current:e}}function Ge(e){0>wi||(e.current=au[wi],au[wi]=null,wi--)}function Ve(e,n){wi++,au[wi]=e.current,e.current=n}var Ir={},Dt=_r(Ir),Zt=_r(!1),Yr=Ir;function Mi(e,n){var i=e.type.contextTypes;if(!i)return Ir;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===n)return l.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in i)c[f]=n[f];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=c),c}function Qt(e){return e=e.childContextTypes,e!=null}function nl(){Ge(Zt),Ge(Dt)}function _1(e,n,i){if(Dt.current!==Ir)throw Error($(168));Ve(Dt,n),Ve(Zt,i)}function zf(e,n,i){var l=e.stateNode;if(n=n.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var c in l)if(!(c in n))throw Error($(108,Ix(e)||"Unknown",c));return et({},i,l)}function rl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ir,Yr=Dt.current,Ve(Dt,e),Ve(Zt,Zt.current),!0}function T1(e,n,i){var l=e.stateNode;if(!l)throw Error($(169));i?(e=zf(e,n,Yr),l.__reactInternalMemoizedMergedChildContext=e,Ge(Zt),Ge(Dt),Ve(Dt,e)):Ge(Zt),Ve(Zt,i)}var Wn=null,bl=!1,Sa=!1;function Vf(e){Wn===null?Wn=[e]:Wn.push(e)}function Hg(e){bl=!0,Vf(e)}function Tr(){if(!Sa&&Wn!==null){Sa=!0;var e=0,n=Pe;try{var i=Wn;for(Pe=1;e<i.length;e++){var l=i[e];do l=l(!0);while(l!==null)}Wn=null,bl=!1}catch(c){throw Wn!==null&&(Wn=Wn.slice(e+1)),hf(Hu,Tr),c}finally{Pe=n,Sa=!1}}return null}var yi=[],Ei=0,il=null,sl=0,fn=[],dn=0,Zr=null,Xn=1,Yn="";function jr(e,n){yi[Ei++]=sl,yi[Ei++]=il,il=e,sl=n}function Hf(e,n,i){fn[dn++]=Xn,fn[dn++]=Yn,fn[dn++]=Zr,Zr=e;var l=Xn;e=Yn;var c=32-Sn(l)-1;l&=~(1<<c),i+=1;var f=32-Sn(n)+c;if(30<f){var g=c-c%5;f=(l&(1<<g)-1).toString(32),l>>=g,c-=g,Xn=1<<32-Sn(n)+c|i<<c|l,Yn=f+e}else Xn=1<<f|i<<c|l,Yn=e}function Ju(e){e.return!==null&&(jr(e,1),Hf(e,1,0))}function $u(e){for(;e===il;)il=yi[--Ei],yi[Ei]=null,sl=yi[--Ei],yi[Ei]=null;for(;e===Zr;)Zr=fn[--dn],fn[dn]=null,Yn=fn[--dn],fn[dn]=null,Xn=fn[--dn],fn[dn]=null}var tn=null,en=null,Ze=!1,An=null;function Wf(e,n){var i=hn(5,null,null,0);i.elementType="DELETED",i.stateNode=n,i.return=e,n=e.deletions,n===null?(e.deletions=[i],e.flags|=16):n.push(i)}function R1(e,n){switch(e.tag){case 5:var i=e.type;return n=n.nodeType!==1||i.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,tn=e,en=Er(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,tn=e,en=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(i=Zr!==null?{id:Xn,overflow:Yn}:null,e.memoizedState={dehydrated:n,treeContext:i,retryLane:1073741824},i=hn(18,null,null,0),i.stateNode=n,i.return=e,e.child=i,tn=e,en=null,!0):!1;default:return!1}}function uu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function cu(e){if(Ze){var n=en;if(n){var i=n;if(!R1(e,n)){if(uu(e))throw Error($(418));n=Er(i.nextSibling);var l=tn;n&&R1(e,n)?Wf(l,i):(e.flags=e.flags&-4097|2,Ze=!1,tn=e)}}else{if(uu(e))throw Error($(418));e.flags=e.flags&-4097|2,Ze=!1,tn=e}}}function O1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tn=e}function _o(e){if(e!==tn)return!1;if(!Ze)return O1(e),Ze=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!su(e.type,e.memoizedProps)),n&&(n=en)){if(uu(e))throw Gf(),Error($(418));for(;n;)Wf(e,n),n=Er(n.nextSibling)}if(O1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(n===0){en=Er(e.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++}e=e.nextSibling}en=null}}else en=tn?Er(e.stateNode.nextSibling):null;return!0}function Gf(){for(var e=en;e;)e=Er(e.nextSibling)}function Di(){en=tn=null,Ze=!1}function ec(e){An===null?An=[e]:An.push(e)}var Wg=$n.ReactCurrentBatchConfig;function cs(e,n,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error($(309));var l=i.stateNode}if(!l)throw Error($(147,e));var c=l,f=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===f?n.ref:(n=function(g){var y=c.refs;g===null?delete y[f]:y[f]=g},n._stringRef=f,n)}if(typeof e!="string")throw Error($(284));if(!i._owner)throw Error($(290,e))}return e}function To(e,n){throw e=Object.prototype.toString.call(n),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function M1(e){var n=e._init;return n(e._payload)}function Xf(e){function n(M,b){if(e){var T=M.deletions;T===null?(M.deletions=[b],M.flags|=16):T.push(b)}}function i(M,b){if(!e)return null;for(;b!==null;)n(M,b),b=b.sibling;return null}function l(M,b){for(M=new Map;b!==null;)b.key!==null?M.set(b.key,b):M.set(b.index,b),b=b.sibling;return M}function c(M,b){return M=Sr(M,b),M.index=0,M.sibling=null,M}function f(M,b,T){return M.index=T,e?(T=M.alternate,T!==null?(T=T.index,T<b?(M.flags|=2,b):T):(M.flags|=2,b)):(M.flags|=1048576,b)}function g(M){return e&&M.alternate===null&&(M.flags|=2),M}function y(M,b,T,j){return b===null||b.tag!==6?(b=Oa(T,M.mode,j),b.return=M,b):(b=c(b,T),b.return=M,b)}function m(M,b,T,j){var q=T.type;return q===hi?C(M,b,T.props.children,j,T.key):b!==null&&(b.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===cr&&M1(q)===b.type)?(j=c(b,T.props),j.ref=cs(M,b,T),j.return=M,j):(j=Xo(T.type,T.key,T.props,null,M.mode,j),j.ref=cs(M,b,T),j.return=M,j)}function p(M,b,T,j){return b===null||b.tag!==4||b.stateNode.containerInfo!==T.containerInfo||b.stateNode.implementation!==T.implementation?(b=Ma(T,M.mode,j),b.return=M,b):(b=c(b,T.children||[]),b.return=M,b)}function C(M,b,T,j,q){return b===null||b.tag!==7?(b=Gr(T,M.mode,j,q),b.return=M,b):(b=c(b,T),b.return=M,b)}function v(M,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Oa(""+b,M.mode,T),b.return=M,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case wo:return T=Xo(b.type,b.key,b.props,null,M.mode,T),T.ref=cs(M,null,b),T.return=M,T;case di:return b=Ma(b,M.mode,T),b.return=M,b;case cr:var j=b._init;return v(M,j(b._payload),T)}if(xs(b)||ss(b))return b=Gr(b,M.mode,T,null),b.return=M,b;To(M,b)}return null}function I(M,b,T,j){var q=b!==null?b.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return q!==null?null:y(M,b,""+T,j);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case wo:return T.key===q?m(M,b,T,j):null;case di:return T.key===q?p(M,b,T,j):null;case cr:return q=T._init,I(M,b,q(T._payload),j)}if(xs(T)||ss(T))return q!==null?null:C(M,b,T,j,null);To(M,T)}return null}function O(M,b,T,j,q){if(typeof j=="string"&&j!==""||typeof j=="number")return M=M.get(T)||null,y(b,M,""+j,q);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case wo:return M=M.get(j.key===null?T:j.key)||null,m(b,M,j,q);case di:return M=M.get(j.key===null?T:j.key)||null,p(b,M,j,q);case cr:var z=j._init;return O(M,b,T,z(j._payload),q)}if(xs(j)||ss(j))return M=M.get(T)||null,C(b,M,j,q,null);To(b,j)}return null}function D(M,b,T,j){for(var q=null,z=null,L=b,Q=b=0,X=null;L!==null&&Q<T.length;Q++){L.index>Q?(X=L,L=null):X=L.sibling;var he=I(M,L,T[Q],j);if(he===null){L===null&&(L=X);break}e&&L&&he.alternate===null&&n(M,L),b=f(he,b,Q),z===null?q=he:z.sibling=he,z=he,L=X}if(Q===T.length)return i(M,L),Ze&&jr(M,Q),q;if(L===null){for(;Q<T.length;Q++)L=v(M,T[Q],j),L!==null&&(b=f(L,b,Q),z===null?q=L:z.sibling=L,z=L);return Ze&&jr(M,Q),q}for(L=l(M,L);Q<T.length;Q++)X=O(L,M,Q,T[Q],j),X!==null&&(e&&X.alternate!==null&&L.delete(X.key===null?Q:X.key),b=f(X,b,Q),z===null?q=X:z.sibling=X,z=X);return e&&L.forEach(function(Se){return n(M,Se)}),Ze&&jr(M,Q),q}function k(M,b,T,j){var q=ss(T);if(typeof q!="function")throw Error($(150));if(T=q.call(T),T==null)throw Error($(151));for(var z=q=null,L=b,Q=b=0,X=null,he=T.next();L!==null&&!he.done;Q++,he=T.next()){L.index>Q?(X=L,L=null):X=L.sibling;var Se=I(M,L,he.value,j);if(Se===null){L===null&&(L=X);break}e&&L&&Se.alternate===null&&n(M,L),b=f(Se,b,Q),z===null?q=Se:z.sibling=Se,z=Se,L=X}if(he.done)return i(M,L),Ze&&jr(M,Q),q;if(L===null){for(;!he.done;Q++,he=T.next())he=v(M,he.value,j),he!==null&&(b=f(he,b,Q),z===null?q=he:z.sibling=he,z=he);return Ze&&jr(M,Q),q}for(L=l(M,L);!he.done;Q++,he=T.next())he=O(L,M,Q,he.value,j),he!==null&&(e&&he.alternate!==null&&L.delete(he.key===null?Q:he.key),b=f(he,b,Q),z===null?q=he:z.sibling=he,z=he);return e&&L.forEach(function(re){return n(M,re)}),Ze&&jr(M,Q),q}function F(M,b,T,j){if(typeof T=="object"&&T!==null&&T.type===hi&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case wo:e:{for(var q=T.key,z=b;z!==null;){if(z.key===q){if(q=T.type,q===hi){if(z.tag===7){i(M,z.sibling),b=c(z,T.props.children),b.return=M,M=b;break e}}else if(z.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===cr&&M1(q)===z.type){i(M,z.sibling),b=c(z,T.props),b.ref=cs(M,z,T),b.return=M,M=b;break e}i(M,z);break}else n(M,z);z=z.sibling}T.type===hi?(b=Gr(T.props.children,M.mode,j,T.key),b.return=M,M=b):(j=Xo(T.type,T.key,T.props,null,M.mode,j),j.ref=cs(M,b,T),j.return=M,M=j)}return g(M);case di:e:{for(z=T.key;b!==null;){if(b.key===z)if(b.tag===4&&b.stateNode.containerInfo===T.containerInfo&&b.stateNode.implementation===T.implementation){i(M,b.sibling),b=c(b,T.children||[]),b.return=M,M=b;break e}else{i(M,b);break}else n(M,b);b=b.sibling}b=Ma(T,M.mode,j),b.return=M,M=b}return g(M);case cr:return z=T._init,F(M,b,z(T._payload),j)}if(xs(T))return D(M,b,T,j);if(ss(T))return k(M,b,T,j);To(M,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,b!==null&&b.tag===6?(i(M,b.sibling),b=c(b,T),b.return=M,M=b):(i(M,b),b=Oa(T,M.mode,j),b.return=M,M=b),g(M)):i(M,b)}return F}var ki=Xf(!0),Yf=Xf(!1),ol=_r(null),ll=null,Ci=null,tc=null;function nc(){tc=Ci=ll=null}function rc(e){var n=ol.current;Ge(ol),e._currentValue=n}function fu(e,n,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===i)break;e=e.return}}function Ti(e,n){ll=e,tc=Ci=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(Yt=!0),e.firstContext=null)}function gn(e){var n=e._currentValue;if(tc!==e)if(e={context:e,memoizedValue:n,next:null},Ci===null){if(ll===null)throw Error($(308));Ci=e,ll.dependencies={lanes:0,firstContext:e}}else Ci=Ci.next=e;return n}var Vr=null;function ic(e){Vr===null?Vr=[e]:Vr.push(e)}function Zf(e,n,i,l){var c=n.interleaved;return c===null?(i.next=i,ic(n)):(i.next=c.next,c.next=i),n.interleaved=i,qn(e,l)}function qn(e,n){e.lanes|=n;var i=e.alternate;for(i!==null&&(i.lanes|=n),i=e,e=e.return;e!==null;)e.childLanes|=n,i=e.alternate,i!==null&&(i.childLanes|=n),i=e,e=e.return;return i.tag===3?i.stateNode:null}var fr=!1;function sc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Cr(e,n,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,Re&2){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,qn(e,i)}return c=l.interleaved,c===null?(n.next=n,ic(l)):(n.next=c.next,c.next=n),l.interleaved=n,qn(e,i)}function Uo(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194240)!==0)){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,Wu(e,i)}}function D1(e,n){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var c=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var g={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};f===null?c=f=g:f=f.next=g,i=i.next}while(i!==null);f===null?c=f=n:f=f.next=n}else c=f=n;i={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:l.shared,effects:l.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}function al(e,n,i,l){var c=e.updateQueue;fr=!1;var f=c.firstBaseUpdate,g=c.lastBaseUpdate,y=c.shared.pending;if(y!==null){c.shared.pending=null;var m=y,p=m.next;m.next=null,g===null?f=p:g.next=p,g=m;var C=e.alternate;C!==null&&(C=C.updateQueue,y=C.lastBaseUpdate,y!==g&&(y===null?C.firstBaseUpdate=p:y.next=p,C.lastBaseUpdate=m))}if(f!==null){var v=c.baseState;g=0,C=p=m=null,y=f;do{var I=y.lane,O=y.eventTime;if((l&I)===I){C!==null&&(C=C.next={eventTime:O,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var D=e,k=y;switch(I=n,O=i,k.tag){case 1:if(D=k.payload,typeof D=="function"){v=D.call(O,v,I);break e}v=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=k.payload,I=typeof D=="function"?D.call(O,v,I):D,I==null)break e;v=et({},v,I);break e;case 2:fr=!0}}y.callback!==null&&y.lane!==0&&(e.flags|=64,I=c.effects,I===null?c.effects=[y]:I.push(y))}else O={eventTime:O,lane:I,tag:y.tag,payload:y.payload,callback:y.callback,next:null},C===null?(p=C=O,m=v):C=C.next=O,g|=I;if(y=y.next,y===null){if(y=c.shared.pending,y===null)break;I=y,y=I.next,I.next=null,c.lastBaseUpdate=I,c.shared.pending=null}}while(!0);if(C===null&&(m=v),c.baseState=m,c.firstBaseUpdate=p,c.lastBaseUpdate=C,n=c.shared.interleaved,n!==null){c=n;do g|=c.lane,c=c.next;while(c!==n)}else f===null&&(c.shared.lanes=0);Kr|=g,e.lanes=g,e.memoizedState=v}}function k1(e,n,i){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var l=e[n],c=l.callback;if(c!==null){if(l.callback=null,l=i,typeof c!="function")throw Error($(191,c));c.call(l)}}}var $s={},jn=_r($s),js=_r($s),Us=_r($s);function Hr(e){if(e===$s)throw Error($(174));return e}function oc(e,n){switch(Ve(Us,n),Ve(js,e),Ve(jn,$s),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Ga(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Ga(n,e)}Ge(jn),Ve(jn,n)}function Pi(){Ge(jn),Ge(js),Ge(Us)}function Kf(e){Hr(Us.current);var n=Hr(jn.current),i=Ga(n,e.type);n!==i&&(Ve(js,e),Ve(jn,i))}function lc(e){js.current===e&&(Ge(jn),Ge(js))}var Je=_r(0);function ul(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Na=[];function ac(){for(var e=0;e<Na.length;e++)Na[e]._workInProgressVersionPrimary=null;Na.length=0}var zo=$n.ReactCurrentDispatcher,Ia=$n.ReactCurrentBatchConfig,Qr=0,$e=null,xt=null,yt=null,cl=!1,Ss=!1,zs=0,Gg=0;function Rt(){throw Error($(321))}function uc(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!In(e[i],n[i]))return!1;return!0}function cc(e,n,i,l,c,f){if(Qr=f,$e=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,zo.current=e===null||e.memoizedState===null?Qg:Kg,e=i(l,c),Ss){f=0;do{if(Ss=!1,zs=0,25<=f)throw Error($(301));f+=1,yt=xt=null,n.updateQueue=null,zo.current=qg,e=i(l,c)}while(Ss)}if(zo.current=fl,n=xt!==null&&xt.next!==null,Qr=0,yt=xt=$e=null,cl=!1,n)throw Error($(300));return e}function fc(){var e=zs!==0;return zs=0,e}function Bn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?$e.memoizedState=yt=e:yt=yt.next=e,yt}function pn(){if(xt===null){var e=$e.alternate;e=e!==null?e.memoizedState:null}else e=xt.next;var n=yt===null?$e.memoizedState:yt.next;if(n!==null)yt=n,xt=e;else{if(e===null)throw Error($(310));xt=e,e={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},yt===null?$e.memoizedState=yt=e:yt=yt.next=e}return yt}function Vs(e,n){return typeof n=="function"?n(e):n}function ba(e){var n=pn(),i=n.queue;if(i===null)throw Error($(311));i.lastRenderedReducer=e;var l=xt,c=l.baseQueue,f=i.pending;if(f!==null){if(c!==null){var g=c.next;c.next=f.next,f.next=g}l.baseQueue=c=f,i.pending=null}if(c!==null){f=c.next,l=l.baseState;var y=g=null,m=null,p=f;do{var C=p.lane;if((Qr&C)===C)m!==null&&(m=m.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),l=p.hasEagerState?p.eagerState:e(l,p.action);else{var v={lane:C,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};m===null?(y=m=v,g=l):m=m.next=v,$e.lanes|=C,Kr|=C}p=p.next}while(p!==null&&p!==f);m===null?g=l:m.next=y,In(l,n.memoizedState)||(Yt=!0),n.memoizedState=l,n.baseState=g,n.baseQueue=m,i.lastRenderedState=l}if(e=i.interleaved,e!==null){c=e;do f=c.lane,$e.lanes|=f,Kr|=f,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[n.memoizedState,i.dispatch]}function _a(e){var n=pn(),i=n.queue;if(i===null)throw Error($(311));i.lastRenderedReducer=e;var l=i.dispatch,c=i.pending,f=n.memoizedState;if(c!==null){i.pending=null;var g=c=c.next;do f=e(f,g.action),g=g.next;while(g!==c);In(f,n.memoizedState)||(Yt=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),i.lastRenderedState=f}return[f,l]}function qf(){}function Jf(e,n){var i=$e,l=pn(),c=n(),f=!In(l.memoizedState,c);if(f&&(l.memoizedState=c,Yt=!0),l=l.queue,dc(td.bind(null,i,l,e),[e]),l.getSnapshot!==n||f||yt!==null&&yt.memoizedState.tag&1){if(i.flags|=2048,Hs(9,ed.bind(null,i,l,c,n),void 0,null),Et===null)throw Error($(349));Qr&30||$f(i,n,c)}return c}function $f(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=$e.updateQueue,n===null?(n={lastEffect:null,stores:null},$e.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function ed(e,n,i,l){n.value=i,n.getSnapshot=l,nd(n)&&rd(e)}function td(e,n,i){return i(function(){nd(n)&&rd(e)})}function nd(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!In(e,i)}catch{return!0}}function rd(e){var n=qn(e,1);n!==null&&Nn(n,e,1,-1)}function P1(e){var n=Bn();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:e},n.queue=e,e=e.dispatch=Zg.bind(null,$e,e),[n.memoizedState,e]}function Hs(e,n,i,l){return e={tag:e,create:n,destroy:i,deps:l,next:null},n=$e.updateQueue,n===null?(n={lastEffect:null,stores:null},$e.updateQueue=n,n.lastEffect=e.next=e):(i=n.lastEffect,i===null?n.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,n.lastEffect=e)),e}function id(){return pn().memoizedState}function Vo(e,n,i,l){var c=Bn();$e.flags|=e,c.memoizedState=Hs(1|n,i,void 0,l===void 0?null:l)}function _l(e,n,i,l){var c=pn();l=l===void 0?null:l;var f=void 0;if(xt!==null){var g=xt.memoizedState;if(f=g.destroy,l!==null&&uc(l,g.deps)){c.memoizedState=Hs(n,i,f,l);return}}$e.flags|=e,c.memoizedState=Hs(1|n,i,f,l)}function B1(e,n){return Vo(8390656,8,e,n)}function dc(e,n){return _l(2048,8,e,n)}function sd(e,n){return _l(4,2,e,n)}function od(e,n){return _l(4,4,e,n)}function ld(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function ad(e,n,i){return i=i!=null?i.concat([e]):null,_l(4,4,ld.bind(null,n,e),i)}function hc(){}function ud(e,n){var i=pn();n=n===void 0?null:n;var l=i.memoizedState;return l!==null&&n!==null&&uc(n,l[1])?l[0]:(i.memoizedState=[e,n],e)}function cd(e,n){var i=pn();n=n===void 0?null:n;var l=i.memoizedState;return l!==null&&n!==null&&uc(n,l[1])?l[0]:(e=e(),i.memoizedState=[e,n],e)}function fd(e,n,i){return Qr&21?(In(i,n)||(i=pf(),$e.lanes|=i,Kr|=i,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,Yt=!0),e.memoizedState=i)}function Xg(e,n){var i=Pe;Pe=i!==0&&4>i?i:4,e(!0);var l=Ia.transition;Ia.transition={};try{e(!1),n()}finally{Pe=i,Ia.transition=l}}function dd(){return pn().memoizedState}function Yg(e,n,i){var l=Ar(e);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},hd(e))xd(n,i);else if(i=Zf(e,n,i,l),i!==null){var c=Lt();Nn(i,e,l,c),gd(i,n,l)}}function Zg(e,n,i){var l=Ar(e),c={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(hd(e))xd(n,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var g=n.lastRenderedState,y=f(g,i);if(c.hasEagerState=!0,c.eagerState=y,In(y,g)){var m=n.interleaved;m===null?(c.next=c,ic(n)):(c.next=m.next,m.next=c),n.interleaved=c;return}}catch{}finally{}i=Zf(e,n,c,l),i!==null&&(c=Lt(),Nn(i,e,l,c),gd(i,n,l))}}function hd(e){var n=e.alternate;return e===$e||n!==null&&n===$e}function xd(e,n){Ss=cl=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function gd(e,n,i){if(i&4194240){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,Wu(e,i)}}var fl={readContext:gn,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},Qg={readContext:gn,useCallback:function(e,n){return Bn().memoizedState=[e,n===void 0?null:n],e},useContext:gn,useEffect:B1,useImperativeHandle:function(e,n,i){return i=i!=null?i.concat([e]):null,Vo(4194308,4,ld.bind(null,n,e),i)},useLayoutEffect:function(e,n){return Vo(4194308,4,e,n)},useInsertionEffect:function(e,n){return Vo(4,2,e,n)},useMemo:function(e,n){var i=Bn();return n=n===void 0?null:n,e=e(),i.memoizedState=[e,n],e},useReducer:function(e,n,i){var l=Bn();return n=i!==void 0?i(n):n,l.memoizedState=l.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=Yg.bind(null,$e,e),[l.memoizedState,e]},useRef:function(e){var n=Bn();return e={current:e},n.memoizedState=e},useState:P1,useDebugValue:hc,useDeferredValue:function(e){return Bn().memoizedState=e},useTransition:function(){var e=P1(!1),n=e[0];return e=Xg.bind(null,e[1]),Bn().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,i){var l=$e,c=Bn();if(Ze){if(i===void 0)throw Error($(407));i=i()}else{if(i=n(),Et===null)throw Error($(349));Qr&30||$f(l,n,i)}c.memoizedState=i;var f={value:i,getSnapshot:n};return c.queue=f,B1(td.bind(null,l,f,e),[e]),l.flags|=2048,Hs(9,ed.bind(null,l,f,i,n),void 0,null),i},useId:function(){var e=Bn(),n=Et.identifierPrefix;if(Ze){var i=Yn,l=Xn;i=(l&~(1<<32-Sn(l)-1)).toString(32)+i,n=":"+n+"R"+i,i=zs++,0<i&&(n+="H"+i.toString(32)),n+=":"}else i=Gg++,n=":"+n+"r"+i.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Kg={readContext:gn,useCallback:ud,useContext:gn,useEffect:dc,useImperativeHandle:ad,useInsertionEffect:sd,useLayoutEffect:od,useMemo:cd,useReducer:ba,useRef:id,useState:function(){return ba(Vs)},useDebugValue:hc,useDeferredValue:function(e){var n=pn();return fd(n,xt.memoizedState,e)},useTransition:function(){var e=ba(Vs)[0],n=pn().memoizedState;return[e,n]},useMutableSource:qf,useSyncExternalStore:Jf,useId:dd,unstable_isNewReconciler:!1},qg={readContext:gn,useCallback:ud,useContext:gn,useEffect:dc,useImperativeHandle:ad,useInsertionEffect:sd,useLayoutEffect:od,useMemo:cd,useReducer:_a,useRef:id,useState:function(){return _a(Vs)},useDebugValue:hc,useDeferredValue:function(e){var n=pn();return xt===null?n.memoizedState=e:fd(n,xt.memoizedState,e)},useTransition:function(){var e=_a(Vs)[0],n=pn().memoizedState;return[e,n]},useMutableSource:qf,useSyncExternalStore:Jf,useId:dd,unstable_isNewReconciler:!1};function Cn(e,n){if(e&&e.defaultProps){n=et({},n),e=e.defaultProps;for(var i in e)n[i]===void 0&&(n[i]=e[i]);return n}return n}function du(e,n,i,l){n=e.memoizedState,i=i(l,n),i=i==null?n:et({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Tl={isMounted:function(e){return(e=e._reactInternals)?ei(e)===e:!1},enqueueSetState:function(e,n,i){e=e._reactInternals;var l=Lt(),c=Ar(e),f=Zn(l,c);f.payload=n,i!=null&&(f.callback=i),n=Cr(e,f,c),n!==null&&(Nn(n,e,c,l),Uo(n,e,c))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var l=Lt(),c=Ar(e),f=Zn(l,c);f.tag=1,f.payload=n,i!=null&&(f.callback=i),n=Cr(e,f,c),n!==null&&(Nn(n,e,c,l),Uo(n,e,c))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=Lt(),l=Ar(e),c=Zn(i,l);c.tag=2,n!=null&&(c.callback=n),n=Cr(e,c,l),n!==null&&(Nn(n,e,l,i),Uo(n,e,l))}};function L1(e,n,i,l,c,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,g):n.prototype&&n.prototype.isPureReactComponent?!Ps(i,l)||!Ps(c,f):!0}function pd(e,n,i){var l=!1,c=Ir,f=n.contextType;return typeof f=="object"&&f!==null?f=gn(f):(c=Qt(n)?Yr:Dt.current,l=n.contextTypes,f=(l=l!=null)?Mi(e,c):Ir),n=new n(i,f),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Tl,e.stateNode=n,n._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=f),n}function F1(e,n,i,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,l),n.state!==e&&Tl.enqueueReplaceState(n,n.state,null)}function hu(e,n,i,l){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs={},sc(e);var f=n.contextType;typeof f=="object"&&f!==null?c.context=gn(f):(f=Qt(n)?Yr:Dt.current,c.context=Mi(e,f)),c.state=e.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(du(e,n,f,i),c.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(n=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),n!==c.state&&Tl.enqueueReplaceState(c,c.state,null),al(e,i,c,l),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Bi(e,n){try{var i="",l=n;do i+=Nx(l),l=l.return;while(l);var c=i}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:n,stack:c,digest:null}}function Ta(e,n,i){return{value:e,source:null,stack:i??null,digest:n??null}}function xu(e,n){try{console.error(n.value)}catch(i){setTimeout(function(){throw i})}}var Jg=typeof WeakMap=="function"?WeakMap:Map;function md(e,n,i){i=Zn(-1,i),i.tag=3,i.payload={element:null};var l=n.value;return i.callback=function(){hl||(hl=!0,Su=l),xu(e,n)},i}function wd(e,n,i){i=Zn(-1,i),i.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var c=n.value;i.payload=function(){return l(c)},i.callback=function(){xu(e,n)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(i.callback=function(){xu(e,n),typeof l!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var g=n.stack;this.componentDidCatch(n.value,{componentStack:g!==null?g:""})}),i}function j1(e,n,i){var l=e.pingCache;if(l===null){l=e.pingCache=new Jg;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(i)||(c.add(i),e=d2.bind(null,e,n,i),n.then(e,e))}function U1(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function z1(e,n,i,l,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===n?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(n=Zn(-1,1),n.tag=2,Cr(i,n,1))),i.lanes|=1),e)}var $g=$n.ReactCurrentOwner,Yt=!1;function Bt(e,n,i,l){n.child=e===null?Yf(n,null,i,l):ki(n,e.child,i,l)}function V1(e,n,i,l,c){i=i.render;var f=n.ref;return Ti(n,c),l=cc(e,n,i,l,f,c),i=fc(),e!==null&&!Yt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~c,Jn(e,n,c)):(Ze&&i&&Ju(n),n.flags|=1,Bt(e,n,l,c),n.child)}function H1(e,n,i,l,c){if(e===null){var f=i.type;return typeof f=="function"&&!Cc(f)&&f.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(n.tag=15,n.type=f,yd(e,n,f,l,c)):(e=Xo(i.type,null,l,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!(e.lanes&c)){var g=f.memoizedProps;if(i=i.compare,i=i!==null?i:Ps,i(g,l)&&e.ref===n.ref)return Jn(e,n,c)}return n.flags|=1,e=Sr(f,l),e.ref=n.ref,e.return=n,n.child=e}function yd(e,n,i,l,c){if(e!==null){var f=e.memoizedProps;if(Ps(f,l)&&e.ref===n.ref)if(Yt=!1,n.pendingProps=l=f,(e.lanes&c)!==0)e.flags&131072&&(Yt=!0);else return n.lanes=e.lanes,Jn(e,n,c)}return gu(e,n,i,l,c)}function Ed(e,n,i){var l=n.pendingProps,c=l.children,f=e!==null?e.memoizedState:null;if(l.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Ai,$t),$t|=i;else{if(!(i&1073741824))return e=f!==null?f.baseLanes|i:i,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Ve(Ai,$t),$t|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=f!==null?f.baseLanes:i,Ve(Ai,$t),$t|=l}else f!==null?(l=f.baseLanes|i,n.memoizedState=null):l=i,Ve(Ai,$t),$t|=l;return Bt(e,n,c,i),n.child}function Cd(e,n){var i=n.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(n.flags|=512,n.flags|=2097152)}function gu(e,n,i,l,c){var f=Qt(i)?Yr:Dt.current;return f=Mi(n,f),Ti(n,c),i=cc(e,n,i,l,f,c),l=fc(),e!==null&&!Yt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~c,Jn(e,n,c)):(Ze&&l&&Ju(n),n.flags|=1,Bt(e,n,i,c),n.child)}function W1(e,n,i,l,c){if(Qt(i)){var f=!0;rl(n)}else f=!1;if(Ti(n,c),n.stateNode===null)Ho(e,n),pd(n,i,l),hu(n,i,l,c),l=!0;else if(e===null){var g=n.stateNode,y=n.memoizedProps;g.props=y;var m=g.context,p=i.contextType;typeof p=="object"&&p!==null?p=gn(p):(p=Qt(i)?Yr:Dt.current,p=Mi(n,p));var C=i.getDerivedStateFromProps,v=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function";v||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(y!==l||m!==p)&&F1(n,g,l,p),fr=!1;var I=n.memoizedState;g.state=I,al(n,l,g,c),m=n.memoizedState,y!==l||I!==m||Zt.current||fr?(typeof C=="function"&&(du(n,i,C,l),m=n.memoizedState),(y=fr||L1(n,i,y,l,I,m,p))?(v||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(n.flags|=4194308)):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=m),g.props=l,g.state=m,g.context=p,l=y):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{g=n.stateNode,Qf(e,n),y=n.memoizedProps,p=n.type===n.elementType?y:Cn(n.type,y),g.props=p,v=n.pendingProps,I=g.context,m=i.contextType,typeof m=="object"&&m!==null?m=gn(m):(m=Qt(i)?Yr:Dt.current,m=Mi(n,m));var O=i.getDerivedStateFromProps;(C=typeof O=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(y!==v||I!==m)&&F1(n,g,l,m),fr=!1,I=n.memoizedState,g.state=I,al(n,l,g,c);var D=n.memoizedState;y!==v||I!==D||Zt.current||fr?(typeof O=="function"&&(du(n,i,O,l),D=n.memoizedState),(p=fr||L1(n,i,p,l,I,D,m)||!1)?(C||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,D,m),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,D,m)),typeof g.componentDidUpdate=="function"&&(n.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof g.componentDidUpdate!="function"||y===e.memoizedProps&&I===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&I===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=D),g.props=l,g.state=D,g.context=m,l=p):(typeof g.componentDidUpdate!="function"||y===e.memoizedProps&&I===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&I===e.memoizedState||(n.flags|=1024),l=!1)}return pu(e,n,i,l,f,c)}function pu(e,n,i,l,c,f){Cd(e,n);var g=(n.flags&128)!==0;if(!l&&!g)return c&&T1(n,i,!1),Jn(e,n,f);l=n.stateNode,$g.current=n;var y=g&&typeof i.getDerivedStateFromError!="function"?null:l.render();return n.flags|=1,e!==null&&g?(n.child=ki(n,e.child,null,f),n.child=ki(n,null,y,f)):Bt(e,n,y,f),n.memoizedState=l.state,c&&T1(n,i,!0),n.child}function vd(e){var n=e.stateNode;n.pendingContext?_1(e,n.pendingContext,n.pendingContext!==n.context):n.context&&_1(e,n.context,!1),oc(e,n.containerInfo)}function G1(e,n,i,l,c){return Di(),ec(c),n.flags|=256,Bt(e,n,i,l),n.child}var mu={dehydrated:null,treeContext:null,retryLane:0};function wu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ad(e,n,i){var l=n.pendingProps,c=Je.current,f=!1,g=(n.flags&128)!==0,y;if((y=g)||(y=e!==null&&e.memoizedState===null?!1:(c&2)!==0),y?(f=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Ve(Je,c&1),e===null)return cu(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(g=l.children,e=l.fallback,f?(l=n.mode,f=n.child,g={mode:"hidden",children:g},!(l&1)&&f!==null?(f.childLanes=0,f.pendingProps=g):f=Ml(g,l,0,null),e=Gr(e,l,i,null),f.return=n,e.return=n,f.sibling=e,n.child=f,n.child.memoizedState=wu(i),n.memoizedState=mu,e):xc(n,g));if(c=e.memoizedState,c!==null&&(y=c.dehydrated,y!==null))return e2(e,n,g,l,y,c,i);if(f){f=l.fallback,g=n.mode,c=e.child,y=c.sibling;var m={mode:"hidden",children:l.children};return!(g&1)&&n.child!==c?(l=n.child,l.childLanes=0,l.pendingProps=m,n.deletions=null):(l=Sr(c,m),l.subtreeFlags=c.subtreeFlags&14680064),y!==null?f=Sr(y,f):(f=Gr(f,g,i,null),f.flags|=2),f.return=n,l.return=n,l.sibling=f,n.child=l,l=f,f=n.child,g=e.child.memoizedState,g=g===null?wu(i):{baseLanes:g.baseLanes|i,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~i,n.memoizedState=mu,l}return f=e.child,e=f.sibling,l=Sr(f,{mode:"visible",children:l.children}),!(n.mode&1)&&(l.lanes=i),l.return=n,l.sibling=null,e!==null&&(i=n.deletions,i===null?(n.deletions=[e],n.flags|=16):i.push(e)),n.child=l,n.memoizedState=null,l}function xc(e,n){return n=Ml({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Ro(e,n,i,l){return l!==null&&ec(l),ki(n,e.child,null,i),e=xc(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function e2(e,n,i,l,c,f,g){if(i)return n.flags&256?(n.flags&=-257,l=Ta(Error($(422))),Ro(e,n,g,l)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(f=l.fallback,c=n.mode,l=Ml({mode:"visible",children:l.children},c,0,null),f=Gr(f,c,g,null),f.flags|=2,l.return=n,f.return=n,l.sibling=f,n.child=l,n.mode&1&&ki(n,e.child,null,g),n.child.memoizedState=wu(g),n.memoizedState=mu,f);if(!(n.mode&1))return Ro(e,n,g,null);if(c.data==="$!"){if(l=c.nextSibling&&c.nextSibling.dataset,l)var y=l.dgst;return l=y,f=Error($(419)),l=Ta(f,l,void 0),Ro(e,n,g,l)}if(y=(g&e.childLanes)!==0,Yt||y){if(l=Et,l!==null){switch(g&-g){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(l.suspendedLanes|g)?0:c,c!==0&&c!==f.retryLane&&(f.retryLane=c,qn(e,c),Nn(l,e,c,-1))}return Ec(),l=Ta(Error($(421))),Ro(e,n,g,l)}return c.data==="$?"?(n.flags|=128,n.child=e.child,n=h2.bind(null,e),c._reactRetry=n,null):(e=f.treeContext,en=Er(c.nextSibling),tn=n,Ze=!0,An=null,e!==null&&(fn[dn++]=Xn,fn[dn++]=Yn,fn[dn++]=Zr,Xn=e.id,Yn=e.overflow,Zr=n),n=xc(n,l.children),n.flags|=4096,n)}function X1(e,n,i){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),fu(e.return,n,i)}function Ra(e,n,i,l,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:c}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=i,f.tailMode=c)}function Sd(e,n,i){var l=n.pendingProps,c=l.revealOrder,f=l.tail;if(Bt(e,n,l.children,i),l=Je.current,l&2)l=l&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&X1(e,i,n);else if(e.tag===19)X1(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Ve(Je,l),!(n.mode&1))n.memoizedState=null;else switch(c){case"forwards":for(i=n.child,c=null;i!==null;)e=i.alternate,e!==null&&ul(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=n.child,n.child=null):(c=i.sibling,i.sibling=null),Ra(n,!1,c,i,f);break;case"backwards":for(i=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&ul(e)===null){n.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Ra(n,!0,i,null,f);break;case"together":Ra(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ho(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Jn(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Kr|=n.lanes,!(i&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error($(153));if(n.child!==null){for(e=n.child,i=Sr(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=Sr(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function t2(e,n,i){switch(n.tag){case 3:vd(n),Di();break;case 5:Kf(n);break;case 1:Qt(n.type)&&rl(n);break;case 4:oc(n,n.stateNode.containerInfo);break;case 10:var l=n.type._context,c=n.memoizedProps.value;Ve(ol,l._currentValue),l._currentValue=c;break;case 13:if(l=n.memoizedState,l!==null)return l.dehydrated!==null?(Ve(Je,Je.current&1),n.flags|=128,null):i&n.child.childLanes?Ad(e,n,i):(Ve(Je,Je.current&1),e=Jn(e,n,i),e!==null?e.sibling:null);Ve(Je,Je.current&1);break;case 19:if(l=(i&n.childLanes)!==0,e.flags&128){if(l)return Sd(e,n,i);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Ve(Je,Je.current),l)break;return null;case 22:case 23:return n.lanes=0,Ed(e,n,i)}return Jn(e,n,i)}var Nd,yu,Id,bd;Nd=function(e,n){for(var i=n.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};yu=function(){};Id=function(e,n,i,l){var c=e.memoizedProps;if(c!==l){e=n.stateNode,Hr(jn.current);var f=null;switch(i){case"input":c=za(e,c),l=za(e,l),f=[];break;case"select":c=et({},c,{value:void 0}),l=et({},l,{value:void 0}),f=[];break;case"textarea":c=Wa(e,c),l=Wa(e,l),f=[];break;default:typeof c.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=tl)}Xa(i,l);var g;i=null;for(p in c)if(!l.hasOwnProperty(p)&&c.hasOwnProperty(p)&&c[p]!=null)if(p==="style"){var y=c[p];for(g in y)y.hasOwnProperty(g)&&(i||(i={}),i[g]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(_s.hasOwnProperty(p)?f||(f=[]):(f=f||[]).push(p,null));for(p in l){var m=l[p];if(y=c!=null?c[p]:void 0,l.hasOwnProperty(p)&&m!==y&&(m!=null||y!=null))if(p==="style")if(y){for(g in y)!y.hasOwnProperty(g)||m&&m.hasOwnProperty(g)||(i||(i={}),i[g]="");for(g in m)m.hasOwnProperty(g)&&y[g]!==m[g]&&(i||(i={}),i[g]=m[g])}else i||(f||(f=[]),f.push(p,i)),i=m;else p==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,y=y?y.__html:void 0,m!=null&&y!==m&&(f=f||[]).push(p,m)):p==="children"?typeof m!="string"&&typeof m!="number"||(f=f||[]).push(p,""+m):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(_s.hasOwnProperty(p)?(m!=null&&p==="onScroll"&&We("scroll",e),f||y===m||(f=[])):(f=f||[]).push(p,m))}i&&(f=f||[]).push("style",i);var p=f;(n.updateQueue=p)&&(n.flags|=4)}};bd=function(e,n,i,l){i!==l&&(n.flags|=4)};function fs(e,n){if(!Ze)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ot(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(n)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,l|=c.subtreeFlags&14680064,l|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=l,e.childLanes=i,n}function n2(e,n,i){var l=n.pendingProps;switch($u(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(n),null;case 1:return Qt(n.type)&&nl(),Ot(n),null;case 3:return l=n.stateNode,Pi(),Ge(Zt),Ge(Dt),ac(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(_o(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,An!==null&&(bu(An),An=null))),yu(e,n),Ot(n),null;case 5:lc(n);var c=Hr(Us.current);if(i=n.type,e!==null&&n.stateNode!=null)Id(e,n,i,l,c),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!l){if(n.stateNode===null)throw Error($(166));return Ot(n),null}if(e=Hr(jn.current),_o(n)){l=n.stateNode,i=n.type;var f=n.memoizedProps;switch(l[Ln]=n,l[Fs]=f,e=(n.mode&1)!==0,i){case"dialog":We("cancel",l),We("close",l);break;case"iframe":case"object":case"embed":We("load",l);break;case"video":case"audio":for(c=0;c<ps.length;c++)We(ps[c],l);break;case"source":We("error",l);break;case"img":case"image":case"link":We("error",l),We("load",l);break;case"details":We("toggle",l);break;case"input":t1(l,f),We("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!f.multiple},We("invalid",l);break;case"textarea":r1(l,f),We("invalid",l)}Xa(i,f),c=null;for(var g in f)if(f.hasOwnProperty(g)){var y=f[g];g==="children"?typeof y=="string"?l.textContent!==y&&(f.suppressHydrationWarning!==!0&&bo(l.textContent,y,e),c=["children",y]):typeof y=="number"&&l.textContent!==""+y&&(f.suppressHydrationWarning!==!0&&bo(l.textContent,y,e),c=["children",""+y]):_s.hasOwnProperty(g)&&y!=null&&g==="onScroll"&&We("scroll",l)}switch(i){case"input":yo(l),n1(l,f,!0);break;case"textarea":yo(l),i1(l);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(l.onclick=tl)}l=c,n.updateQueue=l,l!==null&&(n.flags|=4)}else{g=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ef(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=g.createElement(i,{is:l.is}):(e=g.createElement(i),i==="select"&&(g=e,l.multiple?g.multiple=!0:l.size&&(g.size=l.size))):e=g.createElementNS(e,i),e[Ln]=n,e[Fs]=l,Nd(e,n,!1,!1),n.stateNode=e;e:{switch(g=Ya(i,l),i){case"dialog":We("cancel",e),We("close",e),c=l;break;case"iframe":case"object":case"embed":We("load",e),c=l;break;case"video":case"audio":for(c=0;c<ps.length;c++)We(ps[c],e);c=l;break;case"source":We("error",e),c=l;break;case"img":case"image":case"link":We("error",e),We("load",e),c=l;break;case"details":We("toggle",e),c=l;break;case"input":t1(e,l),c=za(e,l),We("invalid",e);break;case"option":c=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},c=et({},l,{value:void 0}),We("invalid",e);break;case"textarea":r1(e,l),c=Wa(e,l),We("invalid",e);break;default:c=l}Xa(i,c),y=c;for(f in y)if(y.hasOwnProperty(f)){var m=y[f];f==="style"?rf(e,m):f==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&tf(e,m)):f==="children"?typeof m=="string"?(i!=="textarea"||m!=="")&&Ts(e,m):typeof m=="number"&&Ts(e,""+m):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(_s.hasOwnProperty(f)?m!=null&&f==="onScroll"&&We("scroll",e):m!=null&&Fu(e,f,m,g))}switch(i){case"input":yo(e),n1(e,l,!1);break;case"textarea":yo(e),i1(e);break;case"option":l.value!=null&&e.setAttribute("value",""+Nr(l.value));break;case"select":e.multiple=!!l.multiple,f=l.value,f!=null?Ni(e,!!l.multiple,f,!1):l.defaultValue!=null&&Ni(e,!!l.multiple,l.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=tl)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Ot(n),null;case 6:if(e&&n.stateNode!=null)bd(e,n,e.memoizedProps,l);else{if(typeof l!="string"&&n.stateNode===null)throw Error($(166));if(i=Hr(Us.current),Hr(jn.current),_o(n)){if(l=n.stateNode,i=n.memoizedProps,l[Ln]=n,(f=l.nodeValue!==i)&&(e=tn,e!==null))switch(e.tag){case 3:bo(l.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bo(l.nodeValue,i,(e.mode&1)!==0)}f&&(n.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[Ln]=n,n.stateNode=l}return Ot(n),null;case 13:if(Ge(Je),l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ze&&en!==null&&n.mode&1&&!(n.flags&128))Gf(),Di(),n.flags|=98560,f=!1;else if(f=_o(n),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error($(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error($(317));f[Ln]=n}else Di(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Ot(n),f=!1}else An!==null&&(bu(An),An=null),f=!0;if(!f)return n.flags&65536?n:null}return n.flags&128?(n.lanes=i,n):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(n.child.flags|=8192,n.mode&1&&(e===null||Je.current&1?gt===0&&(gt=3):Ec())),n.updateQueue!==null&&(n.flags|=4),Ot(n),null);case 4:return Pi(),yu(e,n),e===null&&Bs(n.stateNode.containerInfo),Ot(n),null;case 10:return rc(n.type._context),Ot(n),null;case 17:return Qt(n.type)&&nl(),Ot(n),null;case 19:if(Ge(Je),f=n.memoizedState,f===null)return Ot(n),null;if(l=(n.flags&128)!==0,g=f.rendering,g===null)if(l)fs(f,!1);else{if(gt!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(g=ul(e),g!==null){for(n.flags|=128,fs(f,!1),l=g.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),n.subtreeFlags=0,l=i,i=n.child;i!==null;)f=i,e=l,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ve(Je,Je.current&1|2),n.child}e=e.sibling}f.tail!==null&&lt()>Li&&(n.flags|=128,l=!0,fs(f,!1),n.lanes=4194304)}else{if(!l)if(e=ul(g),e!==null){if(n.flags|=128,l=!0,i=e.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),fs(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Ze)return Ot(n),null}else 2*lt()-f.renderingStartTime>Li&&i!==1073741824&&(n.flags|=128,l=!0,fs(f,!1),n.lanes=4194304);f.isBackwards?(g.sibling=n.child,n.child=g):(i=f.last,i!==null?i.sibling=g:n.child=g,f.last=g)}return f.tail!==null?(n=f.tail,f.rendering=n,f.tail=n.sibling,f.renderingStartTime=lt(),n.sibling=null,i=Je.current,Ve(Je,l?i&1|2:i&1),n):(Ot(n),null);case 22:case 23:return yc(),l=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(n.flags|=8192),l&&n.mode&1?$t&1073741824&&(Ot(n),n.subtreeFlags&6&&(n.flags|=8192)):Ot(n),null;case 24:return null;case 25:return null}throw Error($(156,n.tag))}function r2(e,n){switch($u(n),n.tag){case 1:return Qt(n.type)&&nl(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Pi(),Ge(Zt),Ge(Dt),ac(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return lc(n),null;case 13:if(Ge(Je),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error($(340));Di()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ge(Je),null;case 4:return Pi(),null;case 10:return rc(n.type._context),null;case 22:case 23:return yc(),null;case 24:return null;default:return null}}var Oo=!1,Mt=!1,i2=typeof WeakSet=="function"?WeakSet:Set,ae=null;function vi(e,n){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){st(e,n,l)}else i.current=null}function Eu(e,n,i){try{i()}catch(l){st(e,n,l)}}var Y1=!1;function s2(e,n){if(ru=Jo,e=Mf(),qu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var c=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var g=0,y=-1,m=-1,p=0,C=0,v=e,I=null;t:for(;;){for(var O;v!==i||c!==0&&v.nodeType!==3||(y=g+c),v!==f||l!==0&&v.nodeType!==3||(m=g+l),v.nodeType===3&&(g+=v.nodeValue.length),(O=v.firstChild)!==null;)I=v,v=O;for(;;){if(v===e)break t;if(I===i&&++p===c&&(y=g),I===f&&++C===l&&(m=g),(O=v.nextSibling)!==null)break;v=I,I=v.parentNode}v=O}i=y===-1||m===-1?null:{start:y,end:m}}else i=null}i=i||{start:0,end:0}}else i=null;for(iu={focusedElem:e,selectionRange:i},Jo=!1,ae=n;ae!==null;)if(n=ae,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ae=e;else for(;ae!==null;){n=ae;try{var D=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var k=D.memoizedProps,F=D.memoizedState,M=n.stateNode,b=M.getSnapshotBeforeUpdate(n.elementType===n.type?k:Cn(n.type,k),F);M.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var T=n.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(j){st(n,n.return,j)}if(e=n.sibling,e!==null){e.return=n.return,ae=e;break}ae=n.return}return D=Y1,Y1=!1,D}function Ns(e,n,i){var l=n.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&e)===e){var f=c.destroy;c.destroy=void 0,f!==void 0&&Eu(n,i,f)}c=c.next}while(c!==l)}}function Rl(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var l=i.create;i.destroy=l()}i=i.next}while(i!==n)}}function Cu(e){var n=e.ref;if(n!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof n=="function"?n(e):n.current=e}}function _d(e){var n=e.alternate;n!==null&&(e.alternate=null,_d(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Ln],delete n[Fs],delete n[lu],delete n[zg],delete n[Vg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Td(e){return e.tag===5||e.tag===3||e.tag===4}function Z1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Td(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vu(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?i.nodeType===8?i.parentNode.insertBefore(e,n):i.insertBefore(e,n):(i.nodeType===8?(n=i.parentNode,n.insertBefore(e,i)):(n=i,n.appendChild(e)),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=tl));else if(l!==4&&(e=e.child,e!==null))for(vu(e,n,i),e=e.sibling;e!==null;)vu(e,n,i),e=e.sibling}function Au(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Au(e,n,i),e=e.sibling;e!==null;)Au(e,n,i),e=e.sibling}var Nt=null,vn=!1;function ur(e,n,i){for(i=i.child;i!==null;)Rd(e,n,i),i=i.sibling}function Rd(e,n,i){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(vl,i)}catch{}switch(i.tag){case 5:Mt||vi(i,n);case 6:var l=Nt,c=vn;Nt=null,ur(e,n,i),Nt=l,vn=c,Nt!==null&&(vn?(e=Nt,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Nt.removeChild(i.stateNode));break;case 18:Nt!==null&&(vn?(e=Nt,i=i.stateNode,e.nodeType===8?Aa(e.parentNode,i):e.nodeType===1&&Aa(e,i),Ds(e)):Aa(Nt,i.stateNode));break;case 4:l=Nt,c=vn,Nt=i.stateNode.containerInfo,vn=!0,ur(e,n,i),Nt=l,vn=c;break;case 0:case 11:case 14:case 15:if(!Mt&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){c=l=l.next;do{var f=c,g=f.destroy;f=f.tag,g!==void 0&&(f&2||f&4)&&Eu(i,n,g),c=c.next}while(c!==l)}ur(e,n,i);break;case 1:if(!Mt&&(vi(i,n),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(y){st(i,n,y)}ur(e,n,i);break;case 21:ur(e,n,i);break;case 22:i.mode&1?(Mt=(l=Mt)||i.memoizedState!==null,ur(e,n,i),Mt=l):ur(e,n,i);break;default:ur(e,n,i)}}function Q1(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new i2),n.forEach(function(l){var c=x2.bind(null,e,l);i.has(l)||(i.add(l),l.then(c,c))})}}function En(e,n){var i=n.deletions;if(i!==null)for(var l=0;l<i.length;l++){var c=i[l];try{var f=e,g=n,y=g;e:for(;y!==null;){switch(y.tag){case 5:Nt=y.stateNode,vn=!1;break e;case 3:Nt=y.stateNode.containerInfo,vn=!0;break e;case 4:Nt=y.stateNode.containerInfo,vn=!0;break e}y=y.return}if(Nt===null)throw Error($(160));Rd(f,g,c),Nt=null,vn=!1;var m=c.alternate;m!==null&&(m.return=null),c.return=null}catch(p){st(c,n,p)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Od(n,e),n=n.sibling}function Od(e,n){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(En(n,e),kn(e),l&4){try{Ns(3,e,e.return),Rl(3,e)}catch(k){st(e,e.return,k)}try{Ns(5,e,e.return)}catch(k){st(e,e.return,k)}}break;case 1:En(n,e),kn(e),l&512&&i!==null&&vi(i,i.return);break;case 5:if(En(n,e),kn(e),l&512&&i!==null&&vi(i,i.return),e.flags&32){var c=e.stateNode;try{Ts(c,"")}catch(k){st(e,e.return,k)}}if(l&4&&(c=e.stateNode,c!=null)){var f=e.memoizedProps,g=i!==null?i.memoizedProps:f,y=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{y==="input"&&f.type==="radio"&&f.name!=null&&J0(c,f),Ya(y,g);var p=Ya(y,f);for(g=0;g<m.length;g+=2){var C=m[g],v=m[g+1];C==="style"?rf(c,v):C==="dangerouslySetInnerHTML"?tf(c,v):C==="children"?Ts(c,v):Fu(c,C,v,p)}switch(y){case"input":Va(c,f);break;case"textarea":$0(c,f);break;case"select":var I=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!f.multiple;var O=f.value;O!=null?Ni(c,!!f.multiple,O,!1):I!==!!f.multiple&&(f.defaultValue!=null?Ni(c,!!f.multiple,f.defaultValue,!0):Ni(c,!!f.multiple,f.multiple?[]:"",!1))}c[Fs]=f}catch(k){st(e,e.return,k)}}break;case 6:if(En(n,e),kn(e),l&4){if(e.stateNode===null)throw Error($(162));c=e.stateNode,f=e.memoizedProps;try{c.nodeValue=f}catch(k){st(e,e.return,k)}}break;case 3:if(En(n,e),kn(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Ds(n.containerInfo)}catch(k){st(e,e.return,k)}break;case 4:En(n,e),kn(e);break;case 13:En(n,e),kn(e),c=e.child,c.flags&8192&&(f=c.memoizedState!==null,c.stateNode.isHidden=f,!f||c.alternate!==null&&c.alternate.memoizedState!==null||(mc=lt())),l&4&&Q1(e);break;case 22:if(C=i!==null&&i.memoizedState!==null,e.mode&1?(Mt=(p=Mt)||C,En(n,e),Mt=p):En(n,e),kn(e),l&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!C&&e.mode&1)for(ae=e,C=e.child;C!==null;){for(v=ae=C;ae!==null;){switch(I=ae,O=I.child,I.tag){case 0:case 11:case 14:case 15:Ns(4,I,I.return);break;case 1:vi(I,I.return);var D=I.stateNode;if(typeof D.componentWillUnmount=="function"){l=I,i=I.return;try{n=l,D.props=n.memoizedProps,D.state=n.memoizedState,D.componentWillUnmount()}catch(k){st(l,i,k)}}break;case 5:vi(I,I.return);break;case 22:if(I.memoizedState!==null){q1(v);continue}}O!==null?(O.return=I,ae=O):q1(v)}C=C.sibling}e:for(C=null,v=e;;){if(v.tag===5){if(C===null){C=v;try{c=v.stateNode,p?(f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(y=v.stateNode,m=v.memoizedProps.style,g=m!=null&&m.hasOwnProperty("display")?m.display:null,y.style.display=nf("display",g))}catch(k){st(e,e.return,k)}}}else if(v.tag===6){if(C===null)try{v.stateNode.nodeValue=p?"":v.memoizedProps}catch(k){st(e,e.return,k)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;C===v&&(C=null),v=v.return}C===v&&(C=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:En(n,e),kn(e),l&4&&Q1(e);break;case 21:break;default:En(n,e),kn(e)}}function kn(e){var n=e.flags;if(n&2){try{e:{for(var i=e.return;i!==null;){if(Td(i)){var l=i;break e}i=i.return}throw Error($(160))}switch(l.tag){case 5:var c=l.stateNode;l.flags&32&&(Ts(c,""),l.flags&=-33);var f=Z1(e);Au(e,f,c);break;case 3:case 4:var g=l.stateNode.containerInfo,y=Z1(e);vu(e,y,g);break;default:throw Error($(161))}}catch(m){st(e,e.return,m)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function o2(e,n,i){ae=e,Md(e)}function Md(e,n,i){for(var l=(e.mode&1)!==0;ae!==null;){var c=ae,f=c.child;if(c.tag===22&&l){var g=c.memoizedState!==null||Oo;if(!g){var y=c.alternate,m=y!==null&&y.memoizedState!==null||Mt;y=Oo;var p=Mt;if(Oo=g,(Mt=m)&&!p)for(ae=c;ae!==null;)g=ae,m=g.child,g.tag===22&&g.memoizedState!==null?J1(c):m!==null?(m.return=g,ae=m):J1(c);for(;f!==null;)ae=f,Md(f),f=f.sibling;ae=c,Oo=y,Mt=p}K1(e)}else c.subtreeFlags&8772&&f!==null?(f.return=c,ae=f):K1(e)}}function K1(e){for(;ae!==null;){var n=ae;if(n.flags&8772){var i=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Mt||Rl(5,n);break;case 1:var l=n.stateNode;if(n.flags&4&&!Mt)if(i===null)l.componentDidMount();else{var c=n.elementType===n.type?i.memoizedProps:Cn(n.type,i.memoizedProps);l.componentDidUpdate(c,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var f=n.updateQueue;f!==null&&k1(n,f,l);break;case 3:var g=n.updateQueue;if(g!==null){if(i=null,n.child!==null)switch(n.child.tag){case 5:i=n.child.stateNode;break;case 1:i=n.child.stateNode}k1(n,g,i)}break;case 5:var y=n.stateNode;if(i===null&&n.flags&4){i=y;var m=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&i.focus();break;case"img":m.src&&(i.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var p=n.alternate;if(p!==null){var C=p.memoizedState;if(C!==null){var v=C.dehydrated;v!==null&&Ds(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Mt||n.flags&512&&Cu(n)}catch(I){st(n,n.return,I)}}if(n===e){ae=null;break}if(i=n.sibling,i!==null){i.return=n.return,ae=i;break}ae=n.return}}function q1(e){for(;ae!==null;){var n=ae;if(n===e){ae=null;break}var i=n.sibling;if(i!==null){i.return=n.return,ae=i;break}ae=n.return}}function J1(e){for(;ae!==null;){var n=ae;try{switch(n.tag){case 0:case 11:case 15:var i=n.return;try{Rl(4,n)}catch(m){st(n,i,m)}break;case 1:var l=n.stateNode;if(typeof l.componentDidMount=="function"){var c=n.return;try{l.componentDidMount()}catch(m){st(n,c,m)}}var f=n.return;try{Cu(n)}catch(m){st(n,f,m)}break;case 5:var g=n.return;try{Cu(n)}catch(m){st(n,g,m)}}}catch(m){st(n,n.return,m)}if(n===e){ae=null;break}var y=n.sibling;if(y!==null){y.return=n.return,ae=y;break}ae=n.return}}var l2=Math.ceil,dl=$n.ReactCurrentDispatcher,gc=$n.ReactCurrentOwner,xn=$n.ReactCurrentBatchConfig,Re=0,Et=null,ut=null,It=0,$t=0,Ai=_r(0),gt=0,Ws=null,Kr=0,Ol=0,pc=0,Is=null,Xt=null,mc=0,Li=1/0,Hn=null,hl=!1,Su=null,vr=null,Mo=!1,gr=null,xl=0,bs=0,Nu=null,Wo=-1,Go=0;function Lt(){return Re&6?lt():Wo!==-1?Wo:Wo=lt()}function Ar(e){return e.mode&1?Re&2&&It!==0?It&-It:Wg.transition!==null?(Go===0&&(Go=pf()),Go):(e=Pe,e!==0||(e=window.event,e=e===void 0?16:Af(e.type)),e):1}function Nn(e,n,i,l){if(50<bs)throw bs=0,Nu=null,Error($(185));Ks(e,i,l),(!(Re&2)||e!==Et)&&(e===Et&&(!(Re&2)&&(Ol|=i),gt===4&&hr(e,It)),Kt(e,l),i===1&&Re===0&&!(n.mode&1)&&(Li=lt()+500,bl&&Tr()))}function Kt(e,n){var i=e.callbackNode;Wx(e,n);var l=qo(e,e===Et?It:0);if(l===0)i!==null&&l1(i),e.callbackNode=null,e.callbackPriority=0;else if(n=l&-l,e.callbackPriority!==n){if(i!=null&&l1(i),n===1)e.tag===0?Hg($1.bind(null,e)):Vf($1.bind(null,e)),jg(function(){!(Re&6)&&Tr()}),i=null;else{switch(mf(l)){case 1:i=Hu;break;case 4:i=xf;break;case 16:i=Ko;break;case 536870912:i=gf;break;default:i=Ko}i=Ud(i,Dd.bind(null,e))}e.callbackPriority=n,e.callbackNode=i}}function Dd(e,n){if(Wo=-1,Go=0,Re&6)throw Error($(327));var i=e.callbackNode;if(Ri()&&e.callbackNode!==i)return null;var l=qo(e,e===Et?It:0);if(l===0)return null;if(l&30||l&e.expiredLanes||n)n=gl(e,l);else{n=l;var c=Re;Re|=2;var f=Pd();(Et!==e||It!==n)&&(Hn=null,Li=lt()+500,Wr(e,n));do try{c2();break}catch(y){kd(e,y)}while(!0);nc(),dl.current=f,Re=c,ut!==null?n=0:(Et=null,It=0,n=gt)}if(n!==0){if(n===2&&(c=Ja(e),c!==0&&(l=c,n=Iu(e,c))),n===1)throw i=Ws,Wr(e,0),hr(e,l),Kt(e,lt()),i;if(n===6)hr(e,l);else{if(c=e.current.alternate,!(l&30)&&!a2(c)&&(n=gl(e,l),n===2&&(f=Ja(e),f!==0&&(l=f,n=Iu(e,f))),n===1))throw i=Ws,Wr(e,0),hr(e,l),Kt(e,lt()),i;switch(e.finishedWork=c,e.finishedLanes=l,n){case 0:case 1:throw Error($(345));case 2:Ur(e,Xt,Hn);break;case 3:if(hr(e,l),(l&130023424)===l&&(n=mc+500-lt(),10<n)){if(qo(e,0)!==0)break;if(c=e.suspendedLanes,(c&l)!==l){Lt(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=ou(Ur.bind(null,e,Xt,Hn),n);break}Ur(e,Xt,Hn);break;case 4:if(hr(e,l),(l&4194240)===l)break;for(n=e.eventTimes,c=-1;0<l;){var g=31-Sn(l);f=1<<g,g=n[g],g>c&&(c=g),l&=~f}if(l=c,l=lt()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*l2(l/1960))-l,10<l){e.timeoutHandle=ou(Ur.bind(null,e,Xt,Hn),l);break}Ur(e,Xt,Hn);break;case 5:Ur(e,Xt,Hn);break;default:throw Error($(329))}}}return Kt(e,lt()),e.callbackNode===i?Dd.bind(null,e):null}function Iu(e,n){var i=Is;return e.current.memoizedState.isDehydrated&&(Wr(e,n).flags|=256),e=gl(e,n),e!==2&&(n=Xt,Xt=i,n!==null&&bu(n)),e}function bu(e){Xt===null?Xt=e:Xt.push.apply(Xt,e)}function a2(e){for(var n=e;;){if(n.flags&16384){var i=n.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var c=i[l],f=c.getSnapshot;c=c.value;try{if(!In(f(),c))return!1}catch{return!1}}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function hr(e,n){for(n&=~pc,n&=~Ol,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var i=31-Sn(n),l=1<<i;e[i]=-1,n&=~l}}function $1(e){if(Re&6)throw Error($(327));Ri();var n=qo(e,0);if(!(n&1))return Kt(e,lt()),null;var i=gl(e,n);if(e.tag!==0&&i===2){var l=Ja(e);l!==0&&(n=l,i=Iu(e,l))}if(i===1)throw i=Ws,Wr(e,0),hr(e,n),Kt(e,lt()),i;if(i===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Ur(e,Xt,Hn),Kt(e,lt()),null}function wc(e,n){var i=Re;Re|=1;try{return e(n)}finally{Re=i,Re===0&&(Li=lt()+500,bl&&Tr())}}function qr(e){gr!==null&&gr.tag===0&&!(Re&6)&&Ri();var n=Re;Re|=1;var i=xn.transition,l=Pe;try{if(xn.transition=null,Pe=1,e)return e()}finally{Pe=l,xn.transition=i,Re=n,!(Re&6)&&Tr()}}function yc(){$t=Ai.current,Ge(Ai)}function Wr(e,n){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Fg(i)),ut!==null)for(i=ut.return;i!==null;){var l=i;switch($u(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&nl();break;case 3:Pi(),Ge(Zt),Ge(Dt),ac();break;case 5:lc(l);break;case 4:Pi();break;case 13:Ge(Je);break;case 19:Ge(Je);break;case 10:rc(l.type._context);break;case 22:case 23:yc()}i=i.return}if(Et=e,ut=e=Sr(e.current,null),It=$t=n,gt=0,Ws=null,pc=Ol=Kr=0,Xt=Is=null,Vr!==null){for(n=0;n<Vr.length;n++)if(i=Vr[n],l=i.interleaved,l!==null){i.interleaved=null;var c=l.next,f=i.pending;if(f!==null){var g=f.next;f.next=c,l.next=g}i.pending=l}Vr=null}return e}function kd(e,n){do{var i=ut;try{if(nc(),zo.current=fl,cl){for(var l=$e.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}cl=!1}if(Qr=0,yt=xt=$e=null,Ss=!1,zs=0,gc.current=null,i===null||i.return===null){gt=1,Ws=n,ut=null;break}e:{var f=e,g=i.return,y=i,m=n;if(n=It,y.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var p=m,C=y,v=C.tag;if(!(C.mode&1)&&(v===0||v===11||v===15)){var I=C.alternate;I?(C.updateQueue=I.updateQueue,C.memoizedState=I.memoizedState,C.lanes=I.lanes):(C.updateQueue=null,C.memoizedState=null)}var O=U1(g);if(O!==null){O.flags&=-257,z1(O,g,y,f,n),O.mode&1&&j1(f,p,n),n=O,m=p;var D=n.updateQueue;if(D===null){var k=new Set;k.add(m),n.updateQueue=k}else D.add(m);break e}else{if(!(n&1)){j1(f,p,n),Ec();break e}m=Error($(426))}}else if(Ze&&y.mode&1){var F=U1(g);if(F!==null){!(F.flags&65536)&&(F.flags|=256),z1(F,g,y,f,n),ec(Bi(m,y));break e}}f=m=Bi(m,y),gt!==4&&(gt=2),Is===null?Is=[f]:Is.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,n&=-n,f.lanes|=n;var M=md(f,m,n);D1(f,M);break e;case 1:y=m;var b=f.type,T=f.stateNode;if(!(f.flags&128)&&(typeof b.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(vr===null||!vr.has(T)))){f.flags|=65536,n&=-n,f.lanes|=n;var j=wd(f,y,n);D1(f,j);break e}}f=f.return}while(f!==null)}Ld(i)}catch(q){n=q,ut===i&&i!==null&&(ut=i=i.return);continue}break}while(!0)}function Pd(){var e=dl.current;return dl.current=fl,e===null?fl:e}function Ec(){(gt===0||gt===3||gt===2)&&(gt=4),Et===null||!(Kr&268435455)&&!(Ol&268435455)||hr(Et,It)}function gl(e,n){var i=Re;Re|=2;var l=Pd();(Et!==e||It!==n)&&(Hn=null,Wr(e,n));do try{u2();break}catch(c){kd(e,c)}while(!0);if(nc(),Re=i,dl.current=l,ut!==null)throw Error($(261));return Et=null,It=0,gt}function u2(){for(;ut!==null;)Bd(ut)}function c2(){for(;ut!==null&&!Px();)Bd(ut)}function Bd(e){var n=jd(e.alternate,e,$t);e.memoizedProps=e.pendingProps,n===null?Ld(e):ut=n,gc.current=null}function Ld(e){var n=e;do{var i=n.alternate;if(e=n.return,n.flags&32768){if(i=r2(i,n),i!==null){i.flags&=32767,ut=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{gt=6,ut=null;return}}else if(i=n2(i,n,$t),i!==null){ut=i;return}if(n=n.sibling,n!==null){ut=n;return}ut=n=e}while(n!==null);gt===0&&(gt=5)}function Ur(e,n,i){var l=Pe,c=xn.transition;try{xn.transition=null,Pe=1,f2(e,n,i,l)}finally{xn.transition=c,Pe=l}return null}function f2(e,n,i,l){do Ri();while(gr!==null);if(Re&6)throw Error($(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var f=i.lanes|i.childLanes;if(Gx(e,f),e===Et&&(ut=Et=null,It=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Mo||(Mo=!0,Ud(Ko,function(){return Ri(),null})),f=(i.flags&15990)!==0,i.subtreeFlags&15990||f){f=xn.transition,xn.transition=null;var g=Pe;Pe=1;var y=Re;Re|=4,gc.current=null,s2(e,i),Od(i,e),Og(iu),Jo=!!ru,iu=ru=null,e.current=i,o2(i),Bx(),Re=y,Pe=g,xn.transition=f}else e.current=i;if(Mo&&(Mo=!1,gr=e,xl=c),f=e.pendingLanes,f===0&&(vr=null),jx(i.stateNode),Kt(e,lt()),n!==null)for(l=e.onRecoverableError,i=0;i<n.length;i++)c=n[i],l(c.value,{componentStack:c.stack,digest:c.digest});if(hl)throw hl=!1,e=Su,Su=null,e;return xl&1&&e.tag!==0&&Ri(),f=e.pendingLanes,f&1?e===Nu?bs++:(bs=0,Nu=e):bs=0,Tr(),null}function Ri(){if(gr!==null){var e=mf(xl),n=xn.transition,i=Pe;try{if(xn.transition=null,Pe=16>e?16:e,gr===null)var l=!1;else{if(e=gr,gr=null,xl=0,Re&6)throw Error($(331));var c=Re;for(Re|=4,ae=e.current;ae!==null;){var f=ae,g=f.child;if(ae.flags&16){var y=f.deletions;if(y!==null){for(var m=0;m<y.length;m++){var p=y[m];for(ae=p;ae!==null;){var C=ae;switch(C.tag){case 0:case 11:case 15:Ns(8,C,f)}var v=C.child;if(v!==null)v.return=C,ae=v;else for(;ae!==null;){C=ae;var I=C.sibling,O=C.return;if(_d(C),C===p){ae=null;break}if(I!==null){I.return=O,ae=I;break}ae=O}}}var D=f.alternate;if(D!==null){var k=D.child;if(k!==null){D.child=null;do{var F=k.sibling;k.sibling=null,k=F}while(k!==null)}}ae=f}}if(f.subtreeFlags&2064&&g!==null)g.return=f,ae=g;else e:for(;ae!==null;){if(f=ae,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Ns(9,f,f.return)}var M=f.sibling;if(M!==null){M.return=f.return,ae=M;break e}ae=f.return}}var b=e.current;for(ae=b;ae!==null;){g=ae;var T=g.child;if(g.subtreeFlags&2064&&T!==null)T.return=g,ae=T;else e:for(g=b;ae!==null;){if(y=ae,y.flags&2048)try{switch(y.tag){case 0:case 11:case 15:Rl(9,y)}}catch(q){st(y,y.return,q)}if(y===g){ae=null;break e}var j=y.sibling;if(j!==null){j.return=y.return,ae=j;break e}ae=y.return}}if(Re=c,Tr(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(vl,e)}catch{}l=!0}return l}finally{Pe=i,xn.transition=n}}return!1}function e0(e,n,i){n=Bi(i,n),n=md(e,n,1),e=Cr(e,n,1),n=Lt(),e!==null&&(Ks(e,1,n),Kt(e,n))}function st(e,n,i){if(e.tag===3)e0(e,e,i);else for(;n!==null;){if(n.tag===3){e0(n,e,i);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(vr===null||!vr.has(l))){e=Bi(i,e),e=wd(n,e,1),n=Cr(n,e,1),e=Lt(),n!==null&&(Ks(n,1,e),Kt(n,e));break}}n=n.return}}function d2(e,n,i){var l=e.pingCache;l!==null&&l.delete(n),n=Lt(),e.pingedLanes|=e.suspendedLanes&i,Et===e&&(It&i)===i&&(gt===4||gt===3&&(It&130023424)===It&&500>lt()-mc?Wr(e,0):pc|=i),Kt(e,n)}function Fd(e,n){n===0&&(e.mode&1?(n=vo,vo<<=1,!(vo&130023424)&&(vo=4194304)):n=1);var i=Lt();e=qn(e,n),e!==null&&(Ks(e,n,i),Kt(e,i))}function h2(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),Fd(e,i)}function x2(e,n){var i=0;switch(e.tag){case 13:var l=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:l=e.stateNode;break;default:throw Error($(314))}l!==null&&l.delete(n),Fd(e,i)}var jd;jd=function(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps||Zt.current)Yt=!0;else{if(!(e.lanes&i)&&!(n.flags&128))return Yt=!1,t2(e,n,i);Yt=!!(e.flags&131072)}else Yt=!1,Ze&&n.flags&1048576&&Hf(n,sl,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;Ho(e,n),e=n.pendingProps;var c=Mi(n,Dt.current);Ti(n,i),c=cc(null,n,l,e,c,i);var f=fc();return n.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Qt(l)?(f=!0,rl(n)):f=!1,n.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,sc(n),c.updater=Tl,n.stateNode=c,c._reactInternals=n,hu(n,l,e,i),n=pu(null,n,l,!0,f,i)):(n.tag=0,Ze&&f&&Ju(n),Bt(null,n,c,i),n=n.child),n;case 16:l=n.elementType;e:{switch(Ho(e,n),e=n.pendingProps,c=l._init,l=c(l._payload),n.type=l,c=n.tag=p2(l),e=Cn(l,e),c){case 0:n=gu(null,n,l,e,i);break e;case 1:n=W1(null,n,l,e,i);break e;case 11:n=V1(null,n,l,e,i);break e;case 14:n=H1(null,n,l,Cn(l.type,e),i);break e}throw Error($(306,l,""))}return n;case 0:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Cn(l,c),gu(e,n,l,c,i);case 1:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Cn(l,c),W1(e,n,l,c,i);case 3:e:{if(vd(n),e===null)throw Error($(387));l=n.pendingProps,f=n.memoizedState,c=f.element,Qf(e,n),al(n,l,null,i);var g=n.memoizedState;if(l=g.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){c=Bi(Error($(423)),n),n=G1(e,n,l,i,c);break e}else if(l!==c){c=Bi(Error($(424)),n),n=G1(e,n,l,i,c);break e}else for(en=Er(n.stateNode.containerInfo.firstChild),tn=n,Ze=!0,An=null,i=Yf(n,null,l,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Di(),l===c){n=Jn(e,n,i);break e}Bt(e,n,l,i)}n=n.child}return n;case 5:return Kf(n),e===null&&cu(n),l=n.type,c=n.pendingProps,f=e!==null?e.memoizedProps:null,g=c.children,su(l,c)?g=null:f!==null&&su(l,f)&&(n.flags|=32),Cd(e,n),Bt(e,n,g,i),n.child;case 6:return e===null&&cu(n),null;case 13:return Ad(e,n,i);case 4:return oc(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=ki(n,null,l,i):Bt(e,n,l,i),n.child;case 11:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Cn(l,c),V1(e,n,l,c,i);case 7:return Bt(e,n,n.pendingProps,i),n.child;case 8:return Bt(e,n,n.pendingProps.children,i),n.child;case 12:return Bt(e,n,n.pendingProps.children,i),n.child;case 10:e:{if(l=n.type._context,c=n.pendingProps,f=n.memoizedProps,g=c.value,Ve(ol,l._currentValue),l._currentValue=g,f!==null)if(In(f.value,g)){if(f.children===c.children&&!Zt.current){n=Jn(e,n,i);break e}}else for(f=n.child,f!==null&&(f.return=n);f!==null;){var y=f.dependencies;if(y!==null){g=f.child;for(var m=y.firstContext;m!==null;){if(m.context===l){if(f.tag===1){m=Zn(-1,i&-i),m.tag=2;var p=f.updateQueue;if(p!==null){p=p.shared;var C=p.pending;C===null?m.next=m:(m.next=C.next,C.next=m),p.pending=m}}f.lanes|=i,m=f.alternate,m!==null&&(m.lanes|=i),fu(f.return,i,n),y.lanes|=i;break}m=m.next}}else if(f.tag===10)g=f.type===n.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error($(341));g.lanes|=i,y=g.alternate,y!==null&&(y.lanes|=i),fu(g,i,n),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===n){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}Bt(e,n,c.children,i),n=n.child}return n;case 9:return c=n.type,l=n.pendingProps.children,Ti(n,i),c=gn(c),l=l(c),n.flags|=1,Bt(e,n,l,i),n.child;case 14:return l=n.type,c=Cn(l,n.pendingProps),c=Cn(l.type,c),H1(e,n,l,c,i);case 15:return yd(e,n,n.type,n.pendingProps,i);case 17:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Cn(l,c),Ho(e,n),n.tag=1,Qt(l)?(e=!0,rl(n)):e=!1,Ti(n,i),pd(n,l,c),hu(n,l,c,i),pu(null,n,l,!0,e,i);case 19:return Sd(e,n,i);case 22:return Ed(e,n,i)}throw Error($(156,n.tag))};function Ud(e,n){return hf(e,n)}function g2(e,n,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(e,n,i,l){return new g2(e,n,i,l)}function Cc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function p2(e){if(typeof e=="function")return Cc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Uu)return 11;if(e===zu)return 14}return 2}function Sr(e,n){var i=e.alternate;return i===null?(i=hn(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Xo(e,n,i,l,c,f){var g=2;if(l=e,typeof e=="function")Cc(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case hi:return Gr(i.children,c,f,n);case ju:g=8,c|=8;break;case La:return e=hn(12,i,n,c|2),e.elementType=La,e.lanes=f,e;case Fa:return e=hn(13,i,n,c),e.elementType=Fa,e.lanes=f,e;case ja:return e=hn(19,i,n,c),e.elementType=ja,e.lanes=f,e;case Q0:return Ml(i,c,f,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Y0:g=10;break e;case Z0:g=9;break e;case Uu:g=11;break e;case zu:g=14;break e;case cr:g=16,l=null;break e}throw Error($(130,e==null?e:typeof e,""))}return n=hn(g,i,n,c),n.elementType=e,n.type=l,n.lanes=f,n}function Gr(e,n,i,l){return e=hn(7,e,l,n),e.lanes=i,e}function Ml(e,n,i,l){return e=hn(22,e,l,n),e.elementType=Q0,e.lanes=i,e.stateNode={isHidden:!1},e}function Oa(e,n,i){return e=hn(6,e,null,n),e.lanes=i,e}function Ma(e,n,i){return n=hn(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function m2(e,n,i,l,c){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=da(0),this.expirationTimes=da(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=da(0),this.identifierPrefix=l,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function vc(e,n,i,l,c,f,g,y,m){return e=new m2(e,n,i,y,m),n===1?(n=1,f===!0&&(n|=8)):n=0,f=hn(3,null,null,n),e.current=f,f.stateNode=e,f.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},sc(f),e}function w2(e,n,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:di,key:l==null?null:""+l,children:e,containerInfo:n,implementation:i}}function zd(e){if(!e)return Ir;e=e._reactInternals;e:{if(ei(e)!==e||e.tag!==1)throw Error($(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Qt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error($(171))}if(e.tag===1){var i=e.type;if(Qt(i))return zf(e,i,n)}return n}function Vd(e,n,i,l,c,f,g,y,m){return e=vc(i,l,!0,e,c,f,g,y,m),e.context=zd(null),i=e.current,l=Lt(),c=Ar(i),f=Zn(l,c),f.callback=n??null,Cr(i,f,c),e.current.lanes=c,Ks(e,c,l),Kt(e,l),e}function Dl(e,n,i,l){var c=n.current,f=Lt(),g=Ar(c);return i=zd(i),n.context===null?n.context=i:n.pendingContext=i,n=Zn(f,g),n.payload={element:e},l=l===void 0?null:l,l!==null&&(n.callback=l),e=Cr(c,n,g),e!==null&&(Nn(e,c,g,f),Uo(e,c,g)),g}function pl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function t0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function Ac(e,n){t0(e,n),(e=e.alternate)&&t0(e,n)}function y2(){return null}var Hd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Sc(e){this._internalRoot=e}kl.prototype.render=Sc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error($(409));Dl(e,n,null,null)};kl.prototype.unmount=Sc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;qr(function(){Dl(null,e,null,null)}),n[Kn]=null}};function kl(e){this._internalRoot=e}kl.prototype.unstable_scheduleHydration=function(e){if(e){var n=Ef();e={blockedOn:null,target:e,priority:n};for(var i=0;i<dr.length&&n!==0&&n<dr[i].priority;i++);dr.splice(i,0,e),i===0&&vf(e)}};function Nc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function n0(){}function E2(e,n,i,l,c){if(c){if(typeof l=="function"){var f=l;l=function(){var p=pl(g);f.call(p)}}var g=Vd(n,l,e,0,null,!1,!1,"",n0);return e._reactRootContainer=g,e[Kn]=g.current,Bs(e.nodeType===8?e.parentNode:e),qr(),g}for(;c=e.lastChild;)e.removeChild(c);if(typeof l=="function"){var y=l;l=function(){var p=pl(m);y.call(p)}}var m=vc(e,0,!1,null,null,!1,!1,"",n0);return e._reactRootContainer=m,e[Kn]=m.current,Bs(e.nodeType===8?e.parentNode:e),qr(function(){Dl(n,m,i,l)}),m}function Bl(e,n,i,l,c){var f=i._reactRootContainer;if(f){var g=f;if(typeof c=="function"){var y=c;c=function(){var m=pl(g);y.call(m)}}Dl(n,g,e,c)}else g=E2(i,n,e,c,l);return pl(g)}wf=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var i=gs(n.pendingLanes);i!==0&&(Wu(n,i|1),Kt(n,lt()),!(Re&6)&&(Li=lt()+500,Tr()))}break;case 13:qr(function(){var l=qn(e,1);if(l!==null){var c=Lt();Nn(l,e,1,c)}}),Ac(e,1)}};Gu=function(e){if(e.tag===13){var n=qn(e,134217728);if(n!==null){var i=Lt();Nn(n,e,134217728,i)}Ac(e,134217728)}};yf=function(e){if(e.tag===13){var n=Ar(e),i=qn(e,n);if(i!==null){var l=Lt();Nn(i,e,n,l)}Ac(e,n)}};Ef=function(){return Pe};Cf=function(e,n){var i=Pe;try{return Pe=e,n()}finally{Pe=i}};Qa=function(e,n,i){switch(n){case"input":if(Va(e,i),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<i.length;n++){var l=i[n];if(l!==e&&l.form===e.form){var c=Il(l);if(!c)throw Error($(90));q0(l),Va(l,c)}}}break;case"textarea":$0(e,i);break;case"select":n=i.value,n!=null&&Ni(e,!!i.multiple,n,!1)}};lf=wc;af=qr;var C2={usingClientEntryPoint:!1,Events:[Js,mi,Il,sf,of,wc]},ds={findFiberByHostInstance:zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},v2={bundleType:ds.bundleType,version:ds.version,rendererPackageName:ds.rendererPackageName,rendererConfig:ds.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ff(e),e===null?null:e.stateNode},findFiberByHostInstance:ds.findFiberByHostInstance||y2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Do=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Do.isDisabled&&Do.supportsFiber)try{vl=Do.inject(v2),Fn=Do}catch{}}rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C2;rn.createPortal=function(e,n){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nc(n))throw Error($(200));return w2(e,n,null,i)};rn.createRoot=function(e,n){if(!Nc(e))throw Error($(299));var i=!1,l="",c=Hd;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),n=vc(e,1,!1,null,null,i,!1,l,c),e[Kn]=n.current,Bs(e.nodeType===8?e.parentNode:e),new Sc(n)};rn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=ff(n),e=e===null?null:e.stateNode,e};rn.flushSync=function(e){return qr(e)};rn.hydrate=function(e,n,i){if(!Pl(n))throw Error($(200));return Bl(null,e,n,!0,i)};rn.hydrateRoot=function(e,n,i){if(!Nc(e))throw Error($(405));var l=i!=null&&i.hydratedSources||null,c=!1,f="",g=Hd;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),n=Vd(n,null,e,1,i??null,c,!1,f,g),e[Kn]=n.current,Bs(e),l)for(e=0;e<l.length;e++)i=l[e],c=i._getVersion,c=c(i._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[i,c]:n.mutableSourceEagerHydrationData.push(i,c);return new kl(n)};rn.render=function(e,n,i){if(!Pl(n))throw Error($(200));return Bl(null,e,n,!1,i)};rn.unmountComponentAtNode=function(e){if(!Pl(e))throw Error($(40));return e._reactRootContainer?(qr(function(){Bl(null,null,e,!1,function(){e._reactRootContainer=null,e[Kn]=null})}),!0):!1};rn.unstable_batchedUpdates=wc;rn.unstable_renderSubtreeIntoContainer=function(e,n,i,l){if(!Pl(i))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return Bl(e,n,i,!1,l)};rn.version="18.3.1-next-f1338f8080-20240426";function Wd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wd)}catch(e){console.error(e)}}Wd(),H0.exports=rn;var A2=H0.exports,r0=A2;Pa.createRoot=r0.createRoot,Pa.hydrateRoot=r0.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gs(){return Gs=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Gs.apply(this,arguments)}var pr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(pr||(pr={}));const i0="popstate";function S2(e){e===void 0&&(e={});function n(l,c){let{pathname:f,search:g,hash:y}=l.location;return _u("",{pathname:f,search:g,hash:y},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function i(l,c){return typeof c=="string"?c:Gd(c)}return I2(n,i,null,e)}function ct(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function Ic(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function N2(){return Math.random().toString(36).substr(2,8)}function s0(e,n){return{usr:e.state,key:e.key,idx:n}}function _u(e,n,i,l){return i===void 0&&(i=null),Gs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof n=="string"?Vi(n):n,{state:i,key:n&&n.key||l||N2()})}function Gd(e){let{pathname:n="/",search:i="",hash:l=""}=e;return i&&i!=="?"&&(n+=i.charAt(0)==="?"?i:"?"+i),l&&l!=="#"&&(n+=l.charAt(0)==="#"?l:"#"+l),n}function Vi(e){let n={};if(e){let i=e.indexOf("#");i>=0&&(n.hash=e.substr(i),e=e.substr(0,i));let l=e.indexOf("?");l>=0&&(n.search=e.substr(l),e=e.substr(0,l)),e&&(n.pathname=e)}return n}function I2(e,n,i,l){l===void 0&&(l={});let{window:c=document.defaultView,v5Compat:f=!1}=l,g=c.history,y=pr.Pop,m=null,p=C();p==null&&(p=0,g.replaceState(Gs({},g.state,{idx:p}),""));function C(){return(g.state||{idx:null}).idx}function v(){y=pr.Pop;let F=C(),M=F==null?null:F-p;p=F,m&&m({action:y,location:k.location,delta:M})}function I(F,M){y=pr.Push;let b=_u(k.location,F,M);p=C()+1;let T=s0(b,p),j=k.createHref(b);try{g.pushState(T,"",j)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;c.location.assign(j)}f&&m&&m({action:y,location:k.location,delta:1})}function O(F,M){y=pr.Replace;let b=_u(k.location,F,M);p=C();let T=s0(b,p),j=k.createHref(b);g.replaceState(T,"",j),f&&m&&m({action:y,location:k.location,delta:0})}function D(F){let M=c.location.origin!=="null"?c.location.origin:c.location.href,b=typeof F=="string"?F:Gd(F);return b=b.replace(/ $/,"%20"),ct(M,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,M)}let k={get action(){return y},get location(){return e(c,g)},listen(F){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(i0,v),m=F,()=>{c.removeEventListener(i0,v),m=null}},createHref(F){return n(c,F)},createURL:D,encodeLocation(F){let M=D(F);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:I,replace:O,go(F){return g.go(F)}};return k}var o0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(o0||(o0={}));function b2(e,n,i){return i===void 0&&(i="/"),_2(e,n,i)}function _2(e,n,i,l){let c=typeof n=="string"?Vi(n):n,f=Zd(c.pathname||"/",i);if(f==null)return null;let g=Xd(e);T2(g);let y=null;for(let m=0;y==null&&m<g.length;++m){let p=z2(f);y=F2(g[m],p)}return y}function Xd(e,n,i,l){n===void 0&&(n=[]),i===void 0&&(i=[]),l===void 0&&(l="");let c=(f,g,y)=>{let m={relativePath:y===void 0?f.path||"":y,caseSensitive:f.caseSensitive===!0,childrenIndex:g,route:f};m.relativePath.startsWith("/")&&(ct(m.relativePath.startsWith(l),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+l+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(l.length));let p=Xr([l,m.relativePath]),C=i.concat(m);f.children&&f.children.length>0&&(ct(f.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),Xd(f.children,n,C,p)),!(f.path==null&&!f.index)&&n.push({path:p,score:B2(p,f.index),routesMeta:C})};return e.forEach((f,g)=>{var y;if(f.path===""||!((y=f.path)!=null&&y.includes("?")))c(f,g);else for(let m of Yd(f.path))c(f,g,m)}),n}function Yd(e){let n=e.split("/");if(n.length===0)return[];let[i,...l]=n,c=i.endsWith("?"),f=i.replace(/\?$/,"");if(l.length===0)return c?[f,""]:[f];let g=Yd(l.join("/")),y=[];return y.push(...g.map(m=>m===""?f:[f,m].join("/"))),c&&y.push(...g),y.map(m=>e.startsWith("/")&&m===""?"/":m)}function T2(e){e.sort((n,i)=>n.score!==i.score?i.score-n.score:L2(n.routesMeta.map(l=>l.childrenIndex),i.routesMeta.map(l=>l.childrenIndex)))}const R2=/^:[\w-]+$/,O2=3,M2=2,D2=1,k2=10,P2=-2,l0=e=>e==="*";function B2(e,n){let i=e.split("/"),l=i.length;return i.some(l0)&&(l+=P2),n&&(l+=M2),i.filter(c=>!l0(c)).reduce((c,f)=>c+(R2.test(f)?O2:f===""?D2:k2),l)}function L2(e,n){return e.length===n.length&&e.slice(0,-1).every((l,c)=>l===n[c])?e[e.length-1]-n[n.length-1]:0}function F2(e,n,i){let{routesMeta:l}=e,c={},f="/",g=[];for(let y=0;y<l.length;++y){let m=l[y],p=y===l.length-1,C=f==="/"?n:n.slice(f.length)||"/",v=j2({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},C),I=m.route;if(!v)return null;Object.assign(c,v.params),g.push({params:c,pathname:Xr([f,v.pathname]),pathnameBase:X2(Xr([f,v.pathnameBase])),route:I}),v.pathnameBase!=="/"&&(f=Xr([f,v.pathnameBase]))}return g}function j2(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,l]=U2(e.path,e.caseSensitive,e.end),c=n.match(i);if(!c)return null;let f=c[0],g=f.replace(/(.)\/+$/,"$1"),y=c.slice(1);return{params:l.reduce((p,C,v)=>{let{paramName:I,isOptional:O}=C;if(I==="*"){let k=y[v]||"";g=f.slice(0,f.length-k.length).replace(/(.)\/+$/,"$1")}const D=y[v];return O&&!D?p[I]=void 0:p[I]=(D||"").replace(/%2F/g,"/"),p},{}),pathname:f,pathnameBase:g,pattern:e}}function U2(e,n,i){n===void 0&&(n=!1),i===void 0&&(i=!0),Ic(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let l=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,y,m)=>(l.push({paramName:y,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(l.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,n?void 0:"i"),l]}function z2(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Ic(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),e}}function Zd(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let i=n.endsWith("/")?n.length-1:n.length,l=e.charAt(i);return l&&l!=="/"?null:e.slice(i)||"/"}const V2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,H2=e=>V2.test(e);function W2(e,n){n===void 0&&(n="/");let{pathname:i,search:l="",hash:c=""}=typeof e=="string"?Vi(e):e,f;if(i)if(H2(i))f=i;else{if(i.includes("//")){let g=i;i=i.replace(/\/\/+/g,"/"),Ic(!1,"Pathnames cannot have embedded double slashes - normalizing "+(g+" -> "+i))}i.startsWith("/")?f=a0(i.substring(1),"/"):f=a0(i,n)}else f=n;return{pathname:f,search:Y2(l),hash:Z2(c)}}function a0(e,n){let i=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?i.length>1&&i.pop():c!=="."&&i.push(c)}),i.length>1?i.join("/"):"/"}function Da(e,n,i,l){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(l)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function G2(e){return e.filter((n,i)=>i===0||n.route.path&&n.route.path.length>0)}function Qd(e,n){let i=G2(e);return n?i.map((l,c)=>c===i.length-1?l.pathname:l.pathnameBase):i.map(l=>l.pathnameBase)}function Kd(e,n,i,l){l===void 0&&(l=!1);let c;typeof e=="string"?c=Vi(e):(c=Gs({},e),ct(!c.pathname||!c.pathname.includes("?"),Da("?","pathname","search",c)),ct(!c.pathname||!c.pathname.includes("#"),Da("#","pathname","hash",c)),ct(!c.search||!c.search.includes("#"),Da("#","search","hash",c)));let f=e===""||c.pathname==="",g=f?"/":c.pathname,y;if(g==null)y=i;else{let v=n.length-1;if(!l&&g.startsWith("..")){let I=g.split("/");for(;I[0]==="..";)I.shift(),v-=1;c.pathname=I.join("/")}y=v>=0?n[v]:"/"}let m=W2(c,y),p=g&&g!=="/"&&g.endsWith("/"),C=(f||g===".")&&i.endsWith("/");return!m.pathname.endsWith("/")&&(p||C)&&(m.pathname+="/"),m}const Xr=e=>e.join("/").replace(/\/\/+/g,"/"),X2=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Y2=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Z2=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Q2(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const qd=["post","put","patch","delete"];new Set(qd);const K2=["get",...qd];new Set(K2);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xs(){return Xs=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Xs.apply(this,arguments)}const bc=Y.createContext(null),q2=Y.createContext(null),eo=Y.createContext(null),Ll=Y.createContext(null),Rr=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),Jd=Y.createContext(null);function to(){return Y.useContext(Ll)!=null}function Hi(){return to()||ct(!1),Y.useContext(Ll).location}function $d(e){Y.useContext(eo).static||Y.useLayoutEffect(e)}function Un(){let{isDataRoute:e}=Y.useContext(Rr);return e?cp():J2()}function J2(){to()||ct(!1);let e=Y.useContext(bc),{basename:n,future:i,navigator:l}=Y.useContext(eo),{matches:c}=Y.useContext(Rr),{pathname:f}=Hi(),g=JSON.stringify(Qd(c,i.v7_relativeSplatPath)),y=Y.useRef(!1);return $d(()=>{y.current=!0}),Y.useCallback(function(p,C){if(C===void 0&&(C={}),!y.current)return;if(typeof p=="number"){l.go(p);return}let v=Kd(p,JSON.parse(g),f,C.relative==="path");e==null&&n!=="/"&&(v.pathname=v.pathname==="/"?n:Xr([n,v.pathname])),(C.replace?l.replace:l.push)(v,C.state,C)},[n,l,g,f,e])}function eh(){let{matches:e}=Y.useContext(Rr),n=e[e.length-1];return n?n.params:{}}function $2(e,n){return ep(e,n)}function ep(e,n,i,l){to()||ct(!1);let{navigator:c}=Y.useContext(eo),{matches:f}=Y.useContext(Rr),g=f[f.length-1],y=g?g.params:{};g&&g.pathname;let m=g?g.pathnameBase:"/";g&&g.route;let p=Hi(),C;if(n){var v;let F=typeof n=="string"?Vi(n):n;m==="/"||(v=F.pathname)!=null&&v.startsWith(m)||ct(!1),C=F}else C=p;let I=C.pathname||"/",O=I;if(m!=="/"){let F=m.replace(/^\//,"").split("/");O="/"+I.replace(/^\//,"").split("/").slice(F.length).join("/")}let D=b2(e,{pathname:O}),k=sp(D&&D.map(F=>Object.assign({},F,{params:Object.assign({},y,F.params),pathname:Xr([m,c.encodeLocation?c.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?m:Xr([m,c.encodeLocation?c.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),f,i,l);return n&&k?Y.createElement(Ll.Provider,{value:{location:Xs({pathname:"/",search:"",hash:"",state:null,key:"default"},C),navigationType:pr.Pop}},k):k}function tp(){let e=up(),n=Q2(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},n),i?Y.createElement("pre",{style:c},i):null,null)}const np=Y.createElement(tp,null);class rp extends Y.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,i){return i.location!==n.location||i.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:i.error,location:i.location,revalidation:n.revalidation||i.revalidation}}componentDidCatch(n,i){console.error("React Router caught the following error during render",n,i)}render(){return this.state.error!==void 0?Y.createElement(Rr.Provider,{value:this.props.routeContext},Y.createElement(Jd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ip(e){let{routeContext:n,match:i,children:l}=e,c=Y.useContext(bc);return c&&c.static&&c.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=i.route.id),Y.createElement(Rr.Provider,{value:n},l)}function sp(e,n,i,l){var c;if(n===void 0&&(n=[]),i===void 0&&(i=null),l===void 0&&(l=null),e==null){var f;if(!i)return null;if(i.errors)e=i.matches;else if((f=l)!=null&&f.v7_partialHydration&&n.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let g=e,y=(c=i)==null?void 0:c.errors;if(y!=null){let C=g.findIndex(v=>v.route.id&&(y==null?void 0:y[v.route.id])!==void 0);C>=0||ct(!1),g=g.slice(0,Math.min(g.length,C+1))}let m=!1,p=-1;if(i&&l&&l.v7_partialHydration)for(let C=0;C<g.length;C++){let v=g[C];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=C),v.route.id){let{loaderData:I,errors:O}=i,D=v.route.loader&&I[v.route.id]===void 0&&(!O||O[v.route.id]===void 0);if(v.route.lazy||D){m=!0,p>=0?g=g.slice(0,p+1):g=[g[0]];break}}}return g.reduceRight((C,v,I)=>{let O,D=!1,k=null,F=null;i&&(O=y&&v.route.id?y[v.route.id]:void 0,k=v.route.errorElement||np,m&&(p<0&&I===0?(fp("route-fallback"),D=!0,F=null):p===I&&(D=!0,F=v.route.hydrateFallbackElement||null)));let M=n.concat(g.slice(0,I+1)),b=()=>{let T;return O?T=k:D?T=F:v.route.Component?T=Y.createElement(v.route.Component,null):v.route.element?T=v.route.element:T=C,Y.createElement(ip,{match:v,routeContext:{outlet:C,matches:M,isDataRoute:i!=null},children:T})};return i&&(v.route.ErrorBoundary||v.route.errorElement||I===0)?Y.createElement(rp,{location:i.location,revalidation:i.revalidation,component:k,error:O,children:b(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):b()},null)}var th=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(th||{}),nh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(nh||{});function op(e){let n=Y.useContext(bc);return n||ct(!1),n}function lp(e){let n=Y.useContext(q2);return n||ct(!1),n}function ap(e){let n=Y.useContext(Rr);return n||ct(!1),n}function rh(e){let n=ap(),i=n.matches[n.matches.length-1];return i.route.id||ct(!1),i.route.id}function up(){var e;let n=Y.useContext(Jd),i=lp(),l=rh();return n!==void 0?n:(e=i.errors)==null?void 0:e[l]}function cp(){let{router:e}=op(th.UseNavigateStable),n=rh(nh.UseNavigateStable),i=Y.useRef(!1);return $d(()=>{i.current=!0}),Y.useCallback(function(c,f){f===void 0&&(f={}),i.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,Xs({fromRouteId:n},f)))},[e,n])}const u0={};function fp(e,n,i){u0[e]||(u0[e]=!0)}function dp(e,n){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ih(e){let{to:n,replace:i,state:l,relative:c}=e;to()||ct(!1);let{future:f,static:g}=Y.useContext(eo),{matches:y}=Y.useContext(Rr),{pathname:m}=Hi(),p=Un(),C=Kd(n,Qd(y,f.v7_relativeSplatPath),m,c==="path"),v=JSON.stringify(C);return Y.useEffect(()=>p(JSON.parse(v),{replace:i,state:l,relative:c}),[p,v,c,i,l]),null}function Pn(e){ct(!1)}function hp(e){let{basename:n="/",children:i=null,location:l,navigationType:c=pr.Pop,navigator:f,static:g=!1,future:y}=e;to()&&ct(!1);let m=n.replace(/^\/*/,"/"),p=Y.useMemo(()=>({basename:m,navigator:f,static:g,future:Xs({v7_relativeSplatPath:!1},y)}),[m,y,f,g]);typeof l=="string"&&(l=Vi(l));let{pathname:C="/",search:v="",hash:I="",state:O=null,key:D="default"}=l,k=Y.useMemo(()=>{let F=Zd(C,m);return F==null?null:{location:{pathname:F,search:v,hash:I,state:O,key:D},navigationType:c}},[m,C,v,I,O,D,c]);return k==null?null:Y.createElement(eo.Provider,{value:p},Y.createElement(Ll.Provider,{children:i,value:k}))}function xp(e){let{children:n,location:i}=e;return $2(Tu(n),i)}new Promise(()=>{});function Tu(e,n){n===void 0&&(n=[]);let i=[];return Y.Children.forEach(e,(l,c)=>{if(!Y.isValidElement(l))return;let f=[...n,c];if(l.type===Y.Fragment){i.push.apply(i,Tu(l.props.children,f));return}l.type!==Pn&&ct(!1),!l.props.index||!l.props.children||ct(!1);let g={id:l.props.id||f.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(g.children=Tu(l.props.children,f)),i.push(g)}),i}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const gp="6";try{window.__reactRouterVersion=gp}catch{}const pp="startTransition",c0=dx[pp];function mp(e){let{basename:n,children:i,future:l,window:c}=e,f=Y.useRef();f.current==null&&(f.current=S2({window:c,v5Compat:!0}));let g=f.current,[y,m]=Y.useState({action:g.action,location:g.location}),{v7_startTransition:p}=l||{},C=Y.useCallback(v=>{p&&c0?c0(()=>m(v)):m(v)},[m,p]);return Y.useLayoutEffect(()=>g.listen(C),[g,C]),Y.useEffect(()=>dp(l),[l]),Y.createElement(hp,{basename:n,children:i,location:y.location,navigationType:y.action,navigator:g,future:l})}var f0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(f0||(f0={}));var d0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(d0||(d0={}));function wp(e={}){const{nonce:n,onScriptLoadSuccess:i,onScriptLoadError:l}=e,[c,f]=Y.useState(!1),g=Y.useRef(i);g.current=i;const y=Y.useRef(l);return y.current=l,Y.useEffect(()=>{const m=document.createElement("script");return m.src="https://accounts.google.com/gsi/client",m.async=!0,m.defer=!0,m.nonce=n,m.onload=()=>{var p;f(!0),(p=g.current)===null||p===void 0||p.call(g)},m.onerror=()=>{var p;f(!1),(p=y.current)===null||p===void 0||p.call(y)},document.body.appendChild(m),()=>{document.body.removeChild(m)}},[n]),c}const sh=Y.createContext(null);function yp({clientId:e,nonce:n,onScriptLoadSuccess:i,onScriptLoadError:l,children:c}){const f=wp({nonce:n,onScriptLoadSuccess:i,onScriptLoadError:l}),g=Y.useMemo(()=>({clientId:e,scriptLoadedSuccessfully:f}),[e,f]);return Gn.createElement(sh.Provider,{value:g},c)}function Ep(){const e=Y.useContext(sh);if(!e)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return e}function Cp(e){var n;return(n=e==null?void 0:e.clientId)!==null&&n!==void 0?n:e==null?void 0:e.client_id}const vp={large:40,medium:32,small:20};function Ap({onSuccess:e,onError:n,useOneTap:i,promptMomentNotification:l,type:c="standard",theme:f="outline",size:g="large",text:y,shape:m,logo_alignment:p,width:C,locale:v,click_listener:I,containerProps:O,...D}){const k=Y.useRef(null),{clientId:F,scriptLoadedSuccessfully:M}=Ep(),b=Y.useRef(e);b.current=e;const T=Y.useRef(n);T.current=n;const j=Y.useRef(l);return j.current=l,Y.useEffect(()=>{var q,z,L,Q,X,he,Se,re,K;if(M)return(L=(z=(q=window==null?void 0:window.google)===null||q===void 0?void 0:q.accounts)===null||z===void 0?void 0:z.id)===null||L===void 0||L.initialize({client_id:F,callback:se=>{var H;if(!(se!=null&&se.credential))return(H=T.current)===null||H===void 0?void 0:H.call(T);const{credential:Ne,select_by:me}=se;b.current({credential:Ne,clientId:Cp(se),select_by:me})},...D}),(he=(X=(Q=window==null?void 0:window.google)===null||Q===void 0?void 0:Q.accounts)===null||X===void 0?void 0:X.id)===null||he===void 0||he.renderButton(k.current,{type:c,theme:f,size:g,text:y,shape:m,logo_alignment:p,width:C,locale:v,click_listener:I}),i&&((K=(re=(Se=window==null?void 0:window.google)===null||Se===void 0?void 0:Se.accounts)===null||re===void 0?void 0:re.id)===null||K===void 0||K.prompt(j.current)),()=>{var se,H,Ne;i&&((Ne=(H=(se=window==null?void 0:window.google)===null||se===void 0?void 0:se.accounts)===null||H===void 0?void 0:H.id)===null||Ne===void 0||Ne.cancel())}},[F,M,i,c,f,g,y,m,p,C,v]),Gn.createElement("div",{...O,ref:k,style:{height:vp[g],...O==null?void 0:O.style}})}const Sp={},h0=e=>{let n;const i=new Set,l=(C,v)=>{const I=typeof C=="function"?C(n):C;if(!Object.is(I,n)){const O=n;n=v??(typeof I!="object"||I===null)?I:Object.assign({},n,I),i.forEach(D=>D(n,O))}},c=()=>n,m={setState:l,getState:c,getInitialState:()=>p,subscribe:C=>(i.add(C),()=>i.delete(C)),destroy:()=>{(Sp?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},p=n=e(l,c,m);return m},Np=e=>e?h0(e):h0;var oh={exports:{}},lh={},ah={exports:{}},uh={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fi=Y;function Ip(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var bp=typeof Object.is=="function"?Object.is:Ip,_p=Fi.useState,Tp=Fi.useEffect,Rp=Fi.useLayoutEffect,Op=Fi.useDebugValue;function Mp(e,n){var i=n(),l=_p({inst:{value:i,getSnapshot:n}}),c=l[0].inst,f=l[1];return Rp(function(){c.value=i,c.getSnapshot=n,ka(c)&&f({inst:c})},[e,i,n]),Tp(function(){return ka(c)&&f({inst:c}),e(function(){ka(c)&&f({inst:c})})},[e]),Op(i),i}function ka(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!bp(e,i)}catch{return!0}}function Dp(e,n){return n()}var kp=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Dp:Mp;uh.useSyncExternalStore=Fi.useSyncExternalStore!==void 0?Fi.useSyncExternalStore:kp;ah.exports=uh;var Pp=ah.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fl=Y,Bp=Pp;function Lp(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Fp=typeof Object.is=="function"?Object.is:Lp,jp=Bp.useSyncExternalStore,Up=Fl.useRef,zp=Fl.useEffect,Vp=Fl.useMemo,Hp=Fl.useDebugValue;lh.useSyncExternalStoreWithSelector=function(e,n,i,l,c){var f=Up(null);if(f.current===null){var g={hasValue:!1,value:null};f.current=g}else g=f.current;f=Vp(function(){function m(O){if(!p){if(p=!0,C=O,O=l(O),c!==void 0&&g.hasValue){var D=g.value;if(c(D,O))return v=D}return v=O}if(D=v,Fp(C,O))return D;var k=l(O);return c!==void 0&&c(D,k)?(C=O,D):(C=O,v=k)}var p=!1,C,v,I=i===void 0?null:i;return[function(){return m(n())},I===null?void 0:function(){return m(I())}]},[n,i,l,c]);var y=jp(e,f[0],f[1]);return zp(function(){g.hasValue=!0,g.value=y},[y]),Hp(y),y};oh.exports=lh;var Wp=oh.exports;const Gp=O0(Wp),ch={},{useDebugValue:Xp}=Gn,{useSyncExternalStoreWithSelector:Yp}=Gp;let x0=!1;const Zp=e=>e;function Qp(e,n=Zp,i){(ch?"production":void 0)!=="production"&&i&&!x0&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),x0=!0);const l=Yp(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,i);return Xp(l),l}const g0=e=>{(ch?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof e=="function"?Np(e):e,i=(l,c)=>Qp(n,l,c);return Object.assign(i,n),i},no=e=>e?g0(e):g0,Kp={};function qp(e,n){let i;try{i=e()}catch{return}return{getItem:c=>{var f;const g=m=>m===null?null:JSON.parse(m,void 0),y=(f=i.getItem(c))!=null?f:null;return y instanceof Promise?y.then(g):g(y)},setItem:(c,f)=>i.setItem(c,JSON.stringify(f,void 0)),removeItem:c=>i.removeItem(c)}}const Ys=e=>n=>{try{const i=e(n);return i instanceof Promise?i:{then(l){return Ys(l)(i)},catch(l){return this}}}catch(i){return{then(l){return this},catch(l){return Ys(l)(i)}}}},Jp=(e,n)=>(i,l,c)=>{let f={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:F=>F,version:0,merge:(F,M)=>({...M,...F}),...n},g=!1;const y=new Set,m=new Set;let p;try{p=f.getStorage()}catch{}if(!p)return e((...F)=>{console.warn(`[zustand persist middleware] Unable to update item '${f.name}', the given storage is currently unavailable.`),i(...F)},l,c);const C=Ys(f.serialize),v=()=>{const F=f.partialize({...l()});let M;const b=C({state:F,version:f.version}).then(T=>p.setItem(f.name,T)).catch(T=>{M=T});if(M)throw M;return b},I=c.setState;c.setState=(F,M)=>{I(F,M),v()};const O=e((...F)=>{i(...F),v()},l,c);let D;const k=()=>{var F;if(!p)return;g=!1,y.forEach(b=>b(l()));const M=((F=f.onRehydrateStorage)==null?void 0:F.call(f,l()))||void 0;return Ys(p.getItem.bind(p))(f.name).then(b=>{if(b)return f.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==f.version){if(f.migrate)return f.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var T;return D=f.merge(b,(T=l())!=null?T:O),i(D,!0),v()}).then(()=>{M==null||M(D,void 0),g=!0,m.forEach(b=>b(D))}).catch(b=>{M==null||M(void 0,b)})};return c.persist={setOptions:F=>{f={...f,...F},F.getStorage&&(p=F.getStorage())},clearStorage:()=>{p==null||p.removeItem(f.name)},getOptions:()=>f,rehydrate:()=>k(),hasHydrated:()=>g,onHydrate:F=>(y.add(F),()=>{y.delete(F)}),onFinishHydration:F=>(m.add(F),()=>{m.delete(F)})},k(),D||O},$p=(e,n)=>(i,l,c)=>{let f={storage:qp(()=>localStorage),partialize:k=>k,version:0,merge:(k,F)=>({...F,...k}),...n},g=!1;const y=new Set,m=new Set;let p=f.storage;if(!p)return e((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${f.name}', the given storage is currently unavailable.`),i(...k)},l,c);const C=()=>{const k=f.partialize({...l()});return p.setItem(f.name,{state:k,version:f.version})},v=c.setState;c.setState=(k,F)=>{v(k,F),C()};const I=e((...k)=>{i(...k),C()},l,c);c.getInitialState=()=>I;let O;const D=()=>{var k,F;if(!p)return;g=!1,y.forEach(b=>{var T;return b((T=l())!=null?T:I)});const M=((F=f.onRehydrateStorage)==null?void 0:F.call(f,(k=l())!=null?k:I))||void 0;return Ys(p.getItem.bind(p))(f.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==f.version){if(f.migrate)return[!0,f.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var T;const[j,q]=b;if(O=f.merge(q,(T=l())!=null?T:I),i(O,!0),j)return C()}).then(()=>{M==null||M(O,void 0),O=l(),g=!0,m.forEach(b=>b(O))}).catch(b=>{M==null||M(void 0,b)})};return c.persist={setOptions:k=>{f={...f,...k},k.storage&&(p=k.storage)},clearStorage:()=>{p==null||p.removeItem(f.name)},getOptions:()=>f,rehydrate:()=>D(),hasHydrated:()=>g,onHydrate:k=>(y.add(k),()=>{y.delete(k)}),onFinishHydration:k=>(m.add(k),()=>{m.delete(k)})},f.skipHydration||D(),O||I},em=(e,n)=>"getStorage"in n||"serialize"in n||"deserialize"in n?((Kp?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Jp(e,n)):$p(e,n),jl=em,er=no(jl(e=>({user:null,currentHub:null,setUser:n=>e({user:n}),logout:()=>e({user:null,currentHub:null}),setCurrentHub:n=>e({currentHub:n})}),{name:"buddybeasts-auth"}));class ms extends Error{}ms.prototype.name="InvalidTokenError";function tm(e){return decodeURIComponent(atob(e).replace(/(.)/g,(n,i)=>{let l=i.charCodeAt(0).toString(16).toUpperCase();return l.length<2&&(l="0"+l),"%"+l}))}function nm(e){let n=e.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return tm(n)}catch{return atob(n)}}function rm(e,n){if(typeof e!="string")throw new ms("Invalid token specified: must be a string");n||(n={});const i=n.header===!0?0:1,l=e.split(".")[i];if(typeof l!="string")throw new ms(`Invalid token specified: missing part #${i+1}`);let c;try{c=nm(l)}catch(f){throw new ms(`Invalid token specified: invalid base64 for part #${i+1} (${f.message})`)}try{return JSON.parse(c)}catch(f){throw new ms(`Invalid token specified: invalid json for part #${i+1} (${f.message})`)}}const Wi=no(jl(e=>({monster:{id:null,name:"Buddy",level:1,crystals:0,coins:0,evolution:"baby",traits:[],questsCompleted:0,socialScore:0,preferredQuestTypes:{},preferredGroupSize:"small",unlockedSkins:["default"],activeSkin:"default",equippedItems:{hat:null,outfit:null}},monsters:[],inventory:[],eggs:[],initializeMonster:n=>e(i=>{const l={...i.monster,id:n},c=i.monsters.some(f=>f.id===n);return{monster:l,monsters:c?i.monsters:[...i.monsters,l]}}),addCrystals:n=>e(i=>{const l=i.monster.crystals+n,c={...i.monster,crystals:l,level:Math.floor(l/100)+1};return{monster:c,monsters:i.monsters.map(f=>f.id===c.id?c:f)}}),addCoins:n=>e(i=>{const l={...i.monster,coins:i.monster.coins+n};return{monster:l,monsters:i.monsters.map(c=>c.id===l.id?l:c)}}),completeQuest:(n,i)=>e(l=>{const c={...l.monster.preferredQuestTypes};c[n]=(c[n]||0)+1;const f={...l.monster,questsCompleted:l.monster.questsCompleted+1,socialScore:i?l.monster.socialScore+10:l.monster.socialScore+3,preferredQuestTypes:c};return{monster:f,monsters:l.monsters.map(g=>g.id===f.id?f:g)}}),evolveMonster:(n,i)=>e(l=>{const c={...l.monster,evolution:n,traits:[...l.monster.traits,...i]};return{monster:c,monsters:l.monsters.map(f=>f.id===c.id?c:f)}}),updatePreferredGroupSize:n=>e(i=>{const l={...i.monster,preferredGroupSize:n};return{monster:l,monsters:i.monsters.map(c=>c.id===l.id?l:c)}}),unlockSkin:n=>e(i=>{if(i.monster.unlockedSkins.includes(n))return i;const l={...i.monster,unlockedSkins:[...i.monster.unlockedSkins,n]};return{monster:l,monsters:i.monsters.map(c=>c.id===l.id?l:c)}}),setActiveSkin:n=>e(i=>{if(!i.monster.unlockedSkins.includes(n))return i;const l={...i.monster,activeSkin:n};return{monster:l,monsters:i.monsters.map(c=>c.id===l.id?l:c)}}),addItemToInventory:n=>e(i=>i.inventory.includes(n)?i:{inventory:[...i.inventory,n]}),equipItem:(n,i)=>e(l=>{if(!l.inventory.includes(i))return l;const c={...l.monster,equippedItems:{...l.monster.equippedItems,[n]:i}};return{monster:c,monsters:l.monsters.map(f=>f.id===c.id?c:f)}}),unequipItem:n=>e(i=>{const l={...i.monster,equippedItems:{...i.monster.equippedItems,[n]:null}};return{monster:l,monsters:i.monsters.map(c=>c.id===l.id?l:c)}}),buyItem:n=>e(i=>{if(i.monster.coins<n.cost||i.inventory.includes(n.id))return i;const l={...i.monster,coins:i.monster.coins-n.cost};return{monster:l,monsters:i.monsters.map(c=>c.id===l.id?l:c),inventory:[...i.inventory,n.id]}}),buyEgg:n=>e(i=>{if(i.monster.coins<n.cost)return i;const l={...i.monster,coins:i.monster.coins-n.cost};return{monster:l,monsters:i.monsters.map(c=>c.id===l.id?l:c),eggs:[...i.eggs,{...n,id:`${n.id}_${Date.now()}`}]}}),hatchEgg:n=>e(i=>{const l=i.eggs.find(y=>y.id===n);if(!l)return i;const c=["baby","teen","adult","leader","support"],f=c[Math.floor(Math.random()*c.length)],g={id:`${i.monster.id}_m${Date.now()}`,name:l.name||"Hatchling",level:1,crystals:0,coins:0,evolution:f,traits:[l.rarity||"common"],questsCompleted:0,socialScore:0,preferredQuestTypes:{},preferredGroupSize:"small",unlockedSkins:["default"],activeSkin:"default",equippedItems:{hat:null,outfit:null}};return{eggs:i.eggs.filter(y=>y.id!==n),monsters:[...i.monsters,g]}}),setActiveMonster:n=>e(i=>{const l=i.monsters.find(c=>c.id===n);return l?{monster:l}:i})}),{name:"buddybeasts-monster"}));function im(){return E.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-pixel-dark via-pixel-purple to-pixel-dark opacity-80"}),E.jsxs("div",{className:"absolute inset-0",children:[E.jsx("div",{className:"absolute top-10 left-10 w-4 h-4 bg-pixel-pink opacity-20 animate-float"}),E.jsx("div",{className:"absolute top-1/4 right-20 w-6 h-6 bg-pixel-blue opacity-15 animate-pulse-slow"}),E.jsx("div",{className:"absolute bottom-1/3 left-1/4 w-3 h-3 bg-pixel-green opacity-20 animate-bounce"}),E.jsx("div",{className:"absolute top-1/3 right-1/3 w-5 h-5 bg-pixel-yellow opacity-10"}),E.jsx("div",{className:"absolute bottom-20 left-5 text-6xl opacity-20",children:""}),E.jsx("div",{className:"absolute top-20 right-10 text-4xl opacity-30",children:""}),E.jsx("div",{className:"absolute bottom-40 right-20 text-5xl opacity-20",children:""}),E.jsx("div",{className:"absolute top-1/2 left-1/4 text-3xl opacity-25",children:""})]}),E.jsx("div",{className:"absolute inset-0 opacity-5",children:E.jsx("div",{style:{backgroundImage:"linear-gradient(rgba(255,255,255,.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,.1) 1px, transparent 1px)",backgroundSize:"32px 32px"}})})]})}function sm(){const e=Un(),n=er(g=>g.setUser),i=Wi(g=>g.initializeMonster),l=g=>{try{const y=rm(g.credential),m={id:y.sub,name:y.name,email:y.email,picture:y.picture};n(m),i(m.id),e("/hub-selection")}catch(y){console.error("Login error:",y)}},c=()=>{console.error("Login failed")},f=()=>{const g={id:"demo_"+Date.now(),name:"Demo Player",email:"demo@buddybeasts.com",picture:null};n(g),i(g.id),e("/hub-selection")};return E.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[E.jsx(im,{}),E.jsxs("div",{className:"max-w-md w-full pixel-card p-8 text-center relative z-10",children:[E.jsxs("div",{className:"mb-8",children:[E.jsx("h1",{className:"font-pixel text-2xl md:text-3xl text-pixel-yellow mb-4 animate-pulse-slow",children:"BuddyBeasts"}),E.jsx("p",{className:"text-lg md:text-xl text-pixel-light font-game",children:"Turn local social connection into a living pixel world"})]}),E.jsx("div",{className:"mb-8 flex justify-center",children:E.jsx("div",{className:"w-32 h-32 bg-pixel-pink rounded-lg flex items-center justify-center animate-float",children:E.jsx("div",{className:"pixel-border text-6xl",children:""})})}),E.jsxs("div",{className:"space-y-4",children:[E.jsx("div",{className:"flex justify-center",children:E.jsx(Ap,{onSuccess:l,onError:c,useOneTap:!0,theme:"filled_black",size:"large",text:"continue_with"})}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t-2 border-pixel-purple"})}),E.jsx("div",{className:"relative flex justify-center text-sm",children:E.jsx("span",{className:"px-2 bg-pixel-dark text-pixel-light",children:"OR"})})]}),E.jsx("button",{onClick:f,className:"pixel-button bg-pixel-blue hover:bg-pixel-green text-white w-full",children:"Try Demo"})]}),E.jsxs("div",{className:"mt-8 text-xs text-pixel-light opacity-75 font-game",children:[E.jsx("p",{className:"mb-2",children:" Complete group quests"}),E.jsx("p",{className:"mb-2",children:" Grow your pixel monster"}),E.jsx("p",{children:" Build real community connections"})]})]})]})}const fh=no((e,n)=>({onlineUsers:[],activeQuests:[],completedQuests:[],pollingInterval:null,setOnlineUsers:i=>e({onlineUsers:i}),addOnlineUser:i=>e(l=>({onlineUsers:[...l.onlineUsers.filter(c=>c.id!==i.id),i]})),removeOnlineUser:i=>e(l=>({onlineUsers:l.onlineUsers.filter(c=>c.id!==i)})),setActiveQuests:i=>e({activeQuests:i}),addCompletedQuest:i=>e(l=>({completedQuests:[...l.completedQuests,i]})),startPolling:i=>{const l=setInterval(()=>{const c=n();if(Math.random()>.7&&c.onlineUsers.length<10){const f={id:`user_${Date.now()}`,name:`Player${Math.floor(Math.random()*100)}`,monster:{evolution:["baby","teen","adult"][Math.floor(Math.random()*3)],position:{x:Math.random()*80+10,y:Math.random()*60+20}}};c.addOnlineUser(f)}},5e3);e({pollingInterval:l})},stopPolling:()=>{const{pollingInterval:i}=n();i&&(clearInterval(i),e({pollingInterval:null}))}})),ko=[{id:"hub_campus_main",name:"Main Campus Hub",location:"University Campus",distance:.5,activeUsers:24,coordinates:{lat:43.6532,lng:-79.3832}},{id:"hub_downtown",name:"Downtown Community",location:"Downtown Core",distance:2.1,activeUsers:18,coordinates:{lat:43.6426,lng:-79.3871}},{id:"hub_eastside",name:"East Side Neighborhood",location:"East Toronto",distance:3.8,activeUsers:12,coordinates:{lat:43.6629,lng:-79.3506}},{id:"hub_westend",name:"West End Village",location:"West Toronto",distance:4.2,activeUsers:15,coordinates:{lat:43.6476,lng:-79.4163}}];function om(){const e=Un(),{user:n,setCurrentHub:i}=er(),[l,c]=Y.useState(null),[f,g]=Y.useState(null),[y,m]=Y.useState(null),[p,C]=Y.useState(ko),[v,I]=Y.useState(!0);Y.useEffect(()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(D=>{c({lat:D.coords.latitude,lng:D.coords.longitude}),I(!1);const k=ko[0];m(k)},D=>{console.error("Geolocation error:",D),g("Unable to access location. Please select a hub manually."),I(!1),m(ko[0])},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}):(g("Geolocation not supported. Please select a hub manually."),I(!1),m(ko[0]))},[]);const O=()=>{y&&(i(y),e("/hub"))};return E.jsx("div",{className:"min-h-screen bg-gradient-to-b from-pixel-dark to-pixel-purple p-4",children:E.jsxs("div",{className:"max-w-2xl mx-auto pt-8",children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("h1",{className:"font-pixel text-xl md:text-2xl text-pixel-yellow mb-4",children:"Choose Your Hub"}),E.jsx("p",{className:"text-lg text-pixel-light font-game",children:"Join a local community to start your adventure"})]}),v&&E.jsx("div",{className:"pixel-card p-4 mb-6 text-center",children:E.jsx("div",{className:"animate-pulse text-pixel-blue font-game",children:" Finding nearby hubs..."})}),f&&E.jsx("div",{className:"pixel-card p-4 mb-6 bg-pixel-pink bg-opacity-20",children:E.jsxs("p",{className:"text-pixel-yellow font-game text-sm",children:[" ",f]})}),l&&E.jsx("div",{className:"pixel-card p-4 mb-6 bg-pixel-green bg-opacity-20",children:E.jsx("p",{className:"text-pixel-green font-game text-sm",children:" Location detected - showing nearby hubs"})}),E.jsx("div",{className:"space-y-4 mb-8",children:p.map(D=>E.jsxs("button",{onClick:()=>m(D),className:`w-full pixel-card p-6 text-left transition-all ${(y==null?void 0:y.id)===D.id?"border-pixel-yellow bg-pixel-yellow bg-opacity-10":"hover:border-pixel-blue"}`,children:[E.jsxs("div",{className:"flex justify-between items-start mb-2",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"font-pixel text-sm md:text-base text-pixel-light mb-2",children:D.name}),E.jsxs("p",{className:"text-pixel-blue font-game",children:[" ",D.location]})]}),(y==null?void 0:y.id)===D.id&&E.jsx("div",{className:"text-2xl animate-pulse-slow",children:""})]}),E.jsxs("div",{className:"flex gap-4 mt-4 text-sm font-game",children:[l&&E.jsxs("span",{className:"text-pixel-green",children:[" ",D.distance," km away"]}),E.jsxs("span",{className:"text-pixel-pink",children:[" ",D.activeUsers," active"]})]})]},D.id))}),E.jsxs("button",{onClick:O,disabled:!y,className:"pixel-button bg-pixel-yellow hover:bg-pixel-pink text-pixel-dark w-full py-4 text-base",children:["Join ",(y==null?void 0:y.name)||"Hub"]}),E.jsx("div",{className:"mt-8 pixel-card p-4 bg-pixel-purple bg-opacity-20",children:E.jsx("p",{className:"text-xs text-pixel-light font-game text-center",children:" You can switch hubs anytime from your profile"})})]})})}const p0={baby:{small:"",medium:"",large:""},teen:{small:"",medium:"",large:""},adult:{small:"",medium:"",large:""},leader:{small:"",medium:"",large:""},support:{small:"",medium:"",large:""}},m0={default:"",star:"pixel-skin-star",leaf:"pixel-skin-leaf",crystal:"pixel-skin-crystal"},w0={hat_wizard:"",hat_cap:"",hat_crown:"",outfit_hoodie:"",outfit_armor:"",outfit_dress:""};function Zs({evolution:e="baby",size:n="medium",animated:i=!1,isPlayer:l=!1,skin:c="default",className:f="",equippedItems:g={}}){var C;const y=((C=p0[e])==null?void 0:C[n])||p0.baby[n],m={small:"text-2xl",medium:"text-4xl",large:"text-6xl"},p=m0[c]||m0.default;return E.jsxs("div",{className:`
        pixelated inline-block relative
        ${i?"animate-float":""}
        ${l?"drop-shadow-lg":""}
        ${m[n]}
        ${p}
        ${f}
      `,style:{filter:l?"drop-shadow(0 0 8px rgba(255, 230, 109, 0.6))":"none",imageRendering:"pixelated"},children:[y,(g==null?void 0:g.hat)&&E.jsx("span",{className:"absolute -top-4 left-1/2 -translate-x-1/2 text-2xl",children:w0[g.hat]||""}),(g==null?void 0:g.outfit)&&E.jsx("span",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 text-xl",children:w0[g.outfit]||""})]})}function Ul(){const e=Un(),n=Hi(),i=[{path:"/hub",icon:"",label:"Hub"},{path:"/quests",icon:"",label:"Quests"},{path:"/chat",icon:"",label:"Chat"},{path:"/profile",icon:"",label:"Profile"}];return E.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-pixel-dark border-t-4 border-pixel-purple z-50 pb-safe pt-safe",children:E.jsx("div",{className:"max-w-4xl mx-auto flex justify-around items-center py-3 px-2",children:i.map(l=>{const c=n.pathname===l.path;return E.jsxs("button",{onClick:()=>e(l.path),className:`
                touch-target flex flex-col items-center justify-center gap-1 px-5 py-3 rounded transition-all min-w-[72px]
                ${c?"bg-pixel-purple text-pixel-yellow":"text-pixel-light hover:text-pixel-pink"}
              `,"aria-label":l.label,children:[E.jsx("span",{className:"text-2xl","aria-hidden":!0,children:l.icon}),E.jsx("span",{className:"text-xs font-game",children:l.label})]},l.path)})})})}function lm(){const e=Un(),{user:n,currentHub:i}=er(),{monster:l}=Wi(),{onlineUsers:c,startPolling:f,stopPolling:g}=fh(),[y,m]=Y.useState(!0),[p,C]=Y.useState({x:50,y:60}),[v,I]=Y.useState(!1),O=Y.useRef(null);Y.useEffect(()=>{if(!i){e("/hub-selection");return}f(i.id);const k=setTimeout(()=>m(!1),3e3);return()=>{g(),clearTimeout(k)}},[i,e,f,g]);const D=k=>{if(!O.current)return;const F=O.current.getBoundingClientRect(),M=(k.clientX-F.left)/F.width*100,b=(k.clientY-F.top)/F.height*100,T=Math.max(5,Math.min(95,M)),j=Math.max(15,Math.min(85,b));C({x:T,y:j}),I(!0),setTimeout(()=>I(!1),500)};return i?E.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-pixel-dark via-pixel-purple to-pixel-dark pb-20",children:[E.jsx("div",{className:"bg-pixel-dark border-b-4 border-pixel-purple p-4 sticky top-0 z-10",children:E.jsxs("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[E.jsxs("div",{children:[E.jsx("h1",{className:"font-pixel text-sm md:text-base text-pixel-yellow",children:i.name}),E.jsxs("p",{className:"text-xs text-pixel-light font-game mt-1",children:[" ",c.length+1," monsters online"]})]}),E.jsx("button",{onClick:()=>e("/profile"),className:"w-10 h-10 rounded-full overflow-hidden border-2 border-pixel-pink",children:n.picture?E.jsx("img",{src:n.picture,alt:n.name,className:"w-full h-full object-cover"}):E.jsx("div",{className:"w-full h-full bg-pixel-blue flex items-center justify-center text-white font-pixel text-xs",children:n.name[0]})})]})}),y&&E.jsx("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 z-20 animate-float",children:E.jsx("div",{className:"pixel-card p-4 bg-pixel-green bg-opacity-90",children:E.jsxs("p",{className:"font-game text-white text-center",children:["Welcome to ",i.name,"! "]})})}),E.jsxs("div",{className:"relative max-w-4xl mx-auto mt-8 px-4",children:[E.jsxs("div",{ref:O,onClick:D,className:"pixel-card min-h-[500px] md:min-h-[600px] relative overflow-hidden cursor-pointer",style:{background:"linear-gradient(to bottom, #87CEEB 0%, #87CEEB 60%, #90EE90 60%, #90EE90 100%)",imageRendering:"pixelated"},children:[E.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[E.jsx("div",{className:"absolute top-8 right-12 w-16 h-16 bg-yellow-300 rounded-full shadow-lg animate-pulse-slow"}),E.jsx("div",{className:"absolute top-12 left-20 text-6xl opacity-80 animate-float",children:""}),E.jsx("div",{className:"absolute top-24 right-32 text-5xl opacity-70 animate-float",style:{animationDelay:"1s"},children:""}),E.jsx("div",{className:"absolute top-32 left-1/3 text-4xl opacity-60 animate-float",style:{animationDelay:"2s"},children:""})]}),E.jsxs("div",{className:"absolute bottom-0 left-0 right-0 pointer-events-none",children:[E.jsx("div",{className:"absolute bottom-16 left-8 text-7xl transform scale-y-110",children:""}),E.jsx("div",{className:"absolute bottom-16 right-12 text-7xl transform scale-y-110",children:""}),E.jsx("div",{className:"absolute bottom-20 left-32 text-5xl opacity-80",children:""}),E.jsx("div",{className:"absolute bottom-20 right-40 text-6xl opacity-75",children:""}),E.jsx("div",{className:"absolute bottom-24 left-1/4 text-3xl",children:""}),E.jsx("div",{className:"absolute bottom-28 right-1/3 text-3xl",children:""}),E.jsx("div",{className:"absolute bottom-24 left-1/2 text-2xl",children:""}),E.jsx("div",{className:"absolute bottom-20 left-1/3 text-2xl",children:""})]}),E.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 pointer-events-none",children:E.jsx("div",{className:"w-full h-full opacity-20",style:{backgroundImage:"repeating-linear-gradient(90deg, transparent, transparent 15px, rgba(0,0,0,0.1) 15px, rgba(0,0,0,0.1) 16px)"}})}),E.jsx("div",{className:"absolute transition-all duration-700 ease-out z-20",style:{left:`${p.x}%`,top:`${p.y}%`,transform:"translate(-50%, -50%)"},children:E.jsxs("div",{className:"text-center pointer-events-none",children:[E.jsx("div",{className:`${v?"animate-bounce":""}`,children:E.jsx(Zs,{evolution:l.evolution,size:"large",animated:!0,isPlayer:!0,equippedItems:l.equippedItems})}),E.jsx("div",{className:"mt-2 pixel-card p-2 bg-pixel-yellow inline-block shadow-lg",children:E.jsxs("p",{className:"font-pixel text-xs text-pixel-dark whitespace-nowrap",children:[n.name," (You)"]})})]})}),c.slice(0,6).map((k,F)=>{var T;const M=[{top:"30%",left:"20%"},{top:"45%",left:"75%"},{top:"55%",left:"35%"},{top:"35%",left:"65%"},{top:"60%",left:"15%"},{top:"40%",left:"85%"}],b=M[F%M.length];return E.jsx("div",{className:"absolute transition-all duration-1000 z-10",style:b,children:E.jsxs("button",{onClick:j=>{j.stopPropagation(),console.log("Interact with",k.name)},className:"text-center hover:scale-110 transition-transform pointer-events-auto",children:[E.jsx("div",{className:"animate-float",style:{animationDelay:`${F*.5}s`},children:E.jsx(Zs,{evolution:((T=k.monster)==null?void 0:T.evolution)||"baby",size:"medium",animated:!0})}),E.jsx("div",{className:"mt-1 bg-pixel-dark bg-opacity-90 px-2 py-1 rounded text-xs font-game text-white whitespace-nowrap shadow-md",children:k.name})]})},k.id)}),E.jsx("div",{className:"absolute top-4 left-4 pixel-card p-3 bg-pixel-dark bg-opacity-90 max-w-xs shadow-lg z-30 pointer-events-none",children:E.jsx("p",{className:"text-xs font-game text-pixel-light",children:" Click anywhere to move your monster!"})})]}),E.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[E.jsxs("button",{onClick:()=>e("/quests"),className:"pixel-button bg-pixel-yellow hover:bg-pixel-pink text-pixel-dark py-6 flex flex-col items-center gap-2",children:[E.jsx("span",{className:"text-3xl",children:""}),E.jsx("span",{className:"text-xs md:text-sm",children:"Quest Board"})]}),E.jsxs("button",{onClick:()=>e("/profile"),className:"pixel-button bg-pixel-blue hover:bg-pixel-green text-white py-6 flex flex-col items-center gap-2",children:[E.jsx("span",{className:"text-3xl",children:""}),E.jsx("span",{className:"text-xs md:text-sm",children:"My Monster"})]})]}),E.jsxs("div",{className:"mt-6 pixel-card p-4 bg-pixel-purple bg-opacity-20",children:[E.jsx("h3",{className:"font-pixel text-xs text-pixel-yellow mb-3",children:"Hub Activity"}),E.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center font-game",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-2xl",children:""}),E.jsx("p",{className:"text-xs text-pixel-light mt-1",children:"42 Quests"}),E.jsx("p",{className:"text-xs text-pixel-blue",children:"This Week"})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-2xl",children:""}),E.jsx("p",{className:"text-xs text-pixel-light mt-1",children:"127 Meetups"}),E.jsx("p",{className:"text-xs text-pixel-green",children:"All Time"})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-2xl",children:""}),E.jsx("p",{className:"text-xs text-pixel-light mt-1",children:"4.8 Rating"}),E.jsx("p",{className:"text-xs text-pixel-pink",children:"Community"})]})]})]})]}),E.jsx(Ul,{})]}):null}const Gi=no(jl(e=>({questHistory:[],dropOffEvents:[],timeOfDayPatterns:{},belongingScores:[],trackQuestStart:(n,i)=>e(l=>({questHistory:[...l.questHistory,{questId:n,questType:i,startTime:Date.now(),status:"started"}]})),trackQuestComplete:(n,i,l)=>e(c=>({questHistory:c.questHistory.map(f=>f.questId===n?{...f,status:"completed",groupSize:i,duration:l,endTime:Date.now()}:f)})),trackQuestDropOff:(n,i)=>e(l=>({dropOffEvents:[...l.dropOffEvents,{questId:n,reason:i,timestamp:Date.now()}],questHistory:l.questHistory.map(c=>c.questId===n?{...c,status:"dropped",dropReason:i}:c)})),trackBelongingScore:n=>e(i=>({belongingScores:[...i.belongingScores,{score:n,timestamp:Date.now()}]})),getRecommendations:()=>{var p;const i=Gi.getState().questHistory.filter(C=>C.status==="completed");if(i.length===0)return{recommendedTypes:["coffee_chat","study_jam","sunset_walk"],recommendedGroupSize:"small",bestTimeOfDay:"afternoon"};const l={};i.forEach(C=>{l[C.questType]=(l[C.questType]||0)+1});const c=Object.entries(l).sort((C,v)=>v[1]-C[1]).slice(0,3).map(([C])=>C),f=i.reduce((C,v)=>C+(v.groupSize||2),0)/i.length,g=f<=2?"1-1":f<=4?"small":"large",y={};i.forEach(C=>{const v=new Date(C.startTime).getHours(),I=v<12?"morning":v<17?"afternoon":"evening";y[I]=(y[I]||0)+1});const m=((p=Object.entries(y).sort((C,v)=>v[1]-C[1])[0])==null?void 0:p[0])||"afternoon";return{recommendedTypes:c,recommendedGroupSize:g,bestTimeOfDay:m}}}),{name:"buddybeasts-data"})),am=[{id:"coffee_chat",title:"Coffee Chat",description:"Meet for a casual 20-min coffee conversation",duration:20,minParticipants:2,maxParticipants:3,difficulty:"easy",crystals:50,icon:"",type:"coffee_chat",tags:["casual","short","indoor"]},{id:"study_jam",title:"Study Jam",description:"Group study session with focused work time",duration:60,minParticipants:3,maxParticipants:5,difficulty:"medium",crystals:100,icon:"",type:"study_jam",tags:["productive","medium","indoor"]},{id:"sunset_walk",title:"Sunset Walk",description:"Evening stroll around the neighborhood",duration:30,minParticipants:2,maxParticipants:4,difficulty:"easy",crystals:75,icon:"",type:"sunset_walk",tags:["outdoor","relaxing","evening"]},{id:"help_neighbor",title:"Help a Neighbor",description:"Quick task helping someone in the community",duration:15,minParticipants:2,maxParticipants:2,difficulty:"easy",crystals:60,icon:"",type:"help_neighbor",tags:["volunteer","short","community"]},{id:"lunch_crew",title:"Lunch Crew",description:"Grab lunch together and share stories",duration:45,minParticipants:3,maxParticipants:6,difficulty:"easy",crystals:80,icon:"",type:"lunch_crew",tags:["food","social","medium"]},{id:"game_night",title:"Game Night Setup",description:"Organize a board game or video game session",duration:90,minParticipants:4,maxParticipants:8,difficulty:"hard",crystals:150,icon:"",type:"game_night",tags:["fun","long","indoor"]},{id:"morning_workout",title:"Morning Workout",description:"Start the day with group exercise",duration:40,minParticipants:2,maxParticipants:6,difficulty:"medium",crystals:90,icon:"",type:"morning_workout",tags:["fitness","morning","outdoor"]},{id:"art_cafe",title:"Art Caf",description:"Creative session with drawing or crafts",duration:60,minParticipants:3,maxParticipants:5,difficulty:"medium",crystals:110,icon:"",type:"art_cafe",tags:["creative","indoor","relaxing"]}];function um(){const e=Un(),{currentHub:n}=er(),{monster:i}=Wi(),{getRecommendations:l}=Gi(),[c,f]=Y.useState([]),[g,y]=Y.useState("all"),[m,p]=Y.useState(null);Y.useEffect(()=>{const O=l();p(O);const D=am.map((k,F)=>({...k,instanceId:`quest_${k.id}_${Date.now()}_${F}`,currentParticipants:Math.floor(Math.random()*(k.minParticipants+1)),isRecommended:O.recommendedTypes.includes(k.type),startTime:null,location:"Hub Central Plaza"}));f(D)},[]);const C=c.filter(O=>g==="recommended"?O.isRecommended:g==="available"?O.currentParticipants<O.maxParticipants:!0),v=O=>{e(`/lobby/${O.instanceId}`,{state:{quest:O}})},I={easy:"text-pixel-green",medium:"text-pixel-yellow",hard:"text-pixel-pink"};return n?E.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-pixel-dark via-pixel-purple to-pixel-dark pb-20",children:[E.jsx("div",{className:"bg-pixel-dark border-b-4 border-pixel-purple p-4 sticky top-0 z-10",children:E.jsxs("div",{className:"max-w-4xl mx-auto",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[E.jsx("button",{onClick:()=>e("/hub"),className:"text-pixel-light hover:text-pixel-yellow",children:E.jsx("span",{className:"text-2xl",children:""})}),E.jsx("h1",{className:"font-pixel text-sm md:text-base text-pixel-yellow",children:"Quest Board"})]}),E.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:["all","recommended","available"].map(O=>E.jsxs("button",{onClick:()=>y(O),className:`
                  px-4 py-2 rounded font-game text-xs whitespace-nowrap
                  ${g===O?"bg-pixel-yellow text-pixel-dark":"bg-pixel-purple text-pixel-light hover:bg-pixel-blue"}
                `,children:[O==="all"&&" All Quests",O==="recommended"&&" For You",O==="available"&&" Open Now"]},O))})]})}),E.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[m&&g==="all"&&E.jsxs("div",{className:"pixel-card p-4 mb-6 bg-pixel-blue bg-opacity-20",children:[E.jsx("h3",{className:"font-pixel text-xs text-pixel-yellow mb-2",children:" Your Profile"}),E.jsxs("div",{className:"font-game text-sm text-pixel-light space-y-1",children:[E.jsxs("p",{children:[" Crystals: ",i.crystals]}),E.jsxs("p",{children:[" Quests Completed: ",i.questsCompleted]}),E.jsxs("p",{children:[" Preferred Group Size: ",m.recommendedGroupSize]}),E.jsxs("p",{children:[" Best Time: ",m.bestTimeOfDay]})]})]}),E.jsx("div",{className:"space-y-4",children:C.map(O=>E.jsxs("div",{className:`
                pixel-card p-5 transition-all hover:border-pixel-blue
                ${O.isRecommended?"border-pixel-yellow bg-pixel-yellow bg-opacity-5":""}
              `,children:[E.jsx("div",{className:"flex justify-between items-start mb-3",children:E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:"text-4xl",children:O.icon}),E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[E.jsx("h3",{className:"font-pixel text-sm text-pixel-light",children:O.title}),O.isRecommended&&E.jsx("span",{className:"text-xs px-2 py-1 bg-pixel-yellow text-pixel-dark rounded font-game",children:"FOR YOU"})]}),E.jsx("p",{className:"text-xs text-pixel-blue font-game",children:O.description})]})]})}),E.jsxs("div",{className:"flex flex-wrap gap-2 mb-3 text-xs font-game",children:[E.jsxs("span",{className:"text-pixel-green",children:[" ",O.duration," min"]}),E.jsxs("span",{className:"text-pixel-pink",children:[" ",O.currentParticipants,"/",O.maxParticipants]}),E.jsxs("span",{className:I[O.difficulty],children:[" ",O.difficulty]}),E.jsxs("span",{className:"text-pixel-yellow",children:[" ",O.crystals]})]}),E.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:O.tags.map(D=>E.jsx("span",{className:"px-2 py-1 bg-pixel-purple bg-opacity-30 text-pixel-light text-xs rounded font-game",children:D},D))}),E.jsxs("p",{className:"text-xs text-pixel-blue font-game mb-4",children:[" ",O.location]}),E.jsx("button",{onClick:()=>v(O),className:"pixel-button bg-pixel-green hover:bg-pixel-yellow text-pixel-dark w-full py-3 text-sm",disabled:O.currentParticipants>=O.maxParticipants,children:O.currentParticipants>=O.maxParticipants?" Quest Full":" Join Quest"})]},O.instanceId))}),C.length===0&&E.jsxs("div",{className:"pixel-card p-8 text-center",children:[E.jsx("p",{className:"text-4xl mb-4",children:""}),E.jsx("p",{className:"font-game text-pixel-light",children:"No quests available with this filter"}),E.jsx("button",{onClick:()=>y("all"),className:"pixel-button bg-pixel-blue text-white mt-4",children:"View All Quests"})]}),E.jsx("div",{className:"mt-6 pixel-card p-4 bg-pixel-purple bg-opacity-20",children:E.jsx("p",{className:"text-xs text-pixel-light font-game text-center",children:" Complete quests with others to earn more crystals and evolve your monster!"})})]}),E.jsx(Ul,{})]}):(e("/hub-selection"),null)}const dh=no(jl(e=>({messages:[],conversations:[],currentConversationId:null,onlineUsers:[],questParticipants:[],sendMessage:n=>e(i=>{const l=i.currentConversationId||`conv_${Date.now()}`,c={id:`msg_${Date.now()}`,conversationId:l,userId:n.userId,userName:n.userName,userAvatar:n.userAvatar,text:n.text,timestamp:new Date().toISOString(),read:!1},f=[...i.messages,c],g=i.conversations.findIndex(m=>m.id===l);let y=i.conversations;return g>=0?y=i.conversations.map(m=>m.id===l?{...m,lastMessage:c.text,lastMessageTime:c.timestamp,unreadCount:0}:m):y=[...i.conversations,{id:l,name:n.conversationName||"Hub Chat",members:[n.userId],lastMessage:c.text,lastMessageTime:c.timestamp,unreadCount:0,createdAt:new Date().toISOString()}],{messages:f,conversations:y,currentConversationId:l}}),getConversationMessages:n=>e(i=>({currentConversationId:n})),setOnlineUsers:n=>e({onlineUsers:n}),addQuestParticipants:(n,i,l)=>e(c=>c.conversations.find(y=>y.questId===n)?c:{conversations:[{id:`quest_${n}`,questId:n,name:`${i} Team`,members:l.map(y=>y.id),memberDetails:l,lastMessage:"",lastMessageTime:new Date().toISOString(),unreadCount:0,createdAt:new Date().toISOString(),isQuest:!0},...c.conversations],questParticipants:[...c.questParticipants,{questId:n,questName:i,participants:l,timestamp:Date.now()}]}),setCurrentConversation:n=>e({currentConversationId:n}),markAsRead:n=>e(i=>({conversations:i.conversations.map(l=>l.id===n?{...l,unreadCount:0}:l)})),createGroupConversation:(n,i)=>e(l=>({conversations:[...l.conversations,{id:`conv_${Date.now()}`,name:n,members:i,lastMessage:"",lastMessageTime:new Date().toISOString(),unreadCount:0,createdAt:new Date().toISOString(),isGroup:!0}]})),deleteMessage:n=>e(i=>({messages:i.messages.filter(l=>l.id!==n)})),clearChat:()=>e({messages:[],conversations:[],currentConversationId:null})}),{name:"karmaloop-chat"}));function cm(){var q;const e=Un(),{questId:n}=eh(),l=(q=Hi().state)==null?void 0:q.quest,{user:c}=er(),{monster:f}=Wi(),{trackQuestStart:g}=Gi(),{addQuestParticipants:y}=dh(),[m,p]=Y.useState([]),[C,v]=Y.useState(!1),[I,O]=Y.useState(!1),[D,k]=Y.useState(null),[F,M]=Y.useState(null);Y.useEffect(()=>{if(!l){e("/quests");return}g(n,l.type);const z={id:c.id,name:c.name,monster:f,isReady:!1,isHost:!0};p([z]);const L=setInterval(()=>{p(Q=>{if(Q.length<l.maxParticipants&&Math.random()>.3){const X={id:`user_${Date.now()}_${Math.random()}`,name:`Player${Math.floor(Math.random()*100)}`,monster:{evolution:["baby","teen","adult"][Math.floor(Math.random()*3)],level:Math.floor(Math.random()*10)+1,activeSkin:"default"},isReady:Math.random()>.5,isHost:!1};return[...Q,X]}return Q})},3e3);return()=>clearInterval(L)},[l,n,c,f,g,e]),Y.useEffect(()=>{const z=m.length>=l.minParticipants&&m.every(L=>L.isReady||L.id===c.id&&C);if(O(z),z&&!D){m.length>0&&y(n,l.title,m.map(X=>({id:X.id,name:X.name,avatar:X.id===c.id?c.picture:null})));let L=5;k(L);const Q=setInterval(()=>{L--,k(L),L===0&&(clearInterval(Q),e(`/checkin/${n}`,{state:{quest:l,participants:m}}))},1e3)}},[m,C,l,n,c.id,c.picture,D,e,y]);const b=()=>{v(!C),p(z=>z.map(L=>L.id===c.id?{...L,isReady:!C}:L))},T=()=>{e("/quests")},j=z=>{M(z),setTimeout(()=>M(null),2e3)};return l?E.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-pixel-dark via-pixel-purple to-pixel-dark pb-20",children:[E.jsx("div",{className:"bg-pixel-dark border-b-4 border-pixel-purple p-4 sticky top-0 z-10",children:E.jsx("div",{className:"max-w-4xl mx-auto",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsxs("h1",{className:"font-pixel text-sm md:text-base text-pixel-yellow flex items-center gap-2",children:[E.jsx("span",{children:l.icon}),l.title," Lobby"]}),E.jsxs("p",{className:"text-xs text-pixel-light font-game mt-1",children:[m.length,"/",l.maxParticipants," participants"]})]}),E.jsx("button",{onClick:T,className:"text-pixel-pink hover:text-pixel-light text-sm font-game",children:"Leave"})]})})}),E.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[D!==null&&E.jsxs("div",{className:"pixel-card p-6 mb-6 bg-pixel-green bg-opacity-90 text-center animate-pulse",children:[E.jsx("p",{className:"font-pixel text-2xl text-white mb-2",children:D}),E.jsx("p",{className:"font-game text-white",children:"Starting quest..."})]}),E.jsxs("div",{className:"pixel-card p-5 mb-6 bg-pixel-blue bg-opacity-20",children:[E.jsx("div",{className:"flex justify-between items-start mb-3",children:E.jsxs("div",{children:[E.jsx("p",{className:"text-sm font-game text-pixel-light mb-2",children:l.description}),E.jsxs("div",{className:"flex gap-3 text-xs font-game",children:[E.jsxs("span",{className:"text-pixel-green",children:[" ",l.duration," min"]}),E.jsxs("span",{className:"text-pixel-yellow",children:[" ",l.crystals," crystals"]})]})]})}),E.jsxs("p",{className:"text-xs text-pixel-blue font-game",children:[" ",l.location]})]}),E.jsxs("div",{className:"pixel-card min-h-[300px] bg-gradient-to-b from-pixel-purple to-pixel-dark bg-opacity-30 p-6 mb-6 relative overflow-hidden",children:[E.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 text-4xl animate-pulse-slow",children:""}),E.jsx("div",{className:"relative h-full flex items-center justify-center",children:E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-8 mt-8",children:m.map((z,L)=>{var Q;return E.jsxs("div",{className:"text-center relative",style:{animation:`float ${2+L*.5}s ease-in-out infinite`},children:[z.id===c.id&&F&&E.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 text-3xl animate-emote-pop z-10",children:F}),E.jsx(Zs,{evolution:z.monster.evolution,size:"medium",animated:!0,isPlayer:z.id===c.id,skin:((Q=z.monster)==null?void 0:Q.activeSkin)||"default"}),E.jsxs("div",{className:"mt-2 pixel-card p-2 bg-pixel-dark bg-opacity-75 inline-block",children:[E.jsxs("p",{className:"font-game text-xs text-white",children:[z.name,z.id===c.id&&" (You)"]}),E.jsx("p",{className:"text-xs mt-1",children:z.isReady?E.jsx("span",{className:"text-pixel-green",children:" Ready"}):E.jsx("span",{className:"text-pixel-yellow",children:" Waiting"})})]})]},z.id)})})})]}),E.jsx("div",{className:"grid grid-cols-4 gap-3 mb-6",children:["","","",""].map(z=>E.jsx("button",{onClick:()=>j(z),className:"pixel-button bg-pixel-purple hover:bg-pixel-pink text-white py-4 text-2xl",children:z},z))}),E.jsxs("div",{className:"space-y-4",children:[m.length<l.minParticipants&&E.jsx("div",{className:"pixel-card p-4 bg-pixel-yellow bg-opacity-20 text-center",children:E.jsxs("p",{className:"font-game text-pixel-yellow",children:[" Waiting for ",l.minParticipants-m.length," more player(s)"]})}),E.jsx("button",{onClick:b,className:`
              pixel-button w-full py-6 text-base
              ${C?"bg-pixel-green text-white":"bg-pixel-blue hover:bg-pixel-green text-white"}
            `,children:C?" Ready!":" I'm Ready"}),I&&!D&&E.jsx("div",{className:"pixel-card p-4 bg-pixel-green bg-opacity-20 text-center animate-pulse",children:E.jsx("p",{className:"font-game text-pixel-green",children:" All players ready! Quest starting soon..."})})]}),E.jsx("div",{className:"mt-6 pixel-card p-4 bg-pixel-purple bg-opacity-20",children:E.jsx("p",{className:"text-xs text-pixel-light font-game text-center",children:" Once everyone is ready, you'll receive the meeting location and QR check-in code"})})]})]}):null}var fm=Object.defineProperty,ml=Object.getOwnPropertySymbols,hh=Object.prototype.hasOwnProperty,xh=Object.prototype.propertyIsEnumerable,y0=(e,n,i)=>n in e?fm(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,dm=(e,n)=>{for(var i in n||(n={}))hh.call(n,i)&&y0(e,i,n[i]);if(ml)for(var i of ml(n))xh.call(n,i)&&y0(e,i,n[i]);return e},hm=(e,n)=>{var i={};for(var l in e)hh.call(e,l)&&n.indexOf(l)<0&&(i[l]=e[l]);if(e!=null&&ml)for(var l of ml(e))n.indexOf(l)<0&&xh.call(e,l)&&(i[l]=e[l]);return i};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Jr;(e=>{const n=class{constructor(m,p,C,v){if(this.version=m,this.errorCorrectionLevel=p,this.modules=[],this.isFunction=[],m<n.MIN_VERSION||m>n.MAX_VERSION)throw new RangeError("Version value out of range");if(v<-1||v>7)throw new RangeError("Mask value out of range");this.size=m*4+17;let I=[];for(let D=0;D<this.size;D++)I.push(!1);for(let D=0;D<this.size;D++)this.modules.push(I.slice()),this.isFunction.push(I.slice());this.drawFunctionPatterns();const O=this.addEccAndInterleave(C);if(this.drawCodewords(O),v==-1){let D=1e9;for(let k=0;k<8;k++){this.applyMask(k),this.drawFormatBits(k);const F=this.getPenaltyScore();F<D&&(v=k,D=F),this.applyMask(k)}}f(0<=v&&v<=7),this.mask=v,this.applyMask(v),this.drawFormatBits(v),this.isFunction=[]}static encodeText(m,p){const C=e.QrSegment.makeSegments(m);return n.encodeSegments(C,p)}static encodeBinary(m,p){const C=e.QrSegment.makeBytes(m);return n.encodeSegments([C],p)}static encodeSegments(m,p,C=1,v=40,I=-1,O=!0){if(!(n.MIN_VERSION<=C&&C<=v&&v<=n.MAX_VERSION)||I<-1||I>7)throw new RangeError("Invalid value");let D,k;for(D=C;;D++){const T=n.getNumDataCodewords(D,p)*8,j=y.getTotalBits(m,D);if(j<=T){k=j;break}if(D>=v)throw new RangeError("Data too long")}for(const T of[n.Ecc.MEDIUM,n.Ecc.QUARTILE,n.Ecc.HIGH])O&&k<=n.getNumDataCodewords(D,T)*8&&(p=T);let F=[];for(const T of m){l(T.mode.modeBits,4,F),l(T.numChars,T.mode.numCharCountBits(D),F);for(const j of T.getData())F.push(j)}f(F.length==k);const M=n.getNumDataCodewords(D,p)*8;f(F.length<=M),l(0,Math.min(4,M-F.length),F),l(0,(8-F.length%8)%8,F),f(F.length%8==0);for(let T=236;F.length<M;T^=253)l(T,8,F);let b=[];for(;b.length*8<F.length;)b.push(0);return F.forEach((T,j)=>b[j>>>3]|=T<<7-(j&7)),new n(D,p,b,I)}getModule(m,p){return 0<=m&&m<this.size&&0<=p&&p<this.size&&this.modules[p][m]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const m=this.getAlignmentPatternPositions(),p=m.length;for(let C=0;C<p;C++)for(let v=0;v<p;v++)C==0&&v==0||C==0&&v==p-1||C==p-1&&v==0||this.drawAlignmentPattern(m[C],m[v]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(m){const p=this.errorCorrectionLevel.formatBits<<3|m;let C=p;for(let I=0;I<10;I++)C=C<<1^(C>>>9)*1335;const v=(p<<10|C)^21522;f(v>>>15==0);for(let I=0;I<=5;I++)this.setFunctionModule(8,I,c(v,I));this.setFunctionModule(8,7,c(v,6)),this.setFunctionModule(8,8,c(v,7)),this.setFunctionModule(7,8,c(v,8));for(let I=9;I<15;I++)this.setFunctionModule(14-I,8,c(v,I));for(let I=0;I<8;I++)this.setFunctionModule(this.size-1-I,8,c(v,I));for(let I=8;I<15;I++)this.setFunctionModule(8,this.size-15+I,c(v,I));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let m=this.version;for(let C=0;C<12;C++)m=m<<1^(m>>>11)*7973;const p=this.version<<12|m;f(p>>>18==0);for(let C=0;C<18;C++){const v=c(p,C),I=this.size-11+C%3,O=Math.floor(C/3);this.setFunctionModule(I,O,v),this.setFunctionModule(O,I,v)}}drawFinderPattern(m,p){for(let C=-4;C<=4;C++)for(let v=-4;v<=4;v++){const I=Math.max(Math.abs(v),Math.abs(C)),O=m+v,D=p+C;0<=O&&O<this.size&&0<=D&&D<this.size&&this.setFunctionModule(O,D,I!=2&&I!=4)}}drawAlignmentPattern(m,p){for(let C=-2;C<=2;C++)for(let v=-2;v<=2;v++)this.setFunctionModule(m+v,p+C,Math.max(Math.abs(v),Math.abs(C))!=1)}setFunctionModule(m,p,C){this.modules[p][m]=C,this.isFunction[p][m]=!0}addEccAndInterleave(m){const p=this.version,C=this.errorCorrectionLevel;if(m.length!=n.getNumDataCodewords(p,C))throw new RangeError("Invalid argument");const v=n.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][p],I=n.ECC_CODEWORDS_PER_BLOCK[C.ordinal][p],O=Math.floor(n.getNumRawDataModules(p)/8),D=v-O%v,k=Math.floor(O/v);let F=[];const M=n.reedSolomonComputeDivisor(I);for(let T=0,j=0;T<v;T++){let q=m.slice(j,j+k-I+(T<D?0:1));j+=q.length;const z=n.reedSolomonComputeRemainder(q,M);T<D&&q.push(0),F.push(q.concat(z))}let b=[];for(let T=0;T<F[0].length;T++)F.forEach((j,q)=>{(T!=k-I||q>=D)&&b.push(j[T])});return f(b.length==O),b}drawCodewords(m){if(m.length!=Math.floor(n.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let p=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let v=0;v<this.size;v++)for(let I=0;I<2;I++){const O=C-I,k=(C+1&2)==0?this.size-1-v:v;!this.isFunction[k][O]&&p<m.length*8&&(this.modules[k][O]=c(m[p>>>3],7-(p&7)),p++)}}f(p==m.length*8)}applyMask(m){if(m<0||m>7)throw new RangeError("Mask value out of range");for(let p=0;p<this.size;p++)for(let C=0;C<this.size;C++){let v;switch(m){case 0:v=(C+p)%2==0;break;case 1:v=p%2==0;break;case 2:v=C%3==0;break;case 3:v=(C+p)%3==0;break;case 4:v=(Math.floor(C/3)+Math.floor(p/2))%2==0;break;case 5:v=C*p%2+C*p%3==0;break;case 6:v=(C*p%2+C*p%3)%2==0;break;case 7:v=((C+p)%2+C*p%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[p][C]&&v&&(this.modules[p][C]=!this.modules[p][C])}}getPenaltyScore(){let m=0;for(let I=0;I<this.size;I++){let O=!1,D=0,k=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[I][F]==O?(D++,D==5?m+=n.PENALTY_N1:D>5&&m++):(this.finderPenaltyAddHistory(D,k),O||(m+=this.finderPenaltyCountPatterns(k)*n.PENALTY_N3),O=this.modules[I][F],D=1);m+=this.finderPenaltyTerminateAndCount(O,D,k)*n.PENALTY_N3}for(let I=0;I<this.size;I++){let O=!1,D=0,k=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[F][I]==O?(D++,D==5?m+=n.PENALTY_N1:D>5&&m++):(this.finderPenaltyAddHistory(D,k),O||(m+=this.finderPenaltyCountPatterns(k)*n.PENALTY_N3),O=this.modules[F][I],D=1);m+=this.finderPenaltyTerminateAndCount(O,D,k)*n.PENALTY_N3}for(let I=0;I<this.size-1;I++)for(let O=0;O<this.size-1;O++){const D=this.modules[I][O];D==this.modules[I][O+1]&&D==this.modules[I+1][O]&&D==this.modules[I+1][O+1]&&(m+=n.PENALTY_N2)}let p=0;for(const I of this.modules)p=I.reduce((O,D)=>O+(D?1:0),p);const C=this.size*this.size,v=Math.ceil(Math.abs(p*20-C*10)/C)-1;return f(0<=v&&v<=9),m+=v*n.PENALTY_N4,f(0<=m&&m<=2568888),m}getAlignmentPatternPositions(){if(this.version==1)return[];{const m=Math.floor(this.version/7)+2,p=this.version==32?26:Math.ceil((this.version*4+4)/(m*2-2))*2;let C=[6];for(let v=this.size-7;C.length<m;v-=p)C.splice(1,0,v);return C}}static getNumRawDataModules(m){if(m<n.MIN_VERSION||m>n.MAX_VERSION)throw new RangeError("Version number out of range");let p=(16*m+128)*m+64;if(m>=2){const C=Math.floor(m/7)+2;p-=(25*C-10)*C-55,m>=7&&(p-=36)}return f(208<=p&&p<=29648),p}static getNumDataCodewords(m,p){return Math.floor(n.getNumRawDataModules(m)/8)-n.ECC_CODEWORDS_PER_BLOCK[p.ordinal][m]*n.NUM_ERROR_CORRECTION_BLOCKS[p.ordinal][m]}static reedSolomonComputeDivisor(m){if(m<1||m>255)throw new RangeError("Degree out of range");let p=[];for(let v=0;v<m-1;v++)p.push(0);p.push(1);let C=1;for(let v=0;v<m;v++){for(let I=0;I<p.length;I++)p[I]=n.reedSolomonMultiply(p[I],C),I+1<p.length&&(p[I]^=p[I+1]);C=n.reedSolomonMultiply(C,2)}return p}static reedSolomonComputeRemainder(m,p){let C=p.map(v=>0);for(const v of m){const I=v^C.shift();C.push(0),p.forEach((O,D)=>C[D]^=n.reedSolomonMultiply(O,I))}return C}static reedSolomonMultiply(m,p){if(m>>>8||p>>>8)throw new RangeError("Byte out of range");let C=0;for(let v=7;v>=0;v--)C=C<<1^(C>>>7)*285,C^=(p>>>v&1)*m;return f(C>>>8==0),C}finderPenaltyCountPatterns(m){const p=m[1];f(p<=this.size*3);const C=p>0&&m[2]==p&&m[3]==p*3&&m[4]==p&&m[5]==p;return(C&&m[0]>=p*4&&m[6]>=p?1:0)+(C&&m[6]>=p*4&&m[0]>=p?1:0)}finderPenaltyTerminateAndCount(m,p,C){return m&&(this.finderPenaltyAddHistory(p,C),p=0),p+=this.size,this.finderPenaltyAddHistory(p,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(m,p){p[0]==0&&(m+=this.size),p.pop(),p.unshift(m)}};let i=n;i.MIN_VERSION=1,i.MAX_VERSION=40,i.PENALTY_N1=3,i.PENALTY_N2=3,i.PENALTY_N3=40,i.PENALTY_N4=10,i.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],i.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=i;function l(m,p,C){if(p<0||p>31||m>>>p)throw new RangeError("Value out of range");for(let v=p-1;v>=0;v--)C.push(m>>>v&1)}function c(m,p){return(m>>>p&1)!=0}function f(m){if(!m)throw new Error("Assertion error")}const g=class{constructor(m,p,C){if(this.mode=m,this.numChars=p,this.bitData=C,p<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(m){let p=[];for(const C of m)l(C,8,p);return new g(g.Mode.BYTE,m.length,p)}static makeNumeric(m){if(!g.isNumeric(m))throw new RangeError("String contains non-numeric characters");let p=[];for(let C=0;C<m.length;){const v=Math.min(m.length-C,3);l(parseInt(m.substr(C,v),10),v*3+1,p),C+=v}return new g(g.Mode.NUMERIC,m.length,p)}static makeAlphanumeric(m){if(!g.isAlphanumeric(m))throw new RangeError("String contains unencodable characters in alphanumeric mode");let p=[],C;for(C=0;C+2<=m.length;C+=2){let v=g.ALPHANUMERIC_CHARSET.indexOf(m.charAt(C))*45;v+=g.ALPHANUMERIC_CHARSET.indexOf(m.charAt(C+1)),l(v,11,p)}return C<m.length&&l(g.ALPHANUMERIC_CHARSET.indexOf(m.charAt(C)),6,p),new g(g.Mode.ALPHANUMERIC,m.length,p)}static makeSegments(m){return m==""?[]:g.isNumeric(m)?[g.makeNumeric(m)]:g.isAlphanumeric(m)?[g.makeAlphanumeric(m)]:[g.makeBytes(g.toUtf8ByteArray(m))]}static makeEci(m){let p=[];if(m<0)throw new RangeError("ECI assignment value out of range");if(m<128)l(m,8,p);else if(m<16384)l(2,2,p),l(m,14,p);else if(m<1e6)l(6,3,p),l(m,21,p);else throw new RangeError("ECI assignment value out of range");return new g(g.Mode.ECI,0,p)}static isNumeric(m){return g.NUMERIC_REGEX.test(m)}static isAlphanumeric(m){return g.ALPHANUMERIC_REGEX.test(m)}getData(){return this.bitData.slice()}static getTotalBits(m,p){let C=0;for(const v of m){const I=v.mode.numCharCountBits(p);if(v.numChars>=1<<I)return 1/0;C+=4+I+v.bitData.length}return C}static toUtf8ByteArray(m){m=encodeURI(m);let p=[];for(let C=0;C<m.length;C++)m.charAt(C)!="%"?p.push(m.charCodeAt(C)):(p.push(parseInt(m.substr(C+1,2),16)),C+=2);return p}};let y=g;y.NUMERIC_REGEX=/^[0-9]*$/,y.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,y.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=y})(Jr||(Jr={}));(e=>{(n=>{const i=class{constructor(c,f){this.ordinal=c,this.formatBits=f}};let l=i;l.LOW=new i(0,1),l.MEDIUM=new i(1,0),l.QUARTILE=new i(2,3),l.HIGH=new i(3,2),n.Ecc=l})(e.QrCode||(e.QrCode={}))})(Jr||(Jr={}));(e=>{(n=>{const i=class{constructor(c,f){this.modeBits=c,this.numBitsCharCount=f}numCharCountBits(c){return this.numBitsCharCount[Math.floor((c+7)/17)]}};let l=i;l.NUMERIC=new i(1,[10,12,14]),l.ALPHANUMERIC=new i(2,[9,11,13]),l.BYTE=new i(4,[8,16,16]),l.KANJI=new i(8,[8,10,12]),l.ECI=new i(7,[0,0,0]),n.Mode=l})(e.QrSegment||(e.QrSegment={}))})(Jr||(Jr={}));var ws=Jr;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var xm={L:ws.QrCode.Ecc.LOW,M:ws.QrCode.Ecc.MEDIUM,Q:ws.QrCode.Ecc.QUARTILE,H:ws.QrCode.Ecc.HIGH},gm=128,pm="L",mm="#FFFFFF",wm="#000000",ym=!1,gh=4,Em=.1;function Cm(e,n=0){const i=[];return e.forEach(function(l,c){let f=null;l.forEach(function(g,y){if(!g&&f!==null){i.push(`M${f+n} ${c+n}h${y-f}v1H${f+n}z`),f=null;return}if(y===l.length-1){if(!g)return;f===null?i.push(`M${y+n},${c+n} h1v1H${y+n}z`):i.push(`M${f+n},${c+n} h${y+1-f}v1H${f+n}z`);return}g&&f===null&&(f=y)})}),i.join("")}function vm(e,n){return e.slice().map((i,l)=>l<n.y||l>=n.y+n.h?i:i.map((c,f)=>f<n.x||f>=n.x+n.w?c:!1))}function Am(e,n,i,l){if(l==null)return null;const c=i?gh:0,f=e.length+c*2,g=Math.floor(n*Em),y=f/n,m=(l.width||g)*y,p=(l.height||g)*y,C=l.x==null?e.length/2-m/2:l.x*y,v=l.y==null?e.length/2-p/2:l.y*y;let I=null;if(l.excavate){let O=Math.floor(C),D=Math.floor(v),k=Math.ceil(m+C-O),F=Math.ceil(p+v-D);I={x:O,y:D,w:k,h:F}}return{x:C,y:v,h:p,w:m,excavation:I}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function Sm(e){const n=e,{value:i,size:l=gm,level:c=pm,bgColor:f=mm,fgColor:g=wm,includeMargin:y=ym,imageSettings:m}=n,p=hm(n,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let C=ws.QrCode.encodeText(i,xm[c]).getModules();const v=y?gh:0,I=C.length+v*2,O=Am(C,l,y,m);let D=null;m!=null&&O!=null&&(O.excavation!=null&&(C=vm(C,O.excavation)),D=Gn.createElement("image",{xlinkHref:m.src,height:O.h,width:O.w,x:O.x+v,y:O.y+v,preserveAspectRatio:"none"}));const k=Cm(C,v);return Gn.createElement("svg",dm({height:l,width:l,viewBox:`0 0 ${I} ${I}`},p),Gn.createElement("path",{fill:f,d:`M0,0 h${I}v${I}H0z`,shapeRendering:"crispEdges"}),Gn.createElement("path",{fill:g,d:k,shapeRendering:"crispEdges"}),D)}var le;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(le||(le={}));var E0=new Map([[le.QR_CODE,"QR_CODE"],[le.AZTEC,"AZTEC"],[le.CODABAR,"CODABAR"],[le.CODE_39,"CODE_39"],[le.CODE_93,"CODE_93"],[le.CODE_128,"CODE_128"],[le.DATA_MATRIX,"DATA_MATRIX"],[le.MAXICODE,"MAXICODE"],[le.ITF,"ITF"],[le.EAN_13,"EAN_13"],[le.EAN_8,"EAN_8"],[le.PDF_417,"PDF_417"],[le.RSS_14,"RSS_14"],[le.RSS_EXPANDED,"RSS_EXPANDED"],[le.UPC_A,"UPC_A"],[le.UPC_E,"UPC_E"],[le.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),C0;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(C0||(C0={}));function Nm(e){return Object.values(le).includes(e)}var wl;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(wl||(wl={}));var Im=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[wl.SCAN_TYPE_CAMERA,wl.SCAN_TYPE_FILE],e}(),ph=function(){function e(n,i){this.format=n,this.formatName=i}return e.prototype.toString=function(){return this.formatName},e.create=function(n){if(!E0.has(n))throw"".concat(n," not in html5QrcodeSupportedFormatsTextMap");return new e(n,E0.get(n))},e}(),v0=function(){function e(){}return e.createFromText=function(n){var i={text:n};return{decodedText:n,result:i}},e.createFromQrcodeResult=function(n){return{decodedText:n.text,result:n}},e}(),Ru;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Ru||(Ru={}));var bm=function(){function e(){}return e.createFrom=function(n){return{errorMessage:n,type:Ru.UNKWOWN_ERROR}},e}(),_m=function(){function e(n){this.verbose=n}return e.prototype.log=function(n){this.verbose&&console.log(n)},e.prototype.warn=function(n){this.verbose&&console.warn(n)},e.prototype.logError=function(n,i){(this.verbose||i===!0)&&console.error(n)},e.prototype.logErrors=function(n){if(n.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(n)},e}();function Vn(e){return typeof e>"u"||e===null}var Si=function(){function e(){}return e.codeParseError=function(n){return"QR code parse error, error = ".concat(n)},e.errorGettingUserMedia=function(n){return"Error getting userMedia, error = ".concat(n)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),mh=function(){function e(){}return e.isMediaStreamConstraintsValid=function(n,i){if(typeof n!="object"){var l=typeof n;return i.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(l,"."),!0),!1}for(var c=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],f=new Set(c),g=Object.keys(n),y=0,m=g;y<m.length;y++){var p=m[y];if(f.has(p))return i.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},e}(),Ou={exports:{}};(function(e,n){(function(i,l){l(n)})(is,function(i){function l(A){return A==null}var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,t){A.__proto__=t}||function(A,t){for(var r in t)t.hasOwnProperty(r)&&(A[r]=t[r])};function f(A,t){c(A,t);function r(){this.constructor=A}A.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function g(A,t){var r=Object.setPrototypeOf;r?r(A,t):A.__proto__=t}function y(A,t){t===void 0&&(t=A.constructor);var r=Error.captureStackTrace;r&&r(A,t)}var m=function(A){f(t,A);function t(r){var s=this.constructor,o=A.call(this,r)||this;return Object.defineProperty(o,"name",{value:s.name,enumerable:!1}),g(o,s.prototype),y(o),o}return t}(Error);class p extends m{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}p.kind="Exception";class C extends p{}C.kind="ArgumentException";class v extends p{}v.kind="IllegalArgumentException";class I{constructor(t){if(this.binarizer=t,t===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,r){return this.binarizer.getBlackRow(t,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,r,s,o){const a=this.binarizer.getLuminanceSource().crop(t,r,s,o);return new I(this.binarizer.createBinarizer(a))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new I(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new I(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class O extends p{static getChecksumInstance(){return new O}}O.kind="ChecksumException";class D{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class k{static arraycopy(t,r,s,o,a){for(;a--;)s[o++]=t[r++]}static currentTimeMillis(){return Date.now()}}class F extends p{}F.kind="IndexOutOfBoundsException";class M extends F{constructor(t=void 0,r=void 0){super(r),this.index=t,this.message=r}}M.kind="ArrayIndexOutOfBoundsException";class b{static fill(t,r){for(let s=0,o=t.length;s<o;s++)t[s]=r}static fillWithin(t,r,s,o){b.rangeCheck(t.length,r,s);for(let a=r;a<s;a++)t[a]=o}static rangeCheck(t,r,s){if(r>s)throw new v("fromIndex("+r+") > toIndex("+s+")");if(r<0)throw new M(r);if(s>t)throw new M(s)}static asList(...t){return t}static create(t,r,s){return Array.from({length:t}).map(a=>Array.from({length:r}).fill(s))}static createInt32Array(t,r,s){return Array.from({length:t}).map(a=>Int32Array.from({length:r}).fill(s))}static equals(t,r){if(!t||!r||!t.length||!r.length||t.length!==r.length)return!1;for(let s=0,o=t.length;s<o;s++)if(t[s]!==r[s])return!1;return!0}static hashCode(t){if(t===null)return 0;let r=1;for(const s of t)r=31*r+s;return r}static fillUint8Array(t,r){for(let s=0;s!==t.length;s++)t[s]=r}static copyOf(t,r){return t.slice(0,r)}static copyOfUint8Array(t,r){if(t.length<=r){const s=new Uint8Array(r);return s.set(t),s}return t.slice(0,r)}static copyOfRange(t,r,s){const o=s-r,a=new Int32Array(o);return k.arraycopy(t,r,a,0,o),a}static binarySearch(t,r,s){s===void 0&&(s=b.numberComparator);let o=0,a=t.length-1;for(;o<=a;){const u=a+o>>1,d=s(r,t[u]);if(d>0)o=u+1;else if(d<0)a=u-1;else return u}return-o-1}static numberComparator(t,r){return t-r}}class T{static numberOfTrailingZeros(t){let r;if(t===0)return 32;let s=31;return r=t<<16,r!==0&&(s-=16,t=r),r=t<<8,r!==0&&(s-=8,t=r),r=t<<4,r!==0&&(s-=4,t=r),r=t<<2,r!==0&&(s-=2,t=r),s-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let r=1;return t>>>16||(r+=16,t<<=16),t>>>24||(r+=8,t<<=8),t>>>28||(r+=4,t<<=4),t>>>30||(r+=2,t<<=2),r-=t>>>31,r}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,r){return Math.trunc(t/r)}static parseInt(t,r=void 0){return parseInt(t,r)}}T.MIN_VALUE_32_BITS=-2147483648,T.MAX_VALUE=Number.MAX_SAFE_INTEGER;class j{constructor(t,r){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,r==null?this.bits=j.makeArray(t):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const r=j.makeArray(t);k.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const r=this.size;if(t>=r)return r;const s=this.bits;let o=Math.floor(t/32),a=s[o];a&=~((1<<(t&31))-1);const u=s.length;for(;a===0;){if(++o===u)return r;a=s[o]}const d=o*32+T.numberOfTrailingZeros(a);return d>r?r:d}getNextUnset(t){const r=this.size;if(t>=r)return r;const s=this.bits;let o=Math.floor(t/32),a=~s[o];a&=~((1<<(t&31))-1);const u=s.length;for(;a===0;){if(++o===u)return r;a=~s[o]}const d=o*32+T.numberOfTrailingZeros(a);return d>r?r:d}setBulk(t,r){this.bits[Math.floor(t/32)]=r}setRange(t,r){if(r<t||t<0||r>this.size)throw new v;if(r===t)return;r--;const s=Math.floor(t/32),o=Math.floor(r/32),a=this.bits;for(let u=s;u<=o;u++){const d=u>s?0:t&31,x=(2<<(u<o?31:r&31))-(1<<d);a[u]|=x}}clear(){const t=this.bits.length,r=this.bits;for(let s=0;s<t;s++)r[s]=0}isRange(t,r,s){if(r<t||t<0||r>this.size)throw new v;if(r===t)return!0;r--;const o=Math.floor(t/32),a=Math.floor(r/32),u=this.bits;for(let d=o;d<=a;d++){const h=d>o?0:t&31,w=(2<<(d<a?31:r&31))-(1<<h)&4294967295;if((u[d]&w)!==(s?w:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,r){if(r<0||r>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let s=r;s>0;s--)this.appendBit((t>>s-1&1)===1)}appendBitArray(t){const r=t.size;this.ensureCapacity(this.size+r);for(let s=0;s<r;s++)this.appendBit(t.get(s))}xor(t){if(this.size!==t.size)throw new v("Sizes don't match");const r=this.bits;for(let s=0,o=r.length;s<o;s++)r[s]^=t.bits[s]}toBytes(t,r,s,o){for(let a=0;a<o;a++){let u=0;for(let d=0;d<8;d++)this.get(t)&&(u|=1<<7-d),t++;r[s+a]=u}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),s=r+1,o=this.bits;for(let a=0;a<s;a++){let u=o[a];u=u>>1&1431655765|(u&1431655765)<<1,u=u>>2&858993459|(u&858993459)<<2,u=u>>4&252645135|(u&252645135)<<4,u=u>>8&16711935|(u&16711935)<<8,u=u>>16&65535|(u&65535)<<16,t[r-a]=u}if(this.size!==s*32){const a=s*32-this.size;let u=t[0]>>>a;for(let d=1;d<s;d++){const h=t[d];u|=h<<32-a,t[d-1]=u,u=h>>>a}t[s-1]=u}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof j))return!1;const r=t;return this.size===r.size&&b.equals(this.bits,r.bits)}hashCode(){return 31*this.size+b.hashCode(this.bits)}toString(){let t="";for(let r=0,s=this.size;r<s;r++)r&7||(t+=" "),t+=this.get(r)?"X":".";return t}clone(){return new j(this.size,this.bits.slice())}}var q;(function(A){A[A.OTHER=0]="OTHER",A[A.PURE_BARCODE=1]="PURE_BARCODE",A[A.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",A[A.TRY_HARDER=3]="TRY_HARDER",A[A.CHARACTER_SET=4]="CHARACTER_SET",A[A.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",A[A.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",A[A.ASSUME_GS1=7]="ASSUME_GS1",A[A.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",A[A.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",A[A.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(q||(q={}));var z=q;class L extends p{static getFormatInstance(){return new L}}L.kind="FormatException";var Q;(function(A){A[A.Cp437=0]="Cp437",A[A.ISO8859_1=1]="ISO8859_1",A[A.ISO8859_2=2]="ISO8859_2",A[A.ISO8859_3=3]="ISO8859_3",A[A.ISO8859_4=4]="ISO8859_4",A[A.ISO8859_5=5]="ISO8859_5",A[A.ISO8859_6=6]="ISO8859_6",A[A.ISO8859_7=7]="ISO8859_7",A[A.ISO8859_8=8]="ISO8859_8",A[A.ISO8859_9=9]="ISO8859_9",A[A.ISO8859_10=10]="ISO8859_10",A[A.ISO8859_11=11]="ISO8859_11",A[A.ISO8859_13=12]="ISO8859_13",A[A.ISO8859_14=13]="ISO8859_14",A[A.ISO8859_15=14]="ISO8859_15",A[A.ISO8859_16=15]="ISO8859_16",A[A.SJIS=16]="SJIS",A[A.Cp1250=17]="Cp1250",A[A.Cp1251=18]="Cp1251",A[A.Cp1252=19]="Cp1252",A[A.Cp1256=20]="Cp1256",A[A.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",A[A.UTF8=22]="UTF8",A[A.ASCII=23]="ASCII",A[A.Big5=24]="Big5",A[A.GB18030=25]="GB18030",A[A.EUC_KR=26]="EUC_KR"})(Q||(Q={}));class X{constructor(t,r,s,...o){this.valueIdentifier=t,this.name=s,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,X.VALUE_IDENTIFIER_TO_ECI.set(t,this),X.NAME_TO_ECI.set(s,this);const a=this.values;for(let u=0,d=a.length;u!==d;u++){const h=a[u];X.VALUES_TO_ECI.set(h,this)}for(const u of o)X.NAME_TO_ECI.set(u,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new L("incorect value");const r=X.VALUES_TO_ECI.get(t);if(r===void 0)throw new L("incorect value");return r}static getCharacterSetECIByName(t){const r=X.NAME_TO_ECI.get(t);if(r===void 0)throw new L("incorect value");return r}equals(t){if(!(t instanceof X))return!1;const r=t;return this.getName()===r.getName()}}X.VALUE_IDENTIFIER_TO_ECI=new Map,X.VALUES_TO_ECI=new Map,X.NAME_TO_ECI=new Map,X.Cp437=new X(Q.Cp437,Int32Array.from([0,2]),"Cp437"),X.ISO8859_1=new X(Q.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),X.ISO8859_2=new X(Q.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),X.ISO8859_3=new X(Q.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),X.ISO8859_4=new X(Q.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),X.ISO8859_5=new X(Q.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),X.ISO8859_6=new X(Q.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),X.ISO8859_7=new X(Q.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),X.ISO8859_8=new X(Q.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),X.ISO8859_9=new X(Q.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),X.ISO8859_10=new X(Q.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),X.ISO8859_11=new X(Q.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),X.ISO8859_13=new X(Q.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),X.ISO8859_14=new X(Q.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),X.ISO8859_15=new X(Q.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),X.ISO8859_16=new X(Q.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),X.SJIS=new X(Q.SJIS,20,"SJIS","Shift_JIS"),X.Cp1250=new X(Q.Cp1250,21,"Cp1250","windows-1250"),X.Cp1251=new X(Q.Cp1251,22,"Cp1251","windows-1251"),X.Cp1252=new X(Q.Cp1252,23,"Cp1252","windows-1252"),X.Cp1256=new X(Q.Cp1256,24,"Cp1256","windows-1256"),X.UnicodeBigUnmarked=new X(Q.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),X.UTF8=new X(Q.UTF8,26,"UTF8","UTF-8"),X.ASCII=new X(Q.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),X.Big5=new X(Q.Big5,28,"Big5"),X.GB18030=new X(Q.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),X.EUC_KR=new X(Q.EUC_KR,30,"EUC_KR","EUC-KR");class he extends p{}he.kind="UnsupportedOperationException";class Se{static decode(t,r){const s=this.encodingName(r);return this.customDecoder?this.customDecoder(t,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(t,s):new TextDecoder(s).decode(t)}static shouldDecodeOnFallback(t){return!Se.isBrowser()&&t==="ISO-8859-1"}static encode(t,r){const s=this.encodingName(r);return this.customEncoder?this.customEncoder(t,s):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof X?t:X.getCharacterSetECIByName(t)}static decodeFallback(t,r){const s=this.encodingCharacterSet(r);if(Se.isDecodeFallbackSupported(s)){let o="";for(let a=0,u=t.length;a<u;a++){let d=t[a].toString(16);d.length<2&&(d="0"+d),o+="%"+d}return decodeURIComponent(o)}if(s.equals(X.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new he(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(X.UTF8)||t.equals(X.ISO8859_1)||t.equals(X.ASCII)}static encodeFallback(t){const s=btoa(unescape(encodeURIComponent(t))).split(""),o=[];for(let a=0;a<s.length;a++)o.push(s[a].charCodeAt(0));return new Uint8Array(o)}}class re{static castAsNonUtf8Char(t,r=null){const s=r?r.getName():this.ISO88591;return Se.decode(new Uint8Array([t]),s)}static guessEncoding(t,r){if(r!=null&&r.get(z.CHARACTER_SET)!==void 0)return r.get(z.CHARACTER_SET).toString();const s=t.length;let o=!0,a=!0,u=!0,d=0,h=0,x=0,w=0,S=0,N=0,R=0,P=0,B=0,U=0,G=0;const ee=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let te=0;te<s&&(o||a||u);te++){const J=t[te]&255;u&&(d>0?J&128?d--:u=!1:J&128&&(J&64?(d++,J&32?(d++,J&16?(d++,J&8?u=!1:w++):x++):h++):u=!1)),o&&(J>127&&J<160?o=!1:J>159&&(J<192||J===215||J===247)&&G++),a&&(S>0?J<64||J===127||J>252?a=!1:S--:J===128||J===160||J>239?a=!1:J>160&&J<224?(N++,P=0,R++,R>B&&(B=R)):J>127?(S++,R=0,P++,P>U&&(U=P)):(R=0,P=0))}return u&&d>0&&(u=!1),a&&S>0&&(a=!1),u&&(ee||h+x+w>0)?re.UTF8:a&&(re.ASSUME_SHIFT_JIS||B>=3||U>=3)?re.SHIFT_JIS:o&&a?B===2&&N===2||G*10>=s?re.SHIFT_JIS:re.ISO88591:o?re.ISO88591:a?re.SHIFT_JIS:u?re.UTF8:re.PLATFORM_DEFAULT_ENCODING}static format(t,...r){let s=-1;function o(u,d,h,x,w,S){if(u==="%%")return"%";if(r[++s]===void 0)return;u=x?parseInt(x.substr(1)):void 0;let N=w?parseInt(w.substr(1)):void 0,R;switch(S){case"s":R=r[s];break;case"c":R=r[s][0];break;case"f":R=parseFloat(r[s]).toFixed(u);break;case"p":R=parseFloat(r[s]).toPrecision(u);break;case"e":R=parseFloat(r[s]).toExponential(u);break;case"x":R=parseInt(r[s]).toString(N||16);break;case"d":R=parseFloat(parseInt(r[s],N||10).toPrecision(u)).toFixed(0);break}R=typeof R=="object"?JSON.stringify(R):(+R).toString(N);let P=parseInt(h),B=h&&h[0]+""=="0"?"0":" ";for(;R.length<P;)R=d!==void 0?R+B:B+R;return R}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(a,o)}static getBytes(t,r){return Se.encode(t,r)}static getCharCode(t,r=0){return t.charCodeAt(r)}static getCharAt(t){return String.fromCharCode(t)}}re.SHIFT_JIS=X.SJIS.getName(),re.GB2312="GB2312",re.ISO88591=X.ISO8859_1.getName(),re.EUC_JP="EUC_JP",re.UTF8=X.UTF8.getName(),re.PLATFORM_DEFAULT_ENCODING=re.UTF8,re.ASSUME_SHIFT_JIS=!1;class K{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=re.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,r,s){for(let o=r;r<r+s;o++)this.append(t[o]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+1)}substring(t,r){return this.value.substring(t,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+r.length)}}class se{constructor(t,r,s,o){if(this.width=t,this.height=r,this.rowSize=s,this.bits=o,r==null&&(r=t),this.height=r,t<1||r<1)throw new v("Both dimensions must be greater than 0");s==null&&(s=Math.floor((t+31)/32)),this.rowSize=s,o==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const r=t.length,s=t[0].length,o=new se(s,r);for(let a=0;a<r;a++){const u=t[a];for(let d=0;d<s;d++)u[d]&&o.set(d,a)}return o}static parseFromString(t,r,s){if(t===null)throw new v("stringRepresentation cannot be null");const o=new Array(t.length);let a=0,u=0,d=-1,h=0,x=0;for(;x<t.length;)if(t.charAt(x)===`
`||t.charAt(x)==="\r"){if(a>u){if(d===-1)d=a-u;else if(a-u!==d)throw new v("row lengths do not match");u=a,h++}x++}else if(t.substring(x,x+r.length)===r)x+=r.length,o[a]=!0,a++;else if(t.substring(x,x+s.length)===s)x+=s.length,o[a]=!1,a++;else throw new v("illegal character encountered: "+t.substring(x));if(a>u){if(d===-1)d=a-u;else if(a-u!==d)throw new v("row lengths do not match");h++}const w=new se(d,h);for(let S=0;S<a;S++)o[S]&&w.set(Math.floor(S%d),Math.floor(S/d));return w}get(t,r){const s=r*this.rowSize+Math.floor(t/32);return(this.bits[s]>>>(t&31)&1)!==0}set(t,r){const s=r*this.rowSize+Math.floor(t/32);this.bits[s]|=1<<(t&31)&4294967295}unset(t,r){const s=r*this.rowSize+Math.floor(t/32);this.bits[s]&=~(1<<(t&31)&4294967295)}flip(t,r){const s=r*this.rowSize+Math.floor(t/32);this.bits[s]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new v("input matrix dimensions do not match");const r=new j(Math.floor(this.width/32)+1),s=this.rowSize,o=this.bits;for(let a=0,u=this.height;a<u;a++){const d=a*s,h=t.getRow(a,r).getBitArray();for(let x=0;x<s;x++)o[d+x]^=h[x]}}clear(){const t=this.bits,r=t.length;for(let s=0;s<r;s++)t[s]=0}setRegion(t,r,s,o){if(r<0||t<0)throw new v("Left and top must be nonnegative");if(o<1||s<1)throw new v("Height and width must be at least 1");const a=t+s,u=r+o;if(u>this.height||a>this.width)throw new v("The region must fit inside the matrix");const d=this.rowSize,h=this.bits;for(let x=r;x<u;x++){const w=x*d;for(let S=t;S<a;S++)h[w+Math.floor(S/32)]|=1<<(S&31)&4294967295}}getRow(t,r){r==null||r.getSize()<this.width?r=new j(this.width):r.clear();const s=this.rowSize,o=this.bits,a=t*s;for(let u=0;u<s;u++)r.setBulk(u*32,o[a+u]);return r}setRow(t,r){k.arraycopy(r.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),r=this.getHeight();let s=new j(t),o=new j(t);for(let a=0,u=Math.floor((r+1)/2);a<u;a++)s=this.getRow(a,s),o=this.getRow(r-1-a,o),s.reverse(),o.reverse(),this.setRow(a,o),this.setRow(r-1-a,s)}getEnclosingRectangle(){const t=this.width,r=this.height,s=this.rowSize,o=this.bits;let a=t,u=r,d=-1,h=-1;for(let x=0;x<r;x++)for(let w=0;w<s;w++){const S=o[x*s+w];if(S!==0){if(x<u&&(u=x),x>h&&(h=x),w*32<a){let N=0;for(;!(S<<31-N&4294967295);)N++;w*32+N<a&&(a=w*32+N)}if(w*32+31>d){let N=31;for(;!(S>>>N);)N--;w*32+N>d&&(d=w*32+N)}}}return d<a||h<u?null:Int32Array.from([a,u,d-a+1,h-u+1])}getTopLeftOnBit(){const t=this.rowSize,r=this.bits;let s=0;for(;s<r.length&&r[s]===0;)s++;if(s===r.length)return null;const o=s/t;let a=s%t*32;const u=r[s];let d=0;for(;!(u<<31-d&4294967295);)d++;return a+=d,Int32Array.from([a,o])}getBottomRightOnBit(){const t=this.rowSize,r=this.bits;let s=r.length-1;for(;s>=0&&r[s]===0;)s--;if(s<0)return null;const o=Math.floor(s/t);let a=Math.floor(s%t)*32;const u=r[s];let d=31;for(;!(u>>>d);)d--;return a+=d,Int32Array.from([a,o])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof se))return!1;const r=t;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&b.equals(this.bits,r.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+b.hashCode(this.bits),t}toString(t="X ",r="  ",s=`
`){return this.buildToString(t,r,s)}buildToString(t,r,s){let o=new K;for(let a=0,u=this.height;a<u;a++){for(let d=0,h=this.width;d<h;d++)o.append(this.get(d,a)?t:r);o.append(s)}return o.toString()}clone(){return new se(this.width,this.height,this.rowSize,this.bits.slice())}}class H extends p{static getNotFoundInstance(){return new H}}H.kind="NotFoundException";class Ne extends D{constructor(t){super(t),this.luminances=Ne.EMPTY,this.buckets=new Int32Array(Ne.LUMINANCE_BUCKETS)}getBlackRow(t,r){const s=this.getLuminanceSource(),o=s.getWidth();r==null||r.getSize()<o?r=new j(o):r.clear(),this.initArrays(o);const a=s.getRow(t,this.luminances),u=this.buckets;for(let h=0;h<o;h++)u[(a[h]&255)>>Ne.LUMINANCE_SHIFT]++;const d=Ne.estimateBlackPoint(u);if(o<3)for(let h=0;h<o;h++)(a[h]&255)<d&&r.set(h);else{let h=a[0]&255,x=a[1]&255;for(let w=1;w<o-1;w++){const S=a[w+1]&255;(x*4-h-S)/2<d&&r.set(w),h=x,x=S}}return r}getBlackMatrix(){const t=this.getLuminanceSource(),r=t.getWidth(),s=t.getHeight(),o=new se(r,s);this.initArrays(r);const a=this.buckets;for(let h=1;h<5;h++){const x=Math.floor(s*h/5),w=t.getRow(x,this.luminances),S=Math.floor(r*4/5);for(let N=Math.floor(r/5);N<S;N++){const R=w[N]&255;a[R>>Ne.LUMINANCE_SHIFT]++}}const u=Ne.estimateBlackPoint(a),d=t.getMatrix();for(let h=0;h<s;h++){const x=h*r;for(let w=0;w<r;w++)(d[x+w]&255)<u&&o.set(w,h)}return o}createBinarizer(t){return new Ne(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const r=this.buckets;for(let s=0;s<Ne.LUMINANCE_BUCKETS;s++)r[s]=0}static estimateBlackPoint(t){const r=t.length;let s=0,o=0,a=0;for(let w=0;w<r;w++)t[w]>a&&(o=w,a=t[w]),t[w]>s&&(s=t[w]);let u=0,d=0;for(let w=0;w<r;w++){const S=w-o,N=t[w]*S*S;N>d&&(u=w,d=N)}if(o>u){const w=o;o=u,u=w}if(u-o<=r/16)throw new H;let h=u-1,x=-1;for(let w=u-1;w>o;w--){const S=w-o,N=S*S*(u-w)*(s-t[w]);N>x&&(h=w,x=N)}return h<<Ne.LUMINANCE_SHIFT}}Ne.LUMINANCE_BITS=5,Ne.LUMINANCE_SHIFT=8-Ne.LUMINANCE_BITS,Ne.LUMINANCE_BUCKETS=1<<Ne.LUMINANCE_BITS,Ne.EMPTY=Uint8ClampedArray.from([0]);class me extends Ne{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),r=t.getWidth(),s=t.getHeight();if(r>=me.MINIMUM_DIMENSION&&s>=me.MINIMUM_DIMENSION){const o=t.getMatrix();let a=r>>me.BLOCK_SIZE_POWER;r&me.BLOCK_SIZE_MASK&&a++;let u=s>>me.BLOCK_SIZE_POWER;s&me.BLOCK_SIZE_MASK&&u++;const d=me.calculateBlackPoints(o,a,u,r,s),h=new se(r,s);me.calculateThresholdForBlock(o,a,u,r,s,d,h),this.matrix=h}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new me(t)}static calculateThresholdForBlock(t,r,s,o,a,u,d){const h=a-me.BLOCK_SIZE,x=o-me.BLOCK_SIZE;for(let w=0;w<s;w++){let S=w<<me.BLOCK_SIZE_POWER;S>h&&(S=h);const N=me.cap(w,2,s-3);for(let R=0;R<r;R++){let P=R<<me.BLOCK_SIZE_POWER;P>x&&(P=x);const B=me.cap(R,2,r-3);let U=0;for(let ee=-2;ee<=2;ee++){const te=u[N+ee];U+=te[B-2]+te[B-1]+te[B]+te[B+1]+te[B+2]}const G=U/25;me.thresholdBlock(t,P,S,G,o,d)}}}static cap(t,r,s){return t<r?r:t>s?s:t}static thresholdBlock(t,r,s,o,a,u){for(let d=0,h=s*a+r;d<me.BLOCK_SIZE;d++,h+=a)for(let x=0;x<me.BLOCK_SIZE;x++)(t[h+x]&255)<=o&&u.set(r+x,s+d)}static calculateBlackPoints(t,r,s,o,a){const u=a-me.BLOCK_SIZE,d=o-me.BLOCK_SIZE,h=new Array(s);for(let x=0;x<s;x++){h[x]=new Int32Array(r);let w=x<<me.BLOCK_SIZE_POWER;w>u&&(w=u);for(let S=0;S<r;S++){let N=S<<me.BLOCK_SIZE_POWER;N>d&&(N=d);let R=0,P=255,B=0;for(let G=0,ee=w*o+N;G<me.BLOCK_SIZE;G++,ee+=o){for(let te=0;te<me.BLOCK_SIZE;te++){const J=t[ee+te]&255;R+=J,J<P&&(P=J),J>B&&(B=J)}if(B-P>me.MIN_DYNAMIC_RANGE)for(G++,ee+=o;G<me.BLOCK_SIZE;G++,ee+=o)for(let te=0;te<me.BLOCK_SIZE;te++)R+=t[ee+te]&255}let U=R>>me.BLOCK_SIZE_POWER*2;if(B-P<=me.MIN_DYNAMIC_RANGE&&(U=P/2,x>0&&S>0)){const G=(h[x-1][S]+2*h[x][S-1]+h[x-1][S-1])/4;P<G&&(U=G)}h[x][S]=U}}return h}}me.BLOCK_SIZE_POWER=3,me.BLOCK_SIZE=1<<me.BLOCK_SIZE_POWER,me.BLOCK_SIZE_MASK=me.BLOCK_SIZE-1,me.MINIMUM_DIMENSION=me.BLOCK_SIZE*5,me.MIN_DYNAMIC_RANGE=24;class ie{constructor(t,r){this.width=t,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,r,s,o){throw new he("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new he("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new he("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let r=new K;for(let s=0;s<this.height;s++){const o=this.getRow(s,t);for(let a=0;a<this.width;a++){const u=o[a]&255;let d;u<64?d="#":u<128?d="+":u<192?d=".":d=" ",r.append(d)}r.append(`
`)}return r.toString()}}class ge extends ie{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,r){const s=this.delegate.getRow(t,r),o=this.getWidth();for(let a=0;a<o;a++)s[a]=255-(s[a]&255);return s}getMatrix(){const t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),s=new Uint8ClampedArray(r);for(let o=0;o<r;o++)s[o]=255-(t[o]&255);return s}isCropSupported(){return this.delegate.isCropSupported()}crop(t,r,s,o){return new ge(this.delegate.crop(t,r,s,o))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ge(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ge(this.delegate.rotateCounterClockwise45())}}class we extends ie{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=we.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const r=t.getContext("2d").getImageData(0,0,t.width,t.height);return we.toGrayscaleBuffer(r.data,t.width,t.height)}static toGrayscaleBuffer(t,r,s){const o=new Uint8ClampedArray(r*s);for(let a=0,u=0,d=t.length;a<d;a+=4,u++){let h;if(t[a+3]===0)h=255;else{const w=t[a],S=t[a+1],N=t[a+2];h=306*w+601*S+117*N+512>>10}o[u]=h}return o}getRow(t,r){if(t<0||t>=this.getHeight())throw new v("Requested row is outside the image: "+t);const s=this.getWidth(),o=t*s;return r===null?r=this.buffer.slice(o,o+s):(r.length<s&&(r=new Uint8ClampedArray(s)),r.set(this.buffer.slice(o,o+s))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,r,s,o){return super.crop(t,r,s,o),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const r=this.getTempCanvasElement(),s=r.getContext("2d"),o=t*we.DEGREE_TO_RADIANS,a=this.canvas.width,u=this.canvas.height,d=Math.ceil(Math.abs(Math.cos(o))*a+Math.abs(Math.sin(o))*u),h=Math.ceil(Math.abs(Math.sin(o))*a+Math.abs(Math.cos(o))*u);return r.width=d,r.height=h,s.translate(d/2,h/2),s.rotate(o),s.drawImage(this.canvas,a/-2,u/-2),this.buffer=we.makeBufferFromCanvasImageData(r),this}invert(){return new ge(this)}}we.DEGREE_TO_RADIANS=Math.PI/180;class Xe{constructor(t,r,s){this.deviceId=t,this.label=r,this.kind="videoinput",this.groupId=s||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var be=(globalThis||is||self||window||void 0)&&(globalThis||is||self||window||void 0).__awaiter||function(A,t,r,s){function o(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function d(w){try{x(s.next(w))}catch(S){u(S)}}function h(w){try{x(s.throw(w))}catch(S){u(S)}}function x(w){w.done?a(w.value):o(w.value).then(d,h)}x((s=s.apply(A,t||[])).next())})};class on{constructor(t,r=500,s){this.reader=t,this.timeBetweenScansMillis=r,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return be(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const s of t){const o=s.kind==="video"?"videoinput":s.kind;if(o!=="videoinput")continue;const a=s.deviceId||s.id,u=s.label||`Video device ${r.length+1}`,d=s.groupId,h={deviceId:a,label:u,kind:o,groupId:d};r.push(h)}return r})}getVideoInputDevices(){return be(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new Xe(r.deviceId,r.label))})}findDeviceById(t){return be(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(s=>s.deviceId===t):null})}decodeFromInputVideoDevice(t,r){return be(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,r)})}decodeOnceFromVideoDevice(t,r){return be(this,void 0,void 0,function*(){this.reset();let s;t?s={deviceId:{exact:t}}:s={facingMode:"environment"};const o={video:s};return yield this.decodeOnceFromConstraints(o,r)})}decodeOnceFromConstraints(t,r){return be(this,void 0,void 0,function*(){const s=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(s,r)})}decodeOnceFromStream(t,r){return be(this,void 0,void 0,function*(){this.reset();const s=yield this.attachStreamToVideo(t,r);return yield this.decodeOnce(s)})}decodeFromInputVideoDeviceContinuously(t,r,s){return be(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,r,s)})}decodeFromVideoDevice(t,r,s){return be(this,void 0,void 0,function*(){let o;t?o={deviceId:{exact:t}}:o={facingMode:"environment"};const a={video:o};return yield this.decodeFromConstraints(a,r,s)})}decodeFromConstraints(t,r,s){return be(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(o,r,s)})}decodeFromStream(t,r,s){return be(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(t,r);return yield this.decodeContinuously(o,s)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,r){return be(this,void 0,void 0,function*(){const s=this.prepareVideoElement(r);return this.addVideoSource(s,t),this.videoElement=s,this.stream=t,yield this.playVideoOnLoadAsync(s),s})}playVideoOnLoadAsync(t){return new Promise((r,s)=>this.playVideoOnLoad(t,()=>r()))}playVideoOnLoad(t,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",r),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return be(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,r){const s=document.getElementById(t);if(!s)throw new C(`element with id '${t}' not found`);if(s.nodeName.toLowerCase()!==r.toLowerCase())throw new C(`element with id '${t}' must be an ${r} element`);return s}decodeFromImage(t,r){if(!t&&!r)throw new C("either imageElement with a src set or an url must be provided");return r&&!t?this.decodeFromImageUrl(r):this.decodeFromImageElement(t)}decodeFromVideo(t,r){if(!t&&!r)throw new C("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,r,s){if(t===void 0&&r===void 0)throw new C("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrlContinuously(r,s):this.decodeFromVideoElementContinuously(t,s)}decodeFromImageElement(t){if(!t)throw new C("An image element must be provided.");this.reset();const r=this.prepareImageElement(t);this.imageElement=r;let s;return this.isImageLoaded(r)?s=this.decodeOnce(r,!1,!0):s=this._decodeOnLoadImage(r),s}decodeFromVideoElement(t){const r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(t,r){const s=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(s,r)}_decodeFromVideoElementSetup(t){if(!t)throw new C("A video element must be provided.");this.reset();const r=this.prepareVideoElement(t);return this.videoElement=r,r}decodeFromImageUrl(t){if(!t)throw new C("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const s=this._decodeOnLoadImage(r);return r.src=t,s}decodeFromVideoUrl(t){if(!t)throw new C("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),s=this.decodeFromVideoElement(r);return r.src=t,s}decodeFromVideoUrlContinuously(t,r){if(!t)throw new C("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),o=this.decodeFromVideoElementContinuously(s,r);return s.src=t,o}_decodeOnLoadImage(t){return new Promise((r,s)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(r,s),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return be(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,r){return be(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,r)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let r;return typeof t>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(r=t),r}prepareVideoElement(t){let r;return!t&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(r=t),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(t,r=!0,s=!0){this._stopAsyncDecode=!1;const o=(a,u)=>{if(this._stopAsyncDecode){u(new H("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const d=this.decode(t);a(d)}catch(d){const h=r&&d instanceof H,w=(d instanceof O||d instanceof L)&&s;if(h||w)return setTimeout(o,this._timeBetweenDecodingAttempts,a,u);u(d)}};return new Promise((a,u)=>o(a,u))}decodeContinuously(t,r){this._stopContinuousDecode=!1;const s=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const o=this.decode(t);r(o,null),setTimeout(s,this.timeBetweenScansMillis)}catch(o){r(null,o);const a=o instanceof O||o instanceof L,u=o instanceof H;(a||u)&&setTimeout(s,this._timeBetweenDecodingAttempts)}};s()}decode(t){const r=this.createBinaryBitmap(t);return this.decodeBitmap(r)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,r,s){r||(r={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),s||(s=this.captureCanvasContext),s.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(t,r,s=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),s||(s=this.captureCanvasContext),s.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const r=this.getCaptureCanvas(t),s=new we(r),o=new me(s);return new I(o)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const s=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=s}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const r=this.createCaptureCanvas(t);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let s,o;return typeof t<"u"&&(t instanceof HTMLVideoElement?(s=t.videoWidth,o=t.videoHeight):t instanceof HTMLImageElement&&(s=t.naturalWidth||t.width,o=t.naturalHeight||t.height)),r.style.width=s+"px",r.style.height=o+"px",r.width=s,r.height=o,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,r){try{t.srcObject=r}catch{t.src=URL.createObjectURL(r)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class Qe{constructor(t,r,s=r==null?0:8*r.length,o,a,u=k.currentTimeMillis()){this.text=t,this.rawBytes=r,this.numBits=s,this.resultPoints=o,this.format=a,this.timestamp=u,this.text=t,this.rawBytes=r,s==null?this.numBits=r==null?0:8*r.length:this.numBits=s,this.resultPoints=o,this.format=a,this.resultMetadata=null,u==null?this.timestamp=k.currentTimeMillis():this.timestamp=u}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,r)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const r=this.resultPoints;if(r===null)this.resultPoints=t;else if(t!==null&&t.length>0){const s=new Array(r.length+t.length);k.arraycopy(r,0,s,0,r.length),k.arraycopy(t,0,s,r.length,t.length),this.resultPoints=s}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Or;(function(A){A[A.AZTEC=0]="AZTEC",A[A.CODABAR=1]="CODABAR",A[A.CODE_39=2]="CODE_39",A[A.CODE_93=3]="CODE_93",A[A.CODE_128=4]="CODE_128",A[A.DATA_MATRIX=5]="DATA_MATRIX",A[A.EAN_8=6]="EAN_8",A[A.EAN_13=7]="EAN_13",A[A.ITF=8]="ITF",A[A.MAXICODE=9]="MAXICODE",A[A.PDF_417=10]="PDF_417",A[A.QR_CODE=11]="QR_CODE",A[A.RSS_14=12]="RSS_14",A[A.RSS_EXPANDED=13]="RSS_EXPANDED",A[A.UPC_A=14]="UPC_A",A[A.UPC_E=15]="UPC_E",A[A.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Or||(Or={}));var ce=Or,tr;(function(A){A[A.OTHER=0]="OTHER",A[A.ORIENTATION=1]="ORIENTATION",A[A.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",A[A.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",A[A.ISSUE_NUMBER=4]="ISSUE_NUMBER",A[A.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",A[A.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",A[A.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",A[A.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",A[A.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",A[A.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(tr||(tr={}));var pt=tr;class Xi{constructor(t,r,s,o,a=-1,u=-1){this.rawBytes=t,this.text=r,this.byteSegments=s,this.ecLevel=o,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=u,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Yi{exp(t){return this.expTable[t]}log(t){if(t===0)throw new v;return this.logTable[t]}static addOrSubtract(t,r){return t^r}}class Ut{constructor(t,r){if(r.length===0)throw new v;this.field=t;const s=r.length;if(s>1&&r[0]===0){let o=1;for(;o<s&&r[o]===0;)o++;o===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-o),k.arraycopy(r,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const r=this.coefficients;let s;if(t===1){s=0;for(let u=0,d=r.length;u!==d;u++){const h=r[u];s=Yi.addOrSubtract(s,h)}return s}s=r[0];const o=r.length,a=this.field;for(let u=1;u<o;u++)s=Yi.addOrSubtract(a.multiply(t,s),r[u]);return s}addOrSubtract(t){if(!this.field.equals(t.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,s=t.coefficients;if(r.length>s.length){const u=r;r=s,s=u}let o=new Int32Array(s.length);const a=s.length-r.length;k.arraycopy(s,0,o,0,a);for(let u=a;u<s.length;u++)o[u]=Yi.addOrSubtract(r[u-a],s[u]);return new Ut(this.field,o)}multiply(t){if(!this.field.equals(t.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const r=this.coefficients,s=r.length,o=t.coefficients,a=o.length,u=new Int32Array(s+a-1),d=this.field;for(let h=0;h<s;h++){const x=r[h];for(let w=0;w<a;w++)u[h+w]=Yi.addOrSubtract(u[h+w],d.multiply(x,o[w]))}return new Ut(d,u)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const r=this.coefficients.length,s=this.field,o=new Int32Array(r),a=this.coefficients;for(let u=0;u<r;u++)o[u]=s.multiply(a[u],t);return new Ut(s,o)}multiplyByMonomial(t,r){if(t<0)throw new v;if(r===0)return this.field.getZero();const s=this.coefficients,o=s.length,a=new Int32Array(o+t),u=this.field;for(let d=0;d<o;d++)a[d]=u.multiply(s[d],r);return new Ut(u,a)}divide(t){if(!this.field.equals(t.field))throw new v("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new v("Divide by 0");const r=this.field;let s=r.getZero(),o=this;const a=t.getCoefficient(t.getDegree()),u=r.inverse(a);for(;o.getDegree()>=t.getDegree()&&!o.isZero();){const d=o.getDegree()-t.getDegree(),h=r.multiply(o.getCoefficient(o.getDegree()),u),x=t.multiplyByMonomial(d,h),w=r.buildMonomial(d,h);s=s.addOrSubtract(w),o=o.addOrSubtract(x)}return[s,o]}toString(){let t="";for(let r=this.getDegree();r>=0;r--){let s=this.getCoefficient(r);if(s!==0){if(s<0?(t+=" - ",s=-s):t.length>0&&(t+=" + "),r===0||s!==1){const o=this.field.log(s);o===0?t+="1":o===1?t+="a":(t+="a^",t+=o)}r!==0&&(r===1?t+="x":(t+="x^",t+=r))}}return t}}class ro extends p{}ro.kind="ArithmeticException";class Oe extends Yi{constructor(t,r,s){super(),this.primitive=t,this.size=r,this.generatorBase=s;const o=new Int32Array(r);let a=1;for(let d=0;d<r;d++)o[d]=a,a*=2,a>=r&&(a^=t,a&=r-1);this.expTable=o;const u=new Int32Array(r);for(let d=0;d<r-1;d++)u[o[d]]=d;this.logTable=u,this.zero=new Ut(this,Int32Array.from([0])),this.one=new Ut(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new v;if(r===0)return this.zero;const s=new Int32Array(t+1);return s[0]=r,new Ut(this,s)}inverse(t){if(t===0)throw new ro;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+T.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}Oe.AZTEC_DATA_12=new Oe(4201,4096,1),Oe.AZTEC_DATA_10=new Oe(1033,1024,1),Oe.AZTEC_DATA_6=new Oe(67,64,1),Oe.AZTEC_PARAM=new Oe(19,16,1),Oe.QR_CODE_FIELD_256=new Oe(285,256,0),Oe.DATA_MATRIX_FIELD_256=new Oe(301,256,1),Oe.AZTEC_DATA_8=Oe.DATA_MATRIX_FIELD_256,Oe.MAXICODE_FIELD_64=Oe.AZTEC_DATA_6;class ti extends p{}ti.kind="ReedSolomonException";class bn extends p{}bn.kind="IllegalStateException";class Zi{constructor(t){this.field=t}decode(t,r){const s=this.field,o=new Ut(s,t),a=new Int32Array(r);let u=!0;for(let R=0;R<r;R++){const P=o.evaluateAt(s.exp(R+s.getGeneratorBase()));a[a.length-1-R]=P,P!==0&&(u=!1)}if(u)return;const d=new Ut(s,a),h=this.runEuclideanAlgorithm(s.buildMonomial(r,1),d,r),x=h[0],w=h[1],S=this.findErrorLocations(x),N=this.findErrorMagnitudes(w,S);for(let R=0;R<S.length;R++){const P=t.length-1-s.log(S[R]);if(P<0)throw new ti("Bad error location");t[P]=Oe.addOrSubtract(t[P],N[R])}}runEuclideanAlgorithm(t,r,s){if(t.getDegree()<r.getDegree()){const R=t;t=r,r=R}const o=this.field;let a=t,u=r,d=o.getZero(),h=o.getOne();for(;u.getDegree()>=(s/2|0);){let R=a,P=d;if(a=u,d=h,a.isZero())throw new ti("r_{i-1} was zero");u=R;let B=o.getZero();const U=a.getCoefficient(a.getDegree()),G=o.inverse(U);for(;u.getDegree()>=a.getDegree()&&!u.isZero();){const ee=u.getDegree()-a.getDegree(),te=o.multiply(u.getCoefficient(u.getDegree()),G);B=B.addOrSubtract(o.buildMonomial(ee,te)),u=u.addOrSubtract(a.multiplyByMonomial(ee,te))}if(h=B.multiply(d).addOrSubtract(P),u.getDegree()>=a.getDegree())throw new bn("Division algorithm failed to reduce polynomial?")}const x=h.getCoefficient(0);if(x===0)throw new ti("sigmaTilde(0) was zero");const w=o.inverse(x),S=h.multiplyScalar(w),N=u.multiplyScalar(w);return[S,N]}findErrorLocations(t){const r=t.getDegree();if(r===1)return Int32Array.from([t.getCoefficient(1)]);const s=new Int32Array(r);let o=0;const a=this.field;for(let u=1;u<a.getSize()&&o<r;u++)t.evaluateAt(u)===0&&(s[o]=a.inverse(u),o++);if(o!==r)throw new ti("Error locator degree does not match number of roots");return s}findErrorMagnitudes(t,r){const s=r.length,o=new Int32Array(s),a=this.field;for(let u=0;u<s;u++){const d=a.inverse(r[u]);let h=1;for(let x=0;x<s;x++)if(u!==x){const w=a.multiply(r[x],d),S=w&1?w&-2:w|1;h=a.multiply(h,S)}o[u]=a.multiply(t.evaluateAt(d),a.inverse(h)),a.getGeneratorBase()!==0&&(o[u]=a.multiply(o[u],d))}return o}}var Ct;(function(A){A[A.UPPER=0]="UPPER",A[A.LOWER=1]="LOWER",A[A.MIXED=2]="MIXED",A[A.DIGIT=3]="DIGIT",A[A.PUNCT=4]="PUNCT",A[A.BINARY=5]="BINARY"})(Ct||(Ct={}));class Ue{decode(t){this.ddata=t;let r=t.getBits(),s=this.extractBits(r),o=this.correctBits(s),a=Ue.convertBoolArrayToByteArray(o),u=Ue.getEncodedData(o),d=new Xi(a,u,null,null);return d.setNumBits(o.length),d}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let r=t.length,s=Ct.UPPER,o=Ct.UPPER,a="",u=0;for(;u<r;)if(o===Ct.BINARY){if(r-u<5)break;let d=Ue.readCode(t,u,5);if(u+=5,d===0){if(r-u<11)break;d=Ue.readCode(t,u,11)+31,u+=11}for(let h=0;h<d;h++){if(r-u<8){u=r;break}const x=Ue.readCode(t,u,8);a+=re.castAsNonUtf8Char(x),u+=8}o=s}else{let d=o===Ct.DIGIT?4:5;if(r-u<d)break;let h=Ue.readCode(t,u,d);u+=d;let x=Ue.getCharacter(o,h);x.startsWith("CTRL_")?(s=o,o=Ue.getTable(x.charAt(5)),x.charAt(6)==="L"&&(s=o)):(a+=x,o=s)}return a}static getTable(t){switch(t){case"L":return Ct.LOWER;case"P":return Ct.PUNCT;case"M":return Ct.MIXED;case"D":return Ct.DIGIT;case"B":return Ct.BINARY;case"U":default:return Ct.UPPER}}static getCharacter(t,r){switch(t){case Ct.UPPER:return Ue.UPPER_TABLE[r];case Ct.LOWER:return Ue.LOWER_TABLE[r];case Ct.MIXED:return Ue.MIXED_TABLE[r];case Ct.PUNCT:return Ue.PUNCT_TABLE[r];case Ct.DIGIT:return Ue.DIGIT_TABLE[r];default:throw new bn("Bad table")}}correctBits(t){let r,s;this.ddata.getNbLayers()<=2?(s=6,r=Oe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(s=8,r=Oe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(s=10,r=Oe.AZTEC_DATA_10):(s=12,r=Oe.AZTEC_DATA_12);let o=this.ddata.getNbDatablocks(),a=t.length/s;if(a<o)throw new L;let u=t.length%s,d=new Int32Array(a);for(let N=0;N<a;N++,u+=s)d[N]=Ue.readCode(t,u,s);try{new Zi(r).decode(d,a-o)}catch(N){throw new L(N)}let h=(1<<s)-1,x=0;for(let N=0;N<o;N++){let R=d[N];if(R===0||R===h)throw new L;(R===1||R===h-1)&&x++}let w=new Array(o*s-x),S=0;for(let N=0;N<o;N++){let R=d[N];if(R===1||R===h-1)w.fill(R>1,S,S+s-1),S+=s-1;else for(let P=s-1;P>=0;--P)w[S++]=(R&1<<P)!==0}return w}extractBits(t){let r=this.ddata.isCompact(),s=this.ddata.getNbLayers(),o=(r?11:14)+s*4,a=new Int32Array(o),u=new Array(this.totalBitsInLayer(s,r));if(r)for(let d=0;d<a.length;d++)a[d]=d;else{let d=o+1+2*T.truncDivision(T.truncDivision(o,2)-1,15),h=o/2,x=T.truncDivision(d,2);for(let w=0;w<h;w++){let S=w+T.truncDivision(w,15);a[h-w-1]=x-S-1,a[h+w]=x+S+1}}for(let d=0,h=0;d<s;d++){let x=(s-d)*4+(r?9:12),w=d*2,S=o-1-w;for(let N=0;N<x;N++){let R=N*2;for(let P=0;P<2;P++)u[h+R+P]=t.get(a[w+P],a[w+N]),u[h+2*x+R+P]=t.get(a[w+N],a[S-P]),u[h+4*x+R+P]=t.get(a[S-P],a[S-N]),u[h+6*x+R+P]=t.get(a[S-N],a[w+P])}h+=x*8}return u}static readCode(t,r,s){let o=0;for(let a=r;a<r+s;a++)o<<=1,t[a]&&(o|=1);return o}static readByte(t,r){let s=t.length-r;return s>=8?Ue.readCode(t,r,8):Ue.readCode(t,r,s)<<8-s}static convertBoolArrayToByteArray(t){let r=new Uint8Array((t.length+7)/8);for(let s=0;s<r.length;s++)r[s]=Ue.readByte(t,8*s);return r}totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}Ue.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ue.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ue.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ue.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ue.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class _e{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,r,s,o){const a=t-s,u=r-o;return Math.sqrt(a*a+u*u)}static sum(t){let r=0;for(let s=0,o=t.length;s!==o;s++){const a=t[s];r+=a}return r}}class io{static floatToIntBits(t){return t}}io.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ue{constructor(t,r){this.x=t,this.y=r}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof ue){const r=t;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*io.floatToIntBits(this.x)+io.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const r=this.distance(t[0],t[1]),s=this.distance(t[1],t[2]),o=this.distance(t[0],t[2]);let a,u,d;if(s>=r&&s>=o?(u=t[0],a=t[1],d=t[2]):o>=s&&o>=r?(u=t[1],a=t[0],d=t[2]):(u=t[2],a=t[0],d=t[1]),this.crossProductZ(a,u,d)<0){const h=a;a=d,d=h}t[0]=a,t[1]=u,t[2]=d}static distance(t,r){return _e.distance(t.x,t.y,r.x,r.y)}static crossProductZ(t,r,s){const o=r.x,a=r.y;return(s.x-o)*(t.y-a)-(s.y-a)*(t.x-o)}}class so{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Tc extends so{constructor(t,r,s,o,a){super(t,r),this.compact=s,this.nbDatablocks=o,this.nbLayers=a}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class zn{constructor(t,r,s,o){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),r==null&&(r=zn.INIT_SIZE),s==null&&(s=t.getWidth()/2|0),o==null&&(o=t.getHeight()/2|0);const a=r/2|0;if(this.leftInit=s-a,this.rightInit=s+a,this.upInit=o-a,this.downInit=o+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new H}detect(){let t=this.leftInit,r=this.rightInit,s=this.upInit,o=this.downInit,a=!1,u=!0,d=!1,h=!1,x=!1,w=!1,S=!1;const N=this.width,R=this.height;for(;u;){u=!1;let P=!0;for(;(P||!h)&&r<N;)P=this.containsBlackPoint(s,o,r,!1),P?(r++,u=!0,h=!0):h||r++;if(r>=N){a=!0;break}let B=!0;for(;(B||!x)&&o<R;)B=this.containsBlackPoint(t,r,o,!0),B?(o++,u=!0,x=!0):x||o++;if(o>=R){a=!0;break}let U=!0;for(;(U||!w)&&t>=0;)U=this.containsBlackPoint(s,o,t,!1),U?(t--,u=!0,w=!0):w||t--;if(t<0){a=!0;break}let G=!0;for(;(G||!S)&&s>=0;)G=this.containsBlackPoint(t,r,s,!0),G?(s--,u=!0,S=!0):S||s--;if(s<0){a=!0;break}u&&(d=!0)}if(!a&&d){const P=r-t;let B=null;for(let te=1;B===null&&te<P;te++)B=this.getBlackPointOnSegment(t,o-te,t+te,o);if(B==null)throw new H;let U=null;for(let te=1;U===null&&te<P;te++)U=this.getBlackPointOnSegment(t,s+te,t+te,s);if(U==null)throw new H;let G=null;for(let te=1;G===null&&te<P;te++)G=this.getBlackPointOnSegment(r,s+te,r-te,s);if(G==null)throw new H;let ee=null;for(let te=1;ee===null&&te<P;te++)ee=this.getBlackPointOnSegment(r,o-te,r-te,o);if(ee==null)throw new H;return this.centerEdges(ee,B,G,U)}else throw new H}getBlackPointOnSegment(t,r,s,o){const a=_e.round(_e.distance(t,r,s,o)),u=(s-t)/a,d=(o-r)/a,h=this.image;for(let x=0;x<a;x++){const w=_e.round(t+x*u),S=_e.round(r+x*d);if(h.get(w,S))return new ue(w,S)}return null}centerEdges(t,r,s,o){const a=t.getX(),u=t.getY(),d=r.getX(),h=r.getY(),x=s.getX(),w=s.getY(),S=o.getX(),N=o.getY(),R=zn.CORR;return a<this.width/2?[new ue(S-R,N+R),new ue(d+R,h+R),new ue(x-R,w-R),new ue(a+R,u-R)]:[new ue(S+R,N+R),new ue(d+R,h-R),new ue(x-R,w+R),new ue(a-R,u-R)]}containsBlackPoint(t,r,s,o){const a=this.image;if(o){for(let u=t;u<=r;u++)if(a.get(u,s))return!0}else for(let u=t;u<=r;u++)if(a.get(s,u))return!0;return!1}}zn.INIT_SIZE=10,zn.CORR=1;class zl{static checkAndNudgePoints(t,r){const s=t.getWidth(),o=t.getHeight();let a=!0;for(let u=0;u<r.length&&a;u+=2){const d=Math.floor(r[u]),h=Math.floor(r[u+1]);if(d<-1||d>s||h<-1||h>o)throw new H;a=!1,d===-1?(r[u]=0,a=!0):d===s&&(r[u]=s-1,a=!0),h===-1?(r[u+1]=0,a=!0):h===o&&(r[u+1]=o-1,a=!0)}a=!0;for(let u=r.length-2;u>=0&&a;u-=2){const d=Math.floor(r[u]),h=Math.floor(r[u+1]);if(d<-1||d>s||h<-1||h>o)throw new H;a=!1,d===-1?(r[u]=0,a=!0):d===s&&(r[u]=s-1,a=!0),h===-1?(r[u+1]=0,a=!0):h===o&&(r[u+1]=o-1,a=!0)}}}class mn{constructor(t,r,s,o,a,u,d,h,x){this.a11=t,this.a21=r,this.a31=s,this.a12=o,this.a22=a,this.a32=u,this.a13=d,this.a23=h,this.a33=x}static quadrilateralToQuadrilateral(t,r,s,o,a,u,d,h,x,w,S,N,R,P,B,U){const G=mn.quadrilateralToSquare(t,r,s,o,a,u,d,h);return mn.squareToQuadrilateral(x,w,S,N,R,P,B,U).times(G)}transformPoints(t){const r=t.length,s=this.a11,o=this.a12,a=this.a13,u=this.a21,d=this.a22,h=this.a23,x=this.a31,w=this.a32,S=this.a33;for(let N=0;N<r;N+=2){const R=t[N],P=t[N+1],B=a*R+h*P+S;t[N]=(s*R+u*P+x)/B,t[N+1]=(o*R+d*P+w)/B}}transformPointsWithValues(t,r){const s=this.a11,o=this.a12,a=this.a13,u=this.a21,d=this.a22,h=this.a23,x=this.a31,w=this.a32,S=this.a33,N=t.length;for(let R=0;R<N;R++){const P=t[R],B=r[R],U=a*P+h*B+S;t[R]=(s*P+u*B+x)/U,r[R]=(o*P+d*B+w)/U}}static squareToQuadrilateral(t,r,s,o,a,u,d,h){const x=t-s+a-d,w=r-o+u-h;if(x===0&&w===0)return new mn(s-t,a-s,t,o-r,u-o,r,0,0,1);{const S=s-a,N=d-a,R=o-u,P=h-u,B=S*P-N*R,U=(x*P-N*w)/B,G=(S*w-x*R)/B;return new mn(s-t+U*s,d-t+G*d,t,o-r+U*o,h-r+G*h,r,U,G,1)}}static quadrilateralToSquare(t,r,s,o,a,u,d,h){return mn.squareToQuadrilateral(t,r,s,o,a,u,d,h).buildAdjoint()}buildAdjoint(){return new mn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new mn(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class Rc extends zl{sampleGrid(t,r,s,o,a,u,d,h,x,w,S,N,R,P,B,U,G,ee,te){const J=mn.quadrilateralToQuadrilateral(o,a,u,d,h,x,w,S,N,R,P,B,U,G,ee,te);return this.sampleGridWithTransform(t,r,s,J)}sampleGridWithTransform(t,r,s,o){if(r<=0||s<=0)throw new H;const a=new se(r,s),u=new Float32Array(2*r);for(let d=0;d<s;d++){const h=u.length,x=d+.5;for(let w=0;w<h;w+=2)u[w]=w/2+.5,u[w+1]=x;o.transformPoints(u),zl.checkAndNudgePoints(t,u);try{for(let w=0;w<h;w+=2)t.get(Math.floor(u[w]),Math.floor(u[w+1]))&&a.set(w/2,d)}catch{throw new H}}return a}}class nr{static setGridSampler(t){nr.gridSampler=t}static getInstance(){return nr.gridSampler}}nr.gridSampler=new Rc;class kt{constructor(t,r){this.x=t,this.y=r}toResultPoint(){return new ue(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Oc{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let r=this.getMatrixCenter(),s=this.getBullsEyeCorners(r);if(t){let u=s[0];s[0]=s[2],s[2]=u}this.extractParameters(s);let o=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),a=this.getMatrixCornerPoints(s);return new Tc(o,a,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new H;let r=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(t[0],t[1],r),this.sampleLine(t[1],t[2],r),this.sampleLine(t[2],t[3],r),this.sampleLine(t[3],t[0],r)]);this.shift=this.getRotation(s,r);let o=0;for(let u=0;u<4;u++){let d=s[(this.shift+u)%4];this.compact?(o<<=7,o+=d>>1&127):(o<<=10,o+=(d>>2&992)+(d>>1&31))}let a=this.getCorrectedParameterData(o,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)}getRotation(t,r){let s=0;t.forEach((o,a,u)=>{let d=(o>>r-2<<1)+(o&1);s=(s<<3)+d}),s=((s&1)<<11)+(s>>1);for(let o=0;o<4;o++)if(T.bitCount(s^this.EXPECTED_CORNER_BITS[o])<=2)return o;throw new H}getCorrectedParameterData(t,r){let s,o;r?(s=7,o=2):(s=10,o=4);let a=s-o,u=new Int32Array(s);for(let h=s-1;h>=0;--h)u[h]=t&15,t>>=4;try{new Zi(Oe.AZTEC_PARAM).decode(u,a)}catch{throw new H}let d=0;for(let h=0;h<o;h++)d=(d<<4)+u[h];return d}getBullsEyeCorners(t){let r=t,s=t,o=t,a=t,u=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let S=this.getFirstDifferent(r,u,1,-1),N=this.getFirstDifferent(s,u,1,1),R=this.getFirstDifferent(o,u,-1,1),P=this.getFirstDifferent(a,u,-1,-1);if(this.nbCenterLayers>2){let B=this.distancePoint(P,S)*this.nbCenterLayers/(this.distancePoint(a,r)*(this.nbCenterLayers+2));if(B<.75||B>1.25||!this.isWhiteOrBlackRectangle(S,N,R,P))break}r=S,s=N,o=R,a=P,u=!u}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new H;this.compact=this.nbCenterLayers===5;let d=new ue(r.getX()+.5,r.getY()-.5),h=new ue(s.getX()+.5,s.getY()+.5),x=new ue(o.getX()-.5,o.getY()+.5),w=new ue(a.getX()-.5,a.getY()-.5);return this.expandSquare([d,h,x,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,r,s,o;try{let d=new zn(this.image).detect();t=d[0],r=d[1],s=d[2],o=d[3]}catch{let h=this.image.getWidth()/2,x=this.image.getHeight()/2;t=this.getFirstDifferent(new kt(h+7,x-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new kt(h+7,x+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new kt(h-7,x+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new kt(h-7,x-7),!1,-1,-1).toResultPoint()}let a=_e.round((t.getX()+o.getX()+r.getX()+s.getX())/4),u=_e.round((t.getY()+o.getY()+r.getY()+s.getY())/4);try{let d=new zn(this.image,15,a,u).detect();t=d[0],r=d[1],s=d[2],o=d[3]}catch{t=this.getFirstDifferent(new kt(a+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new kt(a+7,u+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new kt(a-7,u+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new kt(a-7,u-7),!1,-1,-1).toResultPoint()}return a=_e.round((t.getX()+o.getX()+r.getX()+s.getX())/4),u=_e.round((t.getY()+o.getY()+r.getY()+s.getY())/4),new kt(a,u)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,r,s,o,a){let u=nr.getInstance(),d=this.getDimension(),h=d/2-this.nbCenterLayers,x=d/2+this.nbCenterLayers;return u.sampleGrid(t,d,d,h,h,x,h,x,x,h,x,r.getX(),r.getY(),s.getX(),s.getY(),o.getX(),o.getY(),a.getX(),a.getY())}sampleLine(t,r,s){let o=0,a=this.distanceResultPoint(t,r),u=a/s,d=t.getX(),h=t.getY(),x=u*(r.getX()-t.getX())/a,w=u*(r.getY()-t.getY())/a;for(let S=0;S<s;S++)this.image.get(_e.round(d+S*x),_e.round(h+S*w))&&(o|=1<<s-S-1);return o}isWhiteOrBlackRectangle(t,r,s,o){let a=3;t=new kt(t.getX()-a,t.getY()+a),r=new kt(r.getX()-a,r.getY()-a),s=new kt(s.getX()+a,s.getY()-a),o=new kt(o.getX()+a,o.getY()+a);let u=this.getColor(o,t);if(u===0)return!1;let d=this.getColor(t,r);return d!==u||(d=this.getColor(r,s),d!==u)?!1:(d=this.getColor(s,o),d===u)}getColor(t,r){let s=this.distancePoint(t,r),o=(r.getX()-t.getX())/s,a=(r.getY()-t.getY())/s,u=0,d=t.getX(),h=t.getY(),x=this.image.get(t.getX(),t.getY()),w=Math.ceil(s);for(let N=0;N<w;N++)d+=o,h+=a,this.image.get(_e.round(d),_e.round(h))!==x&&u++;let S=u/s;return S>.1&&S<.9?0:S<=.1===x?1:-1}getFirstDifferent(t,r,s,o){let a=t.getX()+s,u=t.getY()+o;for(;this.isValid(a,u)&&this.image.get(a,u)===r;)a+=s,u+=o;for(a-=s,u-=o;this.isValid(a,u)&&this.image.get(a,u)===r;)a+=s;for(a-=s;this.isValid(a,u)&&this.image.get(a,u)===r;)u+=o;return u-=o,new kt(a,u)}expandSquare(t,r,s){let o=s/(2*r),a=t[0].getX()-t[2].getX(),u=t[0].getY()-t[2].getY(),d=(t[0].getX()+t[2].getX())/2,h=(t[0].getY()+t[2].getY())/2,x=new ue(d+o*a,h+o*u),w=new ue(d-o*a,h-o*u);a=t[1].getX()-t[3].getX(),u=t[1].getY()-t[3].getY(),d=(t[1].getX()+t[3].getX())/2,h=(t[1].getY()+t[3].getY())/2;let S=new ue(d+o*a,h+o*u),N=new ue(d-o*a,h-o*u);return[x,S,w,N]}isValid(t,r){return t>=0&&t<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(t){let r=_e.round(t.getX()),s=_e.round(t.getY());return this.isValid(r,s)}distancePoint(t,r){return _e.distance(t.getX(),t.getY(),r.getX(),r.getY())}distanceResultPoint(t,r){return _e.distance(t.getX(),t.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(T.truncDivision(this.nbLayers-4,8)+1)+15}}class oo{decode(t,r=null){let s=null,o=new Oc(t.getBlackMatrix()),a=null,u=null;try{let w=o.detectMirror(!1);a=w.getPoints(),this.reportFoundResultPoints(r,a),u=new Ue().decode(w)}catch(w){s=w}if(u==null)try{let w=o.detectMirror(!0);a=w.getPoints(),this.reportFoundResultPoints(r,a),u=new Ue().decode(w)}catch(w){throw s??w}let d=new Qe(u.getText(),u.getRawBytes(),u.getNumBits(),a,ce.AZTEC,k.currentTimeMillis()),h=u.getByteSegments();h!=null&&d.putMetadata(pt.BYTE_SEGMENTS,h);let x=u.getECLevel();return x!=null&&d.putMetadata(pt.ERROR_CORRECTION_LEVEL,x),d}reportFoundResultPoints(t,r){if(t!=null){let s=t.get(z.NEED_RESULT_POINT_CALLBACK);s!=null&&r.forEach((o,a,u)=>{s.foundPossibleResultPoint(o)})}}reset(){}}class yh extends on{constructor(t=500){super(new oo,t)}}class at{decode(t,r){try{return this.doDecode(t,r)}catch{if(r&&r.get(z.TRY_HARDER)===!0&&t.isRotateSupported()){const a=t.rotateCounterClockwise(),u=this.doDecode(a,r),d=u.getResultMetadata();let h=270;d!==null&&d.get(pt.ORIENTATION)===!0&&(h=h+d.get(pt.ORIENTATION)%360),u.putMetadata(pt.ORIENTATION,h);const x=u.getResultPoints();if(x!==null){const w=a.getHeight();for(let S=0;S<x.length;S++)x[S]=new ue(w-x[S].getY()-1,x[S].getX())}return u}else throw new H}}reset(){}doDecode(t,r){const s=t.getWidth(),o=t.getHeight();let a=new j(s);const u=r&&r.get(z.TRY_HARDER)===!0,d=Math.max(1,o>>(u?8:5));let h;u?h=o:h=15;const x=Math.trunc(o/2);for(let w=0;w<h;w++){const S=Math.trunc((w+1)/2),N=(w&1)===0,R=x+d*(N?S:-S);if(R<0||R>=o)break;try{a=t.getBlackRow(R,a)}catch{continue}for(let P=0;P<2;P++){if(P===1&&(a.reverse(),r&&r.get(z.NEED_RESULT_POINT_CALLBACK)===!0)){const B=new Map;r.forEach((U,G)=>B.set(G,U)),B.delete(z.NEED_RESULT_POINT_CALLBACK),r=B}try{const B=this.decodeRow(R,a,r);if(P===1){B.putMetadata(pt.ORIENTATION,180);const U=B.getResultPoints();U!==null&&(U[0]=new ue(s-U[0].getX()-1,U[0].getY()),U[1]=new ue(s-U[1].getX()-1,U[1].getY()))}return B}catch{}}}throw new H}static recordPattern(t,r,s){const o=s.length;for(let x=0;x<o;x++)s[x]=0;const a=t.getSize();if(r>=a)throw new H;let u=!t.get(r),d=0,h=r;for(;h<a;){if(t.get(h)!==u)s[d]++;else{if(++d===o)break;s[d]=1,u=!u}h++}if(!(d===o||d===o-1&&h===a))throw new H}static recordPatternInReverse(t,r,s){let o=s.length,a=t.get(r);for(;r>0&&o>=0;)t.get(--r)!==a&&(o--,a=!a);if(o>=0)throw new H;at.recordPattern(t,r+1,s)}static patternMatchVariance(t,r,s){const o=t.length;let a=0,u=0;for(let x=0;x<o;x++)a+=t[x],u+=r[x];if(a<u)return Number.POSITIVE_INFINITY;const d=a/u;s*=d;let h=0;for(let x=0;x<o;x++){const w=t[x],S=r[x]*d,N=w>S?w-S:S-w;if(N>s)return Number.POSITIVE_INFINITY;h+=N}return h/a}}class ne extends at{static findStartPattern(t){const r=t.getSize(),s=t.getNextSet(0);let o=0,a=Int32Array.from([0,0,0,0,0,0]),u=s,d=!1;const h=6;for(let x=s;x<r;x++)if(t.get(x)!==d)a[o]++;else{if(o===h-1){let w=ne.MAX_AVG_VARIANCE,S=-1;for(let N=ne.CODE_START_A;N<=ne.CODE_START_C;N++){const R=at.patternMatchVariance(a,ne.CODE_PATTERNS[N],ne.MAX_INDIVIDUAL_VARIANCE);R<w&&(w=R,S=N)}if(S>=0&&t.isRange(Math.max(0,u-(x-u)/2),u,!1))return Int32Array.from([u,x,S]);u+=a[0]+a[1],a=a.slice(2,a.length-1),a[o-1]=0,a[o]=0,o--}else o++;a[o]=1,d=!d}throw new H}static decodeCode(t,r,s){at.recordPattern(t,s,r);let o=ne.MAX_AVG_VARIANCE,a=-1;for(let u=0;u<ne.CODE_PATTERNS.length;u++){const d=ne.CODE_PATTERNS[u],h=this.patternMatchVariance(r,d,ne.MAX_INDIVIDUAL_VARIANCE);h<o&&(o=h,a=u)}if(a>=0)return a;throw new H}decodeRow(t,r,s){const o=s&&s.get(z.ASSUME_GS1)===!0,a=ne.findStartPattern(r),u=a[2];let d=0;const h=new Uint8Array(20);h[d++]=u;let x;switch(u){case ne.CODE_START_A:x=ne.CODE_CODE_A;break;case ne.CODE_START_B:x=ne.CODE_CODE_B;break;case ne.CODE_START_C:x=ne.CODE_CODE_C;break;default:throw new L}let w=!1,S=!1,N="",R=a[0],P=a[1];const B=Int32Array.from([0,0,0,0,0,0]);let U=0,G=0,ee=u,te=0,J=!0,Ae=!1,ye=!1;for(;!w;){const ci=S;switch(S=!1,U=G,G=ne.decodeCode(r,B,P),h[d++]=G,G!==ne.CODE_STOP&&(J=!0),G!==ne.CODE_STOP&&(te++,ee+=te*G),R=P,P+=B.reduce((Zh,Qh)=>Zh+Qh,0),G){case ne.CODE_START_A:case ne.CODE_START_B:case ne.CODE_START_C:throw new L}switch(x){case ne.CODE_CODE_A:if(G<64)ye===Ae?N+=String.fromCharCode(32+G):N+=String.fromCharCode(32+G+128),ye=!1;else if(G<96)ye===Ae?N+=String.fromCharCode(G-64):N+=String.fromCharCode(G+64),ye=!1;else switch(G!==ne.CODE_STOP&&(J=!1),G){case ne.CODE_FNC_1:o&&(N.length===0?N+="]C1":N+="");break;case ne.CODE_FNC_2:case ne.CODE_FNC_3:break;case ne.CODE_FNC_4_A:!Ae&&ye?(Ae=!0,ye=!1):Ae&&ye?(Ae=!1,ye=!1):ye=!0;break;case ne.CODE_SHIFT:S=!0,x=ne.CODE_CODE_B;break;case ne.CODE_CODE_B:x=ne.CODE_CODE_B;break;case ne.CODE_CODE_C:x=ne.CODE_CODE_C;break;case ne.CODE_STOP:w=!0;break}break;case ne.CODE_CODE_B:if(G<96)ye===Ae?N+=String.fromCharCode(32+G):N+=String.fromCharCode(32+G+128),ye=!1;else switch(G!==ne.CODE_STOP&&(J=!1),G){case ne.CODE_FNC_1:o&&(N.length===0?N+="]C1":N+="");break;case ne.CODE_FNC_2:case ne.CODE_FNC_3:break;case ne.CODE_FNC_4_B:!Ae&&ye?(Ae=!0,ye=!1):Ae&&ye?(Ae=!1,ye=!1):ye=!0;break;case ne.CODE_SHIFT:S=!0,x=ne.CODE_CODE_A;break;case ne.CODE_CODE_A:x=ne.CODE_CODE_A;break;case ne.CODE_CODE_C:x=ne.CODE_CODE_C;break;case ne.CODE_STOP:w=!0;break}break;case ne.CODE_CODE_C:if(G<100)G<10&&(N+="0"),N+=G;else switch(G!==ne.CODE_STOP&&(J=!1),G){case ne.CODE_FNC_1:o&&(N.length===0?N+="]C1":N+="");break;case ne.CODE_CODE_A:x=ne.CODE_CODE_A;break;case ne.CODE_CODE_B:x=ne.CODE_CODE_B;break;case ne.CODE_STOP:w=!0;break}break}ci&&(x=x===ne.CODE_CODE_A?ne.CODE_CODE_B:ne.CODE_CODE_A)}const Wt=P-R;if(P=r.getNextUnset(P),!r.isRange(P,Math.min(r.getSize(),P+(P-R)/2),!1))throw new H;if(ee-=te*U,ee%103!==U)throw new O;const yn=N.length;if(yn===0)throw new H;yn>0&&J&&(x===ne.CODE_CODE_C?N=N.substring(0,yn-2):N=N.substring(0,yn-1));const Gt=(a[1]+a[0])/2,je=R+Wt/2,St=h.length,qt=new Uint8Array(St);for(let ci=0;ci<St;ci++)qt[ci]=h[ci];const ui=[new ue(Gt,t),new ue(je,t)];return new Qe(N,qt,0,ui,ce.CODE_128,new Date().getTime())}}ne.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ne.MAX_AVG_VARIANCE=.25,ne.MAX_INDIVIDUAL_VARIANCE=.7,ne.CODE_SHIFT=98,ne.CODE_CODE_C=99,ne.CODE_CODE_B=100,ne.CODE_CODE_A=101,ne.CODE_FNC_1=102,ne.CODE_FNC_2=97,ne.CODE_FNC_3=96,ne.CODE_FNC_4_A=101,ne.CODE_FNC_4_B=100,ne.CODE_START_A=103,ne.CODE_START_B=104,ne.CODE_START_C=105,ne.CODE_STOP=106;class ft extends at{constructor(t=!1,r=!1){super(),this.usingCheckDigit=t,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,r,s){let o=this.counters;o.fill(0),this.decodeRowResult="";let a=ft.findAsteriskPattern(r,o),u=r.getNextSet(a[1]),d=r.getSize(),h,x;do{ft.recordPattern(r,u,o);let B=ft.toNarrowWidePattern(o);if(B<0)throw new H;h=ft.patternToChar(B),this.decodeRowResult+=h,x=u;for(let U of o)u+=U;u=r.getNextSet(u)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let w=0;for(let B of o)w+=B;let S=u-x-w;if(u!==d&&S*2<w)throw new H;if(this.usingCheckDigit){let B=this.decodeRowResult.length-1,U=0;for(let G=0;G<B;G++)U+=ft.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(G));if(this.decodeRowResult.charAt(B)!==ft.ALPHABET_STRING.charAt(U%43))throw new O;this.decodeRowResult=this.decodeRowResult.substring(0,B)}if(this.decodeRowResult.length===0)throw new H;let N;this.extendedMode?N=ft.decodeExtended(this.decodeRowResult):N=this.decodeRowResult;let R=(a[1]+a[0])/2,P=x+w/2;return new Qe(N,null,0,[new ue(R,t),new ue(P,t)],ce.CODE_39,new Date().getTime())}static findAsteriskPattern(t,r){let s=t.getSize(),o=t.getNextSet(0),a=0,u=o,d=!1,h=r.length;for(let x=o;x<s;x++)if(t.get(x)!==d)r[a]++;else{if(a===h-1){if(this.toNarrowWidePattern(r)===ft.ASTERISK_ENCODING&&t.isRange(Math.max(0,u-Math.floor((x-u)/2)),u,!1))return[u,x];u+=r[0]+r[1],r.copyWithin(0,2,2+a-1),r[a-1]=0,r[a]=0,a--}else a++;r[a]=1,d=!d}throw new H}static toNarrowWidePattern(t){let r=t.length,s=0,o;do{let a=2147483647;for(let h of t)h<a&&h>s&&(a=h);s=a,o=0;let u=0,d=0;for(let h=0;h<r;h++){let x=t[h];x>s&&(d|=1<<r-1-h,o++,u+=x)}if(o===3){for(let h=0;h<r&&o>0;h++){let x=t[h];if(x>s&&(o--,x*2>=u))return-1}return d}}while(o>3);return-1}static patternToChar(t){for(let r=0;r<ft.CHARACTER_ENCODINGS.length;r++)if(ft.CHARACTER_ENCODINGS[r]===t)return ft.ALPHABET_STRING.charAt(r);if(t===ft.ASTERISK_ENCODING)return"*";throw new H}static decodeExtended(t){let r=t.length,s="";for(let o=0;o<r;o++){let a=t.charAt(o);if(a==="+"||a==="$"||a==="%"||a==="/"){let u=t.charAt(o+1),d="\0";switch(a){case"+":if(u>="A"&&u<="Z")d=String.fromCharCode(u.charCodeAt(0)+32);else throw new L;break;case"$":if(u>="A"&&u<="Z")d=String.fromCharCode(u.charCodeAt(0)-64);else throw new L;break;case"%":if(u>="A"&&u<="E")d=String.fromCharCode(u.charCodeAt(0)-38);else if(u>="F"&&u<="J")d=String.fromCharCode(u.charCodeAt(0)-11);else if(u>="K"&&u<="O")d=String.fromCharCode(u.charCodeAt(0)+16);else if(u>="P"&&u<="T")d=String.fromCharCode(u.charCodeAt(0)+43);else if(u==="U")d="\0";else if(u==="V")d="@";else if(u==="W")d="`";else if(u==="X"||u==="Y"||u==="Z")d="";else throw new L;break;case"/":if(u>="A"&&u<="O")d=String.fromCharCode(u.charCodeAt(0)-32);else if(u==="Z")d=":";else throw new L;break}s+=d,o++}else s+=a}return s}}ft.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ft.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ft.ASTERISK_ENCODING=148;class Le extends at{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,r,s){let o=this.decodeStart(r),a=this.decodeEnd(r),u=new K;Le.decodeMiddle(r,o[1],a[0],u);let d=u.toString(),h=null;s!=null&&(h=s.get(z.ALLOWED_LENGTHS)),h==null&&(h=Le.DEFAULT_ALLOWED_LENGTHS);let x=d.length,w=!1,S=0;for(let P of h){if(x===P){w=!0;break}P>S&&(S=P)}if(!w&&x>S&&(w=!0),!w)throw new L;const N=[new ue(o[1],t),new ue(a[0],t)];return new Qe(d,null,0,N,ce.ITF,new Date().getTime())}static decodeMiddle(t,r,s,o){let a=new Int32Array(10),u=new Int32Array(5),d=new Int32Array(5);for(a.fill(0),u.fill(0),d.fill(0);r<s;){at.recordPattern(t,r,a);for(let x=0;x<5;x++){let w=2*x;u[x]=a[w],d[x]=a[w+1]}let h=Le.decodeDigit(u);o.append(h.toString()),h=this.decodeDigit(d),o.append(h.toString()),a.forEach(function(x){r+=x})}}decodeStart(t){let r=Le.skipWhiteSpace(t),s=Le.findGuardPattern(t,r,Le.START_PATTERN);return this.narrowLineWidth=(s[1]-s[0])/4,this.validateQuietZone(t,s[0]),s}validateQuietZone(t,r){let s=this.narrowLineWidth*10;s=s<r?s:r;for(let o=r-1;s>0&&o>=0&&!t.get(o);o--)s--;if(s!==0)throw new H}static skipWhiteSpace(t){const r=t.getSize(),s=t.getNextSet(0);if(s===r)throw new H;return s}decodeEnd(t){t.reverse();try{let r=Le.skipWhiteSpace(t),s;try{s=Le.findGuardPattern(t,r,Le.END_PATTERN_REVERSED[0])}catch(a){a instanceof H&&(s=Le.findGuardPattern(t,r,Le.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,s[0]);let o=s[0];return s[0]=t.getSize()-s[1],s[1]=t.getSize()-o,s}finally{t.reverse()}}static findGuardPattern(t,r,s){let o=s.length,a=new Int32Array(o),u=t.getSize(),d=!1,h=0,x=r;a.fill(0);for(let w=r;w<u;w++)if(t.get(w)!==d)a[h]++;else{if(h===o-1){if(at.patternMatchVariance(a,s,Le.MAX_INDIVIDUAL_VARIANCE)<Le.MAX_AVG_VARIANCE)return[x,w];x+=a[0]+a[1],k.arraycopy(a,2,a,0,h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,d=!d}throw new H}static decodeDigit(t){let r=Le.MAX_AVG_VARIANCE,s=-1,o=Le.PATTERNS.length;for(let a=0;a<o;a++){let u=Le.PATTERNS[a],d=at.patternMatchVariance(t,u,Le.MAX_INDIVIDUAL_VARIANCE);d<r?(r=d,s=a):d===r&&(s=-1)}if(s>=0)return s%10;throw new H}}Le.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Le.MAX_AVG_VARIANCE=.38,Le.MAX_INDIVIDUAL_VARIANCE=.5,Le.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Le.START_PATTERN=Int32Array.from([1,1,1,1]),Le.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class tt extends at{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let r=!1,s,o=0,a=Int32Array.from([0,0,0]);for(;!r;){a=Int32Array.from([0,0,0]),s=tt.findGuardPattern(t,o,!1,this.START_END_PATTERN,a);let u=s[0];o=s[1];let d=u-(o-u);d>=0&&(r=t.isRange(d,u,!1))}return s}static checkChecksum(t){return tt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let s=parseInt(t.charAt(r-1),10);return tt.getStandardUPCEANChecksum(t.substring(0,r-1))===s}static getStandardUPCEANChecksum(t){let r=t.length,s=0;for(let o=r-1;o>=0;o-=2){let a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new L;s+=a}s*=3;for(let o=r-2;o>=0;o-=2){let a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new L;s+=a}return(1e3-s)%10}static decodeEnd(t,r){return tt.findGuardPattern(t,r,!1,tt.START_END_PATTERN,new Int32Array(tt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,r,s,o){return this.findGuardPattern(t,r,s,o,new Int32Array(o.length))}static findGuardPattern(t,r,s,o,a){let u=t.getSize();r=s?t.getNextUnset(r):t.getNextSet(r);let d=0,h=r,x=o.length,w=s;for(let S=r;S<u;S++)if(t.get(S)!==w)a[d]++;else{if(d===x-1){if(at.patternMatchVariance(a,o,tt.MAX_INDIVIDUAL_VARIANCE)<tt.MAX_AVG_VARIANCE)return Int32Array.from([h,S]);h+=a[0]+a[1];let N=a.slice(2,a.length-1);for(let R=0;R<d-1;R++)a[R]=N[R];a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,w=!w}throw new H}static decodeDigit(t,r,s,o){this.recordPattern(t,s,r);let a=this.MAX_AVG_VARIANCE,u=-1,d=o.length;for(let h=0;h<d;h++){let x=o[h],w=at.patternMatchVariance(r,x,tt.MAX_INDIVIDUAL_VARIANCE);w<a&&(a=w,u=h)}if(u>=0)return u;throw new H}}tt.MAX_AVG_VARIANCE=.48,tt.MAX_INDIVIDUAL_VARIANCE=.7,tt.START_END_PATTERN=Int32Array.from([1,1,1]),tt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),tt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),tt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Qi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,s){let o=this.decodeRowStringBuffer,a=this.decodeMiddle(r,s,o),u=o.toString(),d=Qi.parseExtensionString(u),h=[new ue((s[0]+s[1])/2,t),new ue(a,t)],x=new Qe(u,null,0,h,ce.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&x.putAllMetadata(d),x}decodeMiddle(t,r,s){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=t.getSize(),u=r[1],d=0;for(let x=0;x<5&&u<a;x++){let w=tt.decodeDigit(t,o,u,tt.L_AND_G_PATTERNS);s+=String.fromCharCode(48+w%10);for(let S of o)u+=S;w>=10&&(d|=1<<4-x),x!==4&&(u=t.getNextSet(u),u=t.getNextUnset(u))}if(s.length!==5)throw new H;let h=this.determineCheckDigit(d);if(Qi.extensionChecksum(s.toString())!==h)throw new H;return u}static extensionChecksum(t){let r=t.length,s=0;for(let o=r-2;o>=0;o-=2)s+=t.charAt(o).charCodeAt(0)-48;s*=3;for(let o=r-1;o>=0;o-=2)s+=t.charAt(o).charCodeAt(0)-48;return s*=3,s%10}determineCheckDigit(t){for(let r=0;r<10;r++)if(t===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new H}static parseExtensionString(t){if(t.length!==5)return null;let r=Qi.parseExtension5String(t);return r==null?null:new Map([[pt.SUGGESTED_PRICE,r]])}static parseExtension5String(t){let r;switch(t.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let s=parseInt(t.substring(1)),o=(s/100).toString(),a=s%100,u=a<10?"0"+a:a.toString();return r+o+"."+u}}class Vl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,s){let o=this.decodeRowStringBuffer,a=this.decodeMiddle(r,s,o),u=o.toString(),d=Vl.parseExtensionString(u),h=[new ue((s[0]+s[1])/2,t),new ue(a,t)],x=new Qe(u,null,0,h,ce.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&x.putAllMetadata(d),x}decodeMiddle(t,r,s){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=t.getSize(),u=r[1],d=0;for(let h=0;h<2&&u<a;h++){let x=tt.decodeDigit(t,o,u,tt.L_AND_G_PATTERNS);s+=String.fromCharCode(48+x%10);for(let w of o)u+=w;x>=10&&(d|=1<<1-h),h!==1&&(u=t.getNextSet(u),u=t.getNextUnset(u))}if(s.length!==2)throw new H;if(parseInt(s.toString())%4!==d)throw new H;return u}static parseExtensionString(t){return t.length!==2?null:new Map([[pt.ISSUE_NUMBER,parseInt(t)]])}}class Mc{static decodeRow(t,r,s){let o=tt.findGuardPattern(r,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Qi().decodeRow(t,r,o)}catch{return new Vl().decodeRow(t,r,o)}}}Mc.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Me extends tt{constructor(){super(),this.decodeRowStringBuffer="",Me.L_AND_G_PATTERNS=Me.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let r=Me.L_PATTERNS[t-10],s=new Int32Array(r.length);for(let o=0;o<r.length;o++)s[o]=r[r.length-o-1];Me.L_AND_G_PATTERNS[t]=s}}decodeRow(t,r,s){let o=Me.findStartGuardPattern(r),a=s==null?null:s.get(z.NEED_RESULT_POINT_CALLBACK);if(a!=null){const J=new ue((o[0]+o[1])/2,t);a.foundPossibleResultPoint(J)}let u=this.decodeMiddle(r,o,this.decodeRowStringBuffer),d=u.rowOffset,h=u.resultString;if(a!=null){const J=new ue(d,t);a.foundPossibleResultPoint(J)}let x=this.decodeEnd(r,d);if(a!=null){const J=new ue((x[0]+x[1])/2,t);a.foundPossibleResultPoint(J)}let w=x[1],S=w+(w-x[0]);if(S>=r.getSize()||!r.isRange(w,S,!1))throw new H;let N=h.toString();if(N.length<8)throw new L;if(!Me.checkChecksum(N))throw new O;let R=(o[1]+o[0])/2,P=(x[1]+x[0])/2,B=this.getBarcodeFormat(),U=[new ue(R,t),new ue(P,t)],G=new Qe(N,null,0,U,B,new Date().getTime()),ee=0;try{let J=Mc.decodeRow(t,r,x[1]);G.putMetadata(pt.UPC_EAN_EXTENSION,J.getText()),G.putAllMetadata(J.getResultMetadata()),G.addResultPoints(J.getResultPoints()),ee=J.getText().length}catch{}let te=s==null?null:s.get(z.ALLOWED_EAN_EXTENSIONS);if(te!=null){let J=!1;for(let Ae in te)if(ee.toString()===Ae){J=!0;break}if(!J)throw new H}return G}decodeEnd(t,r){return Me.findGuardPattern(t,r,!1,Me.START_END_PATTERN,new Int32Array(Me.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return Me.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let s=parseInt(t.charAt(r-1),10);return Me.getStandardUPCEANChecksum(t.substring(0,r-1))===s}static getStandardUPCEANChecksum(t){let r=t.length,s=0;for(let o=r-1;o>=0;o-=2){let a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new L;s+=a}s*=3;for(let o=r-2;o>=0;o-=2){let a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new L;s+=a}return(1e3-s)%10}}class Mr extends Me{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,s){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=t.getSize(),u=r[1],d=0;for(let x=0;x<6&&u<a;x++){let w=Me.decodeDigit(t,o,u,Me.L_AND_G_PATTERNS);s+=String.fromCharCode(48+w%10);for(let S of o)u+=S;w>=10&&(d|=1<<5-x)}s=Mr.determineFirstDigit(s,d),u=Me.findGuardPattern(t,u,!0,Me.MIDDLE_PATTERN,new Int32Array(Me.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<6&&u<a;x++){let w=Me.decodeDigit(t,o,u,Me.L_PATTERNS);s+=String.fromCharCode(48+w);for(let S of o)u+=S}return{rowOffset:u,resultString:s}}getBarcodeFormat(){return ce.EAN_13}static determineFirstDigit(t,r){for(let s=0;s<10;s++)if(r===this.FIRST_DIGIT_ENCODINGS[s])return t=String.fromCharCode(48+s)+t,t;throw new H}}Mr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Dc extends Me{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,s){const o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=t.getSize(),u=r[1];for(let h=0;h<4&&u<a;h++){let x=Me.decodeDigit(t,o,u,Me.L_PATTERNS);s+=String.fromCharCode(48+x);for(let w of o)u+=w}u=Me.findGuardPattern(t,u,!0,Me.MIDDLE_PATTERN,new Int32Array(Me.MIDDLE_PATTERN.length).fill(0))[1];for(let h=0;h<4&&u<a;h++){let x=Me.decodeDigit(t,o,u,Me.L_PATTERNS);s+=String.fromCharCode(48+x);for(let w of o)u+=w}return{rowOffset:u,resultString:s}}getBarcodeFormat(){return ce.EAN_8}}class kc extends Me{constructor(){super(...arguments),this.ean13Reader=new Mr}getBarcodeFormat(){return ce.UPC_A}decode(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,r,s){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,s))}decodeMiddle(t,r,s){return this.ean13Reader.decodeMiddle(t,r,s)}maybeReturnResult(t){let r=t.getText();if(r.charAt(0)==="0"){let s=new Qe(r.substring(1),null,null,t.getResultPoints(),ce.UPC_A);return t.getResultMetadata()!=null&&s.putAllMetadata(t.getResultMetadata()),s}else throw new H}reset(){this.ean13Reader.reset()}}class wn extends Me{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,r,s){const o=this.decodeMiddleCounters.map(x=>x);o[0]=0,o[1]=0,o[2]=0,o[3]=0;const a=t.getSize();let u=r[1],d=0;for(let x=0;x<6&&u<a;x++){const w=wn.decodeDigit(t,o,u,wn.L_AND_G_PATTERNS);s+=String.fromCharCode(48+w%10);for(let S of o)u+=S;w>=10&&(d|=1<<5-x)}let h=wn.determineNumSysAndCheckDigit(s,d);return{rowOffset:u,resultString:h}}decodeEnd(t,r){return wn.findGuardPatternWithoutCounters(t,r,!0,wn.MIDDLE_END_PATTERN)}checkChecksum(t){return Me.checkChecksum(wn.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,r){for(let s=0;s<=1;s++)for(let o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[s][o]){let a=String.fromCharCode(48+s),u=String.fromCharCode(48+o);return a+t+u}throw H.getNotFoundInstance()}getBarcodeFormat(){return ce.UPC_E}static convertUPCEtoUPCA(t){const r=t.slice(1,7).split("").map(a=>a.charCodeAt(0)),s=new K;s.append(t.charAt(0));let o=r[5];switch(o){case 0:case 1:case 2:s.appendChars(r,0,2),s.append(o),s.append("0000"),s.appendChars(r,2,3);break;case 3:s.appendChars(r,0,3),s.append("00000"),s.appendChars(r,3,2);break;case 4:s.appendChars(r,0,4),s.append("00000"),s.append(r[4]);break;default:s.appendChars(r,0,5),s.append("0000"),s.append(o);break}return t.length>=8&&s.append(t.charAt(7)),s.toString()}}wn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),wn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Hl extends at{constructor(t){super();let r=t==null?null:t.get(z.POSSIBLE_FORMATS),s=[];l(r)?(s.push(new Mr),s.push(new kc),s.push(new Dc),s.push(new wn)):(r.indexOf(ce.EAN_13)>-1&&s.push(new Mr),r.indexOf(ce.UPC_A)>-1&&s.push(new kc),r.indexOf(ce.EAN_8)>-1&&s.push(new Dc),r.indexOf(ce.UPC_E)>-1&&s.push(new wn)),this.readers=s}decodeRow(t,r,s){for(let o of this.readers)try{const a=o.decodeRow(t,r,s),u=a.getBarcodeFormat()===ce.EAN_13&&a.getText().charAt(0)==="0",d=s==null?null:s.get(z.POSSIBLE_FORMATS),h=d==null||d.includes(ce.UPC_A);if(u&&h){const x=a.getRawBytes(),w=new Qe(a.getText().substring(1),x,x?x.length:null,a.getResultPoints(),ce.UPC_A);return w.putAllMetadata(a.getResultMetadata()),w}return a}catch{}throw new H}reset(){for(let t of this.readers)t.reset()}}class _t extends at{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,r){for(let s=0;s<r.length;s++)if(at.patternMatchVariance(t,r[s],_t.MAX_INDIVIDUAL_VARIANCE)<_t.MAX_AVG_VARIANCE)return s;throw new H}static count(t){return _e.sum(new Int32Array(t))}static increment(t,r){let s=0,o=r[0];for(let a=1;a<t.length;a++)r[a]>o&&(o=r[a],s=a);t[s]++}static decrement(t,r){let s=0,o=r[0];for(let a=1;a<t.length;a++)r[a]<o&&(o=r[a],s=a);t[s]--}static isFinderPattern(t){let r=t[0]+t[1],s=r+t[2]+t[3],o=r/s;if(o>=_t.MIN_FINDER_PATTERN_RATIO&&o<=_t.MAX_FINDER_PATTERN_RATIO){let a=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;for(let d of t)d>u&&(u=d),d<a&&(a=d);return u<10*a}return!1}}_t.MAX_AVG_VARIANCE=.2,_t.MAX_INDIVIDUAL_VARIANCE=.45,_t.MIN_FINDER_PATTERN_RATIO=9.5/12,_t.MAX_FINDER_PATTERN_RATIO=12.5/14;class ni{constructor(t,r){this.value=t,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof ni))return!1;const r=t;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class lo{constructor(t,r,s,o,a){this.value=t,this.startEnd=r,this.value=t,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new ue(s,a)),this.resultPoints.push(new ue(o,a))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof lo))return!1;const r=t;return this.value===r.value}hashCode(){return this.value}}class _n{constructor(){}static getRSSvalue(t,r,s){let o=0;for(let h of t)o+=h;let a=0,u=0,d=t.length;for(let h=0;h<d-1;h++){let x;for(x=1,u|=1<<h;x<t[h];x++,u&=~(1<<h)){let w=_n.combins(o-x-1,d-h-2);if(s&&u===0&&o-x-(d-h-1)>=d-h-1&&(w-=_n.combins(o-x-(d-h),d-h-2)),d-h-1>1){let S=0;for(let N=o-x-(d-h-2);N>r;N--)S+=_n.combins(o-x-N-1,d-h-3);w-=S*(d-1-h)}else o-x>r&&w--;a+=w}o-=x}return a}static combins(t,r){let s,o;t-r>r?(o=r,s=t-r):(o=t-r,s=r);let a=1,u=1;for(let d=t;d>s;d--)a*=d,u<=o&&(a/=u,u++);for(;u<=o;)a/=u,u++;return a}}class Eh{static buildBitArray(t){let r=t.length*2-1;t[t.length-1].getRightChar()==null&&(r-=1);let s=12*r,o=new j(s),a=0,d=t[0].getRightChar().getValue();for(let h=11;h>=0;--h)d&1<<h&&o.set(a),a++;for(let h=1;h<t.length;++h){let x=t[h],w=x.getLeftChar().getValue();for(let S=11;S>=0;--S)w&1<<S&&o.set(a),a++;if(x.getRightChar()!=null){let S=x.getRightChar().getValue();for(let N=11;N>=0;--N)S&1<<N&&o.set(a),a++}}return o}}class Dr{constructor(t,r){r?this.decodedInformation=null:(this.finished=t,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Wl{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class zt extends Wl{constructor(t,r){super(t),this.value=r}getValue(){return this.value}isFNC1(){return this.value===zt.FNC1}}zt.FNC1="$";class kr extends Wl{constructor(t,r,s){super(t),s?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ln extends Wl{constructor(t,r,s){if(super(t),r<0||r>10||s<0||s>10)throw new L;this.firstDigit=r,this.secondDigit=s}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ln.FNC1}isSecondDigitFNC1(){return this.secondDigit===ln.FNC1}isAnyFNC1(){return this.firstDigit===ln.FNC1||this.secondDigit===ln.FNC1}}ln.FNC1=10;class oe{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new H;let r=t.substring(0,2);for(let a of oe.TWO_DIGIT_DATA_LENGTH)if(a[0]===r)return a[1]===oe.VARIABLE_LENGTH?oe.processVariableAI(2,a[2],t):oe.processFixedAI(2,a[1],t);if(t.length<3)throw new H;let s=t.substring(0,3);for(let a of oe.THREE_DIGIT_DATA_LENGTH)if(a[0]===s)return a[1]===oe.VARIABLE_LENGTH?oe.processVariableAI(3,a[2],t):oe.processFixedAI(3,a[1],t);for(let a of oe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(a[0]===s)return a[1]===oe.VARIABLE_LENGTH?oe.processVariableAI(4,a[2],t):oe.processFixedAI(4,a[1],t);if(t.length<4)throw new H;let o=t.substring(0,4);for(let a of oe.FOUR_DIGIT_DATA_LENGTH)if(a[0]===o)return a[1]===oe.VARIABLE_LENGTH?oe.processVariableAI(4,a[2],t):oe.processFixedAI(4,a[1],t);throw new H}static processFixedAI(t,r,s){if(s.length<t)throw new H;let o=s.substring(0,t);if(s.length<t+r)throw new H;let a=s.substring(t,t+r),u=s.substring(t+r),d="("+o+")"+a,h=oe.parseFieldsInGeneralPurpose(u);return h==null?d:d+h}static processVariableAI(t,r,s){let o=s.substring(0,t),a;s.length<t+r?a=s.length:a=t+r;let u=s.substring(t,a),d=s.substring(a),h="("+o+")"+u,x=oe.parseFieldsInGeneralPurpose(d);return x==null?h:h+x}}oe.VARIABLE_LENGTH=[],oe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",oe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",oe.VARIABLE_LENGTH,20],["22",oe.VARIABLE_LENGTH,29],["30",oe.VARIABLE_LENGTH,8],["37",oe.VARIABLE_LENGTH,8],["90",oe.VARIABLE_LENGTH,30],["91",oe.VARIABLE_LENGTH,30],["92",oe.VARIABLE_LENGTH,30],["93",oe.VARIABLE_LENGTH,30],["94",oe.VARIABLE_LENGTH,30],["95",oe.VARIABLE_LENGTH,30],["96",oe.VARIABLE_LENGTH,30],["97",oe.VARIABLE_LENGTH,3],["98",oe.VARIABLE_LENGTH,30],["99",oe.VARIABLE_LENGTH,30]],oe.THREE_DIGIT_DATA_LENGTH=[["240",oe.VARIABLE_LENGTH,30],["241",oe.VARIABLE_LENGTH,30],["242",oe.VARIABLE_LENGTH,6],["250",oe.VARIABLE_LENGTH,30],["251",oe.VARIABLE_LENGTH,30],["253",oe.VARIABLE_LENGTH,17],["254",oe.VARIABLE_LENGTH,20],["400",oe.VARIABLE_LENGTH,30],["401",oe.VARIABLE_LENGTH,30],["402",17],["403",oe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",oe.VARIABLE_LENGTH,20],["421",oe.VARIABLE_LENGTH,15],["422",3],["423",oe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],oe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",oe.VARIABLE_LENGTH,15],["391",oe.VARIABLE_LENGTH,18],["392",oe.VARIABLE_LENGTH,15],["393",oe.VARIABLE_LENGTH,18],["703",oe.VARIABLE_LENGTH,30]],oe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",oe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",oe.VARIABLE_LENGTH,20],["8003",oe.VARIABLE_LENGTH,30],["8004",oe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",oe.VARIABLE_LENGTH,30],["8008",oe.VARIABLE_LENGTH,12],["8018",18],["8020",oe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",oe.VARIABLE_LENGTH,70],["8200",oe.VARIABLE_LENGTH,70]];class ri{constructor(t){this.buffer=new K,this.information=t}decodeAllCodes(t,r){let s=r,o=null;do{let a=this.decodeGeneralPurposeField(s,o),u=oe.parseFieldsInGeneralPurpose(a.getNewString());if(u!=null&&t.append(u),a.isRemaining()?o=""+a.getRemainingValue():o=null,s===a.getNewPosition())break;s=a.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let r=t;r<t+3;++r)if(this.information.get(r))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let a=this.extractNumericValueFromBitArray(t,4);return a===0?new ln(this.information.getSize(),ln.FNC1,ln.FNC1):new ln(this.information.getSize(),a-1,ln.FNC1)}let r=this.extractNumericValueFromBitArray(t,7),s=(r-8)/11,o=(r-8)%11;return new ln(t+7,s,o)}extractNumericValueFromBitArray(t,r){return ri.extractNumericValueFromBitArray(this.information,t,r)}static extractNumericValueFromBitArray(t,r,s){let o=0;for(let a=0;a<s;++a)t.get(r+a)&&(o|=1<<s-a-1);return o}decodeGeneralPurposeField(t,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(t);let s=this.parseBlocks();return s!=null&&s.isRemaining()?new kr(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new kr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,r;do{let s=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),t=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),t=r.isFinished()):(r=this.parseNumericBlock(),t=r.isFinished()),!(s!==this.current.getPosition())&&!t)break}while(!t);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let r;return t.isSecondDigitFNC1()?r=new kr(this.current.getPosition(),this.buffer.toString()):r=new kr(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Dr(!0,r)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let r=new kr(this.current.getPosition(),this.buffer.toString());return new Dr(!0,r)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Dr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new kr(this.current.getPosition(),this.buffer.toString());return new Dr(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Dr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new kr(this.current.getPosition(),this.buffer.toString());return new Dr(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Dr(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+7>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(t,7);if(s>=64&&s<116)return!0;if(t+8>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,8);return o>=232&&o<253}decodeIsoIec646(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new zt(t+5,zt.FNC1);if(r>=5&&r<15)return new zt(t+5,"0"+(r-5));let s=this.extractNumericValueFromBitArray(t,7);if(s>=64&&s<90)return new zt(t+7,""+(s+1));if(s>=90&&s<116)return new zt(t+7,""+(s+7));let o=this.extractNumericValueFromBitArray(t,8),a;switch(o){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new L}return new zt(t+8,a)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+6>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(t,6);return s>=16&&s<63}decodeAlphanumeric(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new zt(t+5,zt.FNC1);if(r>=5&&r<15)return new zt(t+5,"0"+(r-5));let s=this.extractNumericValueFromBitArray(t,6);if(s>=32&&s<58)return new zt(t+6,""+(s+33));let o;switch(s){case 58:o="*";break;case 59:o=",";break;case 60:o="-";break;case 61:o=".";break;case 62:o="/";break;default:throw new bn("Decoding invalid alphanumeric value: "+s)}return new zt(t+6,o)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<5&&r+t<this.information.getSize();++r)if(r===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+r))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let r=t;r<t+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<4&&r+t<this.information.getSize();++r)if(this.information.get(t+r))return!1;return!0}}class Gl{constructor(t){this.information=t,this.generalDecoder=new ri(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Vt extends Gl{constructor(t){super(t)}encodeCompressedGtin(t,r){t.append("(01)");let s=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,s)}encodeCompressedGtinWithoutAI(t,r,s){for(let o=0;o<4;++o){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);a/100===0&&t.append("0"),a/10===0&&t.append("0"),t.append(a)}Vt.appendCheckDigit(t,s)}static appendCheckDigit(t,r){let s=0;for(let o=0;o<13;o++){let a=t.charAt(o+r).charCodeAt(0)-48;s+=o&1?a:3*a}s=10-s%10,s===10&&(s=0),t.append(s)}}Vt.GTIN_SIZE=40;class ii extends Vt{constructor(t){super(t)}parseInformation(){let t=new K;t.append("(01)");let r=t.length(),s=this.getGeneralDecoder().extractNumericValueFromBitArray(ii.HEADER_SIZE,4);return t.append(s),this.encodeCompressedGtinWithoutAI(t,ii.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,ii.HEADER_SIZE+44)}}ii.HEADER_SIZE=4;class ao extends Gl{constructor(t){super(t)}parseInformation(){let t=new K;return this.getGeneralDecoder().decodeAllCodes(t,ao.HEADER_SIZE)}}ao.HEADER_SIZE=5;class uo extends Vt{constructor(t){super(t)}encodeCompressedWeight(t,r,s){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,s);this.addWeightCode(t,o);let a=this.checkWeight(o),u=1e5;for(let d=0;d<5;++d)a/u===0&&t.append("0"),u/=10;t.append(a)}}class Tn extends uo{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Tn.HEADER_SIZE+uo.GTIN_SIZE+Tn.WEIGHT_SIZE)throw new H;let t=new K;return this.encodeCompressedGtin(t,Tn.HEADER_SIZE),this.encodeCompressedWeight(t,Tn.HEADER_SIZE+uo.GTIN_SIZE,Tn.WEIGHT_SIZE),t.toString()}}Tn.HEADER_SIZE=5,Tn.WEIGHT_SIZE=15;class Ch extends Tn{constructor(t){super(t)}addWeightCode(t,r){t.append("(3103)")}checkWeight(t){return t}}class vh extends Tn{constructor(t){super(t)}addWeightCode(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Rn extends Vt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Rn.HEADER_SIZE+Vt.GTIN_SIZE)throw new H;let t=new K;this.encodeCompressedGtin(t,Rn.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Rn.HEADER_SIZE+Vt.GTIN_SIZE,Rn.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");let s=this.getGeneralDecoder().decodeGeneralPurposeField(Rn.HEADER_SIZE+Vt.GTIN_SIZE+Rn.LAST_DIGIT_SIZE,null);return t.append(s.getNewString()),t.toString()}}Rn.HEADER_SIZE=8,Rn.LAST_DIGIT_SIZE=2;class Pt extends Vt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Pt.HEADER_SIZE+Vt.GTIN_SIZE)throw new H;let t=new K;this.encodeCompressedGtin(t,Pt.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Pt.HEADER_SIZE+Vt.GTIN_SIZE,Pt.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Pt.HEADER_SIZE+Vt.GTIN_SIZE+Pt.LAST_DIGIT_SIZE,Pt.FIRST_THREE_DIGITS_SIZE);s/100==0&&t.append("0"),s/10==0&&t.append("0"),t.append(s);let o=this.getGeneralDecoder().decodeGeneralPurposeField(Pt.HEADER_SIZE+Vt.GTIN_SIZE+Pt.LAST_DIGIT_SIZE+Pt.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()}}Pt.HEADER_SIZE=8,Pt.LAST_DIGIT_SIZE=2,Pt.FIRST_THREE_DIGITS_SIZE=10;class Ye extends uo{constructor(t,r,s){super(t),this.dateCode=s,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=Ye.HEADER_SIZE+Ye.GTIN_SIZE+Ye.WEIGHT_SIZE+Ye.DATE_SIZE)throw new H;let t=new K;return this.encodeCompressedGtin(t,Ye.HEADER_SIZE),this.encodeCompressedWeight(t,Ye.HEADER_SIZE+Ye.GTIN_SIZE,Ye.WEIGHT_SIZE),this.encodeCompressedDate(t,Ye.HEADER_SIZE+Ye.GTIN_SIZE+Ye.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,r){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(r,Ye.DATE_SIZE);if(s==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let o=s%32;s/=32;let a=s%12+1;s/=12;let u=s;u/10==0&&t.append("0"),t.append(u),a/10==0&&t.append("0"),t.append(a),o/10==0&&t.append("0"),t.append(o)}addWeightCode(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")}checkWeight(t){return t%1e5}}Ye.HEADER_SIZE=8,Ye.WEIGHT_SIZE=20,Ye.DATE_SIZE=16;function Pc(A){try{if(A.get(1))return new ii(A);if(!A.get(2))return new ao(A);switch(ri.extractNumericValueFromBitArray(A,1,4)){case 4:return new Ch(A);case 5:return new vh(A)}switch(ri.extractNumericValueFromBitArray(A,1,5)){case 12:return new Rn(A);case 13:return new Pt(A)}switch(ri.extractNumericValueFromBitArray(A,1,7)){case 56:return new Ye(A,"310","11");case 57:return new Ye(A,"320","11");case 58:return new Ye(A,"310","13");case 59:return new Ye(A,"320","13");case 60:return new Ye(A,"310","15");case 61:return new Ye(A,"320","15");case 62:return new Ye(A,"310","17");case 63:return new Ye(A,"320","17")}}catch(t){throw console.log(t),new bn("unknown decoder: "+A)}}class rr{constructor(t,r,s,o){this.leftchar=t,this.rightchar=r,this.finderpattern=s,this.maybeLast=o}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,r){return t instanceof rr?rr.equalsOrNull(t.leftchar,r.leftchar)&&rr.equalsOrNull(t.rightchar,r.rightchar)&&rr.equalsOrNull(t.finderpattern,r.finderpattern):!1}static equalsOrNull(t,r){return t===null?r===null:rr.equals(t,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Xl{constructor(t,r,s){this.pairs=t,this.rowNumber=r,this.wasReversed=s}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,r){return t instanceof Xl?this.checkEqualitity(t,r)&&t.wasReversed===r.wasReversed:!1}checkEqualitity(t,r){if(!t||!r)return;let s;return t.forEach((o,a)=>{r.forEach(u=>{o.getLeftChar().getValue()===u.getLeftChar().getValue()&&o.getRightChar().getValue()===u.getRightChar().getValue()&&o.getFinderPatter().getValue()===u.getFinderPatter().getValue()&&(s=!0)})}),s}}class Z extends _t{constructor(t){super(...arguments),this.pairs=new Array(Z.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,r,s){this.pairs.length=0,this.startFromEven=!1;try{return Z.constructResult(this.decodeRow2pairs(t,r))}catch(o){this.verbose&&console.log(o)}return this.pairs.length=0,this.startFromEven=!0,Z.constructResult(this.decodeRow2pairs(t,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,r){let s=!1;for(;!s;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(a){if(a instanceof H){if(!this.pairs.length)throw new H;s=!0}}if(this.checkChecksum())return this.pairs;let o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){let a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new H}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(s){this.verbose&&console.log(s)}return t&&(this.rows=this.rows.reverse()),r}checkRows(t,r){for(let s=r;s<this.rows.length;s++){let o=this.rows[s];this.pairs.length=0;for(let u of t)this.pairs.push(u.getPairs());if(this.pairs.push(o.getPairs()),!Z.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let a=new Array(t);a.push(o);try{return this.checkRows(a,s+1)}catch(u){this.verbose&&console.log(u)}}throw new H}static isValidSequence(t){for(let r of Z.FINDER_PATTERN_SEQUENCES){if(t.length>r.length)continue;let s=!0;for(let o=0;o<t.length;o++)if(t[o].getFinderPattern().getValue()!=r[o]){s=!1;break}if(s)return!0}return!1}storeRow(t,r){let s=0,o=!1,a=!1;for(;s<this.rows.length;){let u=this.rows[s];if(u.getRowNumber()>t){a=u.isEquivalent(this.pairs);break}o=u.isEquivalent(this.pairs),s++}a||o||Z.isPartialRow(this.pairs,this.rows)||(this.rows.push(s,new Xl(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,r){for(let s of r)if(s.getPairs().length!==t.length){for(let o of s.getPairs())for(let a of t)if(rr.equals(o,a))break}}static isPartialRow(t,r){for(let s of r){let o=!0;for(let a of t){let u=!1;for(let d of s.getPairs())if(a.equals(d)){u=!0;break}if(!u){o=!1;break}}if(o)return!0}return!1}getRows(){return this.rows}static constructResult(t){let r=Eh.buildBitArray(t),o=Pc(r).parseInformation(),a=t[0].getFinderPattern().getResultPoints(),u=t[t.length-1].getFinderPattern().getResultPoints(),d=[a[0],a[1],u[0],u[1]];return new Qe(o,null,null,d,ce.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),r=t.getLeftChar(),s=t.getRightChar();if(s==null)return!1;let o=s.getChecksumPortion(),a=2;for(let d=1;d<this.pairs.size();++d){let h=this.pairs.get(d);o+=h.getLeftChar().getChecksumPortion(),a++;let x=h.getRightChar();x!=null&&(o+=x.getChecksumPortion(),a++)}return o%=211,211*(a-4)+o==r.getValue()}static getNextSecondBar(t,r){let s;return t.get(r)?(s=t.getNextUnset(r),s=t.getNextSet(s)):(s=t.getNextSet(r),s=t.getNextUnset(s)),s}retrieveNextPair(t,r,s){let o=r.length%2==0;this.startFromEven&&(o=!o);let a,u=!0,d=-1;do this.findNextPair(t,r,d),a=this.parseFoundFinderPattern(t,s,o),a==null?d=Z.getNextSecondBar(t,this.startEnd[0]):u=!1;while(u);let h=this.decodeDataCharacter(t,a,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new H;let x;try{x=this.decodeDataCharacter(t,a,o,!1)}catch(w){x=null,this.verbose&&console.log(w)}return new rr(h,x,a,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,r,s){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=t.getSize(),u;s>=0?u=s:this.isEmptyPair(r)?u=0:u=r[r.length-1].getFinderPattern().getStartEnd()[1];let d=r.length%2!=0;this.startFromEven&&(d=!d);let h=!1;for(;u<a&&(h=!t.get(u),!!h);)u++;let x=0,w=u;for(let S=u;S<a;S++)if(t.get(S)!=h)o[x]++;else{if(x==3){if(d&&Z.reverseCounters(o),Z.isFinderPattern(o)){this.startEnd[0]=w,this.startEnd[1]=S;return}d&&Z.reverseCounters(o),w+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,x--}else x++;o[x]=1,h=!h}throw new H}static reverseCounters(t){let r=t.length;for(let s=0;s<r/2;++s){let o=t[s];t[s]=t[r-s-1],t[r-s-1]=o}}parseFoundFinderPattern(t,r,s){let o,a,u;if(s){let x=this.startEnd[0]-1;for(;x>=0&&!t.get(x);)x--;x++,o=this.startEnd[0]-x,a=x,u=this.startEnd[1]}else a=this.startEnd[0],u=t.getNextUnset(this.startEnd[1]+1),o=u-this.startEnd[1];let d=this.getDecodeFinderCounters();k.arraycopy(d,0,d,1,d.length-1),d[0]=o;let h;try{h=this.parseFinderValue(d,Z.FINDER_PATTERNS)}catch{return null}return new lo(h,[a,u],a,u,r)}decodeDataCharacter(t,r,s,o){let a=this.getDataCharacterCounters();for(let je=0;je<a.length;je++)a[je]=0;if(o)Z.recordPatternInReverse(t,r.getStartEnd()[0],a);else{Z.recordPattern(t,r.getStartEnd()[1],a);for(let je=0,St=a.length-1;je<St;je++,St--){let qt=a[je];a[je]=a[St],a[St]=qt}}let u=17,d=_e.sum(new Int32Array(a))/u,h=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(d-h)/h>.3)throw new H;let x=this.getOddCounts(),w=this.getEvenCounts(),S=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors();for(let je=0;je<a.length;je++){let St=1*a[je]/d,qt=St+.5;if(qt<1){if(St<.3)throw new H;qt=1}else if(qt>8){if(St>8.7)throw new H;qt=8}let ui=je/2;je&1?(w[ui]=qt,N[ui]=St-qt):(x[ui]=qt,S[ui]=St-qt)}this.adjustOddEvenCounts(u);let R=4*r.getValue()+(s?0:2)+(o?0:1)-1,P=0,B=0;for(let je=x.length-1;je>=0;je--){if(Z.isNotA1left(r,s,o)){let St=Z.WEIGHTS[R][2*je];B+=x[je]*St}P+=x[je]}let U=0;for(let je=w.length-1;je>=0;je--)if(Z.isNotA1left(r,s,o)){let St=Z.WEIGHTS[R][2*je+1];U+=w[je]*St}let G=B+U;if(P&1||P>13||P<4)throw new H;let ee=(13-P)/2,te=Z.SYMBOL_WIDEST[ee],J=9-te,Ae=_n.getRSSvalue(x,te,!0),ye=_n.getRSSvalue(w,J,!1),Wt=Z.EVEN_TOTAL_SUBSET[ee],yn=Z.GSUM[ee],Gt=Ae*Wt+ye+yn;return new ni(Gt,G)}static isNotA1left(t,r,s){return!(t.getValue()==0&&r&&s)}adjustOddEvenCounts(t){let r=_e.sum(new Int32Array(this.getOddCounts())),s=_e.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1;r>13?a=!0:r<4&&(o=!0);let u=!1,d=!1;s>13?d=!0:s<4&&(u=!0);let h=r+s-t,x=(r&1)==1,w=(s&1)==0;if(h==1)if(x){if(w)throw new H;a=!0}else{if(!w)throw new H;d=!0}else if(h==-1)if(x){if(w)throw new H;o=!0}else{if(!w)throw new H;u=!0}else if(h==0){if(x){if(!w)throw new H;r<s?(o=!0,d=!0):(a=!0,u=!0)}else if(w)throw new H}else throw new H;if(o){if(a)throw new H;Z.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&Z.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(d)throw new H;Z.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&Z.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Z.SYMBOL_WIDEST=[7,5,4,3,1],Z.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Z.GSUM=[0,348,1388,2948,3988],Z.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Z.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Z.FINDER_PAT_A=0,Z.FINDER_PAT_B=1,Z.FINDER_PAT_C=2,Z.FINDER_PAT_D=3,Z.FINDER_PAT_E=4,Z.FINDER_PAT_F=5,Z.FINDER_PATTERN_SEQUENCES=[[Z.FINDER_PAT_A,Z.FINDER_PAT_A],[Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B],[Z.FINDER_PAT_A,Z.FINDER_PAT_C,Z.FINDER_PAT_B,Z.FINDER_PAT_D],[Z.FINDER_PAT_A,Z.FINDER_PAT_E,Z.FINDER_PAT_B,Z.FINDER_PAT_D,Z.FINDER_PAT_C],[Z.FINDER_PAT_A,Z.FINDER_PAT_E,Z.FINDER_PAT_B,Z.FINDER_PAT_D,Z.FINDER_PAT_D,Z.FINDER_PAT_F],[Z.FINDER_PAT_A,Z.FINDER_PAT_E,Z.FINDER_PAT_B,Z.FINDER_PAT_D,Z.FINDER_PAT_E,Z.FINDER_PAT_F,Z.FINDER_PAT_F],[Z.FINDER_PAT_A,Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B,Z.FINDER_PAT_C,Z.FINDER_PAT_C,Z.FINDER_PAT_D,Z.FINDER_PAT_D],[Z.FINDER_PAT_A,Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B,Z.FINDER_PAT_C,Z.FINDER_PAT_C,Z.FINDER_PAT_D,Z.FINDER_PAT_E,Z.FINDER_PAT_E],[Z.FINDER_PAT_A,Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B,Z.FINDER_PAT_C,Z.FINDER_PAT_C,Z.FINDER_PAT_D,Z.FINDER_PAT_E,Z.FINDER_PAT_F,Z.FINDER_PAT_F],[Z.FINDER_PAT_A,Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B,Z.FINDER_PAT_C,Z.FINDER_PAT_D,Z.FINDER_PAT_D,Z.FINDER_PAT_E,Z.FINDER_PAT_E,Z.FINDER_PAT_F,Z.FINDER_PAT_F]],Z.MAX_PAIRS=11;class Ah extends ni{constructor(t,r,s){super(t,r),this.count=0,this.finderPattern=s}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class nt extends _t{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,r,s){const o=this.decodePair(r,!1,t,s);nt.addOrTally(this.possibleLeftPairs,o),r.reverse();let a=this.decodePair(r,!0,t,s);nt.addOrTally(this.possibleRightPairs,a),r.reverse();for(let u of this.possibleLeftPairs)if(u.getCount()>1){for(let d of this.possibleRightPairs)if(d.getCount()>1&&nt.checkChecksum(u,d))return nt.constructResult(u,d)}throw new H}static addOrTally(t,r){if(r==null)return;let s=!1;for(let o of t)if(o.getValue()===r.getValue()){o.incrementCount(),s=!0;break}s||t.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,r){let s=4537077*t.getValue()+r.getValue(),o=new String(s).toString(),a=new K;for(let x=13-o.length;x>0;x--)a.append("0");a.append(o);let u=0;for(let x=0;x<13;x++){let w=a.charAt(x).charCodeAt(0)-48;u+=x&1?w:3*w}u=10-u%10,u===10&&(u=0),a.append(u.toString());let d=t.getFinderPattern().getResultPoints(),h=r.getFinderPattern().getResultPoints();return new Qe(a.toString(),null,0,[d[0],d[1],h[0],h[1]],ce.RSS_14,new Date().getTime())}static checkChecksum(t,r){let s=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,s===o}decodePair(t,r,s,o){try{let a=this.findFinderPattern(t,r),u=this.parseFoundFinderPattern(t,s,r,a),d=o==null?null:o.get(z.NEED_RESULT_POINT_CALLBACK);if(d!=null){let w=(a[0]+a[1])/2;r&&(w=t.getSize()-1-w),d.foundPossibleResultPoint(new ue(w,s))}let h=this.decodeDataCharacter(t,u,!0),x=this.decodeDataCharacter(t,u,!1);return new Ah(1597*h.getValue()+x.getValue(),h.getChecksumPortion()+4*x.getChecksumPortion(),u)}catch{return null}}decodeDataCharacter(t,r,s){let o=this.getDataCharacterCounters();for(let U=0;U<o.length;U++)o[U]=0;if(s)at.recordPatternInReverse(t,r.getStartEnd()[0],o);else{at.recordPattern(t,r.getStartEnd()[1]+1,o);for(let U=0,G=o.length-1;U<G;U++,G--){let ee=o[U];o[U]=o[G],o[G]=ee}}let a=s?16:15,u=_e.sum(new Int32Array(o))/a,d=this.getOddCounts(),h=this.getEvenCounts(),x=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors();for(let U=0;U<o.length;U++){let G=o[U]/u,ee=Math.floor(G+.5);ee<1?ee=1:ee>8&&(ee=8);let te=Math.floor(U/2);U&1?(h[te]=ee,w[te]=G-ee):(d[te]=ee,x[te]=G-ee)}this.adjustOddEvenCounts(s,a);let S=0,N=0;for(let U=d.length-1;U>=0;U--)N*=9,N+=d[U],S+=d[U];let R=0,P=0;for(let U=h.length-1;U>=0;U--)R*=9,R+=h[U],P+=h[U];let B=N+3*R;if(s){if(S&1||S>12||S<4)throw new H;let U=(12-S)/2,G=nt.OUTSIDE_ODD_WIDEST[U],ee=9-G,te=_n.getRSSvalue(d,G,!1),J=_n.getRSSvalue(h,ee,!0),Ae=nt.OUTSIDE_EVEN_TOTAL_SUBSET[U],ye=nt.OUTSIDE_GSUM[U];return new ni(te*Ae+J+ye,B)}else{if(P&1||P>10||P<4)throw new H;let U=(10-P)/2,G=nt.INSIDE_ODD_WIDEST[U],ee=9-G,te=_n.getRSSvalue(d,G,!0),J=_n.getRSSvalue(h,ee,!1),Ae=nt.INSIDE_ODD_TOTAL_SUBSET[U],ye=nt.INSIDE_GSUM[U];return new ni(J*Ae+te+ye,B)}}findFinderPattern(t,r){let s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;let o=t.getSize(),a=!1,u=0;for(;u<o&&(a=!t.get(u),r!==a);)u++;let d=0,h=u;for(let x=u;x<o;x++)if(t.get(x)!==a)s[d]++;else{if(d===3){if(_t.isFinderPattern(s))return[h,x];h+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,d--}else d++;s[d]=1,a=!a}throw new H}parseFoundFinderPattern(t,r,s,o){let a=t.get(o[0]),u=o[0]-1;for(;u>=0&&a!==t.get(u);)u--;u++;const d=o[0]-u,h=this.getDecodeFinderCounters(),x=new Int32Array(h.length);k.arraycopy(h,0,x,1,h.length-1),x[0]=d;const w=this.parseFinderValue(x,nt.FINDER_PATTERNS);let S=u,N=o[1];return s&&(S=t.getSize()-1-S,N=t.getSize()-1-N),new lo(w,[u,o[1]],S,N,r)}adjustOddEvenCounts(t,r){let s=_e.sum(new Int32Array(this.getOddCounts())),o=_e.sum(new Int32Array(this.getEvenCounts())),a=!1,u=!1,d=!1,h=!1;t?(s>12?u=!0:s<4&&(a=!0),o>12?h=!0:o<4&&(d=!0)):(s>11?u=!0:s<5&&(a=!0),o>10?h=!0:o<4&&(d=!0));let x=s+o-r,w=(s&1)===(t?1:0),S=(o&1)===1;if(x===1)if(w){if(S)throw new H;u=!0}else{if(!S)throw new H;h=!0}else if(x===-1)if(w){if(S)throw new H;a=!0}else{if(!S)throw new H;d=!0}else if(x===0){if(w){if(!S)throw new H;s<o?(a=!0,h=!0):(u=!0,d=!0)}else if(S)throw new H}else throw new H;if(a){if(u)throw new H;_t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&_t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(h)throw new H;_t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&_t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}nt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],nt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],nt.OUTSIDE_GSUM=[0,161,961,2015,2715],nt.INSIDE_GSUM=[0,336,1036,1516],nt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],nt.INSIDE_ODD_WIDEST=[2,4,6,8],nt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class si extends at{constructor(t,r){super(),this.readers=[],this.verbose=r===!0;const s=t?t.get(z.POSSIBLE_FORMATS):null,o=t&&t.get(z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;s?((s.includes(ce.EAN_13)||s.includes(ce.UPC_A)||s.includes(ce.EAN_8)||s.includes(ce.UPC_E))&&this.readers.push(new Hl(t)),s.includes(ce.CODE_39)&&this.readers.push(new ft(o)),s.includes(ce.CODE_128)&&this.readers.push(new ne),s.includes(ce.ITF)&&this.readers.push(new Le),s.includes(ce.RSS_14)&&this.readers.push(new nt),s.includes(ce.RSS_EXPANDED)&&this.readers.push(new Z(this.verbose))):(this.readers.push(new Hl(t)),this.readers.push(new ft),this.readers.push(new Hl(t)),this.readers.push(new ne),this.readers.push(new Le),this.readers.push(new nt),this.readers.push(new Z(this.verbose)))}decodeRow(t,r,s){for(let o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,r,s)}catch{}throw new H}reset(){this.readers.forEach(t=>t.reset())}}class Sh extends on{constructor(t=500,r){super(new si(r),t,r)}}class ke{constructor(t,r,s){this.ecCodewords=t,this.ecBlocks=[r],s&&this.ecBlocks.push(s)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class De{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ie{constructor(t,r,s,o,a,u){this.versionNumber=t,this.symbolSizeRows=r,this.symbolSizeColumns=s,this.dataRegionSizeRows=o,this.dataRegionSizeColumns=a,this.ecBlocks=u;let d=0;const h=u.getECCodewords(),x=u.getECBlocks();for(let w of x)d+=w.getCount()*(w.getDataCodewords()+h);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,r){if(t&1||r&1)throw new L;for(let s of Ie.VERSIONS)if(s.symbolSizeRows===t&&s.symbolSizeColumns===r)return s;throw new L}toString(){return""+this.versionNumber}static buildVersions(){return[new Ie(1,10,10,8,8,new ke(5,new De(1,3))),new Ie(2,12,12,10,10,new ke(7,new De(1,5))),new Ie(3,14,14,12,12,new ke(10,new De(1,8))),new Ie(4,16,16,14,14,new ke(12,new De(1,12))),new Ie(5,18,18,16,16,new ke(14,new De(1,18))),new Ie(6,20,20,18,18,new ke(18,new De(1,22))),new Ie(7,22,22,20,20,new ke(20,new De(1,30))),new Ie(8,24,24,22,22,new ke(24,new De(1,36))),new Ie(9,26,26,24,24,new ke(28,new De(1,44))),new Ie(10,32,32,14,14,new ke(36,new De(1,62))),new Ie(11,36,36,16,16,new ke(42,new De(1,86))),new Ie(12,40,40,18,18,new ke(48,new De(1,114))),new Ie(13,44,44,20,20,new ke(56,new De(1,144))),new Ie(14,48,48,22,22,new ke(68,new De(1,174))),new Ie(15,52,52,24,24,new ke(42,new De(2,102))),new Ie(16,64,64,14,14,new ke(56,new De(2,140))),new Ie(17,72,72,16,16,new ke(36,new De(4,92))),new Ie(18,80,80,18,18,new ke(48,new De(4,114))),new Ie(19,88,88,20,20,new ke(56,new De(4,144))),new Ie(20,96,96,22,22,new ke(68,new De(4,174))),new Ie(21,104,104,24,24,new ke(56,new De(6,136))),new Ie(22,120,120,18,18,new ke(68,new De(6,175))),new Ie(23,132,132,20,20,new ke(62,new De(8,163))),new Ie(24,144,144,22,22,new ke(62,new De(8,156),new De(2,155))),new Ie(25,8,18,6,16,new ke(7,new De(1,5))),new Ie(26,8,32,6,14,new ke(11,new De(1,10))),new Ie(27,12,26,10,24,new ke(14,new De(1,16))),new Ie(28,12,36,10,16,new ke(18,new De(1,22))),new Ie(29,16,36,14,16,new ke(24,new De(1,32))),new Ie(30,16,48,14,22,new ke(28,new De(1,49)))]}}Ie.VERSIONS=Ie.buildVersions();class Yl{constructor(t){const r=t.getHeight();if(r<8||r>144||r&1)throw new L;this.version=Yl.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new se(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const r=t.getHeight(),s=t.getWidth();return Ie.getVersionForDimensions(r,s)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let r=0,s=4,o=0;const a=this.mappingBitMatrix.getHeight(),u=this.mappingBitMatrix.getWidth();let d=!1,h=!1,x=!1,w=!1;do if(s===a&&o===0&&!d)t[r++]=this.readCorner1(a,u)&255,s-=2,o+=2,d=!0;else if(s===a-2&&o===0&&u&3&&!h)t[r++]=this.readCorner2(a,u)&255,s-=2,o+=2,h=!0;else if(s===a+4&&o===2&&!(u&7)&&!x)t[r++]=this.readCorner3(a,u)&255,s-=2,o+=2,x=!0;else if(s===a-2&&o===0&&(u&7)===4&&!w)t[r++]=this.readCorner4(a,u)&255,s-=2,o+=2,w=!0;else{do s<a&&o>=0&&!this.readMappingMatrix.get(o,s)&&(t[r++]=this.readUtah(s,o,a,u)&255),s-=2,o+=2;while(s>=0&&o<u);s+=1,o+=3;do s>=0&&o<u&&!this.readMappingMatrix.get(o,s)&&(t[r++]=this.readUtah(s,o,a,u)&255),s+=2,o-=2;while(s<a&&o>=0);s+=3,o+=1}while(s<a||o<u);if(r!==this.version.getTotalCodewords())throw new L;return t}readModule(t,r,s,o){return t<0&&(t+=s,r+=4-(s+4&7)),r<0&&(r+=o,t+=4-(o+4&7)),this.readMappingMatrix.set(r,t),this.mappingBitMatrix.get(r,t)}readUtah(t,r,s,o){let a=0;return this.readModule(t-2,r-2,s,o)&&(a|=1),a<<=1,this.readModule(t-2,r-1,s,o)&&(a|=1),a<<=1,this.readModule(t-1,r-2,s,o)&&(a|=1),a<<=1,this.readModule(t-1,r-1,s,o)&&(a|=1),a<<=1,this.readModule(t-1,r,s,o)&&(a|=1),a<<=1,this.readModule(t,r-2,s,o)&&(a|=1),a<<=1,this.readModule(t,r-1,s,o)&&(a|=1),a<<=1,this.readModule(t,r,s,o)&&(a|=1),a}readCorner1(t,r){let s=0;return this.readModule(t-1,0,t,r)&&(s|=1),s<<=1,this.readModule(t-1,1,t,r)&&(s|=1),s<<=1,this.readModule(t-1,2,t,r)&&(s|=1),s<<=1,this.readModule(0,r-2,t,r)&&(s|=1),s<<=1,this.readModule(0,r-1,t,r)&&(s|=1),s<<=1,this.readModule(1,r-1,t,r)&&(s|=1),s<<=1,this.readModule(2,r-1,t,r)&&(s|=1),s<<=1,this.readModule(3,r-1,t,r)&&(s|=1),s}readCorner2(t,r){let s=0;return this.readModule(t-3,0,t,r)&&(s|=1),s<<=1,this.readModule(t-2,0,t,r)&&(s|=1),s<<=1,this.readModule(t-1,0,t,r)&&(s|=1),s<<=1,this.readModule(0,r-4,t,r)&&(s|=1),s<<=1,this.readModule(0,r-3,t,r)&&(s|=1),s<<=1,this.readModule(0,r-2,t,r)&&(s|=1),s<<=1,this.readModule(0,r-1,t,r)&&(s|=1),s<<=1,this.readModule(1,r-1,t,r)&&(s|=1),s}readCorner3(t,r){let s=0;return this.readModule(t-1,0,t,r)&&(s|=1),s<<=1,this.readModule(t-1,r-1,t,r)&&(s|=1),s<<=1,this.readModule(0,r-3,t,r)&&(s|=1),s<<=1,this.readModule(0,r-2,t,r)&&(s|=1),s<<=1,this.readModule(0,r-1,t,r)&&(s|=1),s<<=1,this.readModule(1,r-3,t,r)&&(s|=1),s<<=1,this.readModule(1,r-2,t,r)&&(s|=1),s<<=1,this.readModule(1,r-1,t,r)&&(s|=1),s}readCorner4(t,r){let s=0;return this.readModule(t-3,0,t,r)&&(s|=1),s<<=1,this.readModule(t-2,0,t,r)&&(s|=1),s<<=1,this.readModule(t-1,0,t,r)&&(s|=1),s<<=1,this.readModule(0,r-2,t,r)&&(s|=1),s<<=1,this.readModule(0,r-1,t,r)&&(s|=1),s<<=1,this.readModule(1,r-1,t,r)&&(s|=1),s<<=1,this.readModule(2,r-1,t,r)&&(s|=1),s<<=1,this.readModule(3,r-1,t,r)&&(s|=1),s}extractDataRegion(t){const r=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(t.getHeight()!==r)throw new v("Dimension of bitMatrix must match the version size");const o=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),u=r/o|0,d=s/a|0,h=u*o,x=d*a,w=new se(x,h);for(let S=0;S<u;++S){const N=S*o;for(let R=0;R<d;++R){const P=R*a;for(let B=0;B<o;++B){const U=S*(o+2)+1+B,G=N+B;for(let ee=0;ee<a;++ee){const te=R*(a+2)+1+ee;if(t.get(te,U)){const J=P+ee;w.set(J,G)}}}}}return w}}class Zl{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r){const s=r.getECBlocks();let o=0;const a=s.getECBlocks();for(let B of a)o+=B.getCount();const u=new Array(o);let d=0;for(let B of a)for(let U=0;U<B.getCount();U++){const G=B.getDataCodewords(),ee=s.getECCodewords()+G;u[d++]=new Zl(G,new Uint8Array(ee))}const x=u[0].codewords.length-s.getECCodewords(),w=x-1;let S=0;for(let B=0;B<w;B++)for(let U=0;U<d;U++)u[U].codewords[B]=t[S++];const N=r.getVersionNumber()===24,R=N?8:d;for(let B=0;B<R;B++)u[B].codewords[x-1]=t[S++];const P=u[0].codewords.length;for(let B=x;B<P;B++)for(let U=0;U<d;U++){const G=N?(U+8)%d:U,ee=N&&G>7?B-1:B;u[G].codewords[ee]=t[S++]}if(S!==t.length)throw new v;return u}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ql{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new v(""+t);let r=0,s=this.bitOffset,o=this.byteOffset;const a=this.bytes;if(s>0){const u=8-s,d=t<u?t:u,h=u-d,x=255>>8-d<<h;r=(a[o]&x)>>h,t-=d,s+=d,s===8&&(s=0,o++)}if(t>0){for(;t>=8;)r=r<<8|a[o]&255,o++,t-=8;if(t>0){const u=8-t,d=255>>u<<u;r=r<<t|(a[o]&d)>>u,s+=t}}return this.bitOffset=s,this.byteOffset=o,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var dt;(function(A){A[A.PAD_ENCODE=0]="PAD_ENCODE",A[A.ASCII_ENCODE=1]="ASCII_ENCODE",A[A.C40_ENCODE=2]="C40_ENCODE",A[A.TEXT_ENCODE=3]="TEXT_ENCODE",A[A.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",A[A.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",A[A.BASE256_ENCODE=6]="BASE256_ENCODE"})(dt||(dt={}));class ir{static decode(t){const r=new Ql(t),s=new K,o=new K,a=new Array;let u=dt.ASCII_ENCODE;do if(u===dt.ASCII_ENCODE)u=this.decodeAsciiSegment(r,s,o);else{switch(u){case dt.C40_ENCODE:this.decodeC40Segment(r,s);break;case dt.TEXT_ENCODE:this.decodeTextSegment(r,s);break;case dt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,s);break;case dt.EDIFACT_ENCODE:this.decodeEdifactSegment(r,s);break;case dt.BASE256_ENCODE:this.decodeBase256Segment(r,s,a);break;default:throw new L}u=dt.ASCII_ENCODE}while(u!==dt.PAD_ENCODE&&r.available()>0);return o.length()>0&&s.append(o.toString()),new Xi(t,s.toString(),a.length===0?null:a,null)}static decodeAsciiSegment(t,r,s){let o=!1;do{let a=t.readBits(8);if(a===0)throw new L;if(a<=128)return o&&(a+=128),r.append(String.fromCharCode(a-1)),dt.ASCII_ENCODE;if(a===129)return dt.PAD_ENCODE;if(a<=229){const u=a-130;u<10&&r.append("0"),r.append(""+u)}else switch(a){case 230:return dt.C40_ENCODE;case 231:return dt.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:o=!0;break;case 236:r.append("[)>05"),s.insert(0,"");break;case 237:r.append("[)>06"),s.insert(0,"");break;case 238:return dt.ANSIX12_ENCODE;case 239:return dt.TEXT_ENCODE;case 240:return dt.EDIFACT_ENCODE;case 241:break;default:if(a!==254||t.available()!==0)throw new L;break}}while(t.available()>0);return dt.ASCII_ENCODE}static decodeC40Segment(t,r){let s=!1;const o=[];let a=0;do{if(t.available()===8)return;const u=t.readBits(8);if(u===254)return;this.parseTwoBytes(u,t.readBits(8),o);for(let d=0;d<3;d++){const h=o[d];switch(a){case 0:if(h<3)a=h+1;else if(h<this.C40_BASIC_SET_CHARS.length){const x=this.C40_BASIC_SET_CHARS[h];s?(r.append(String.fromCharCode(x.charCodeAt(0)+128)),s=!1):r.append(x)}else throw new L;break;case 1:s?(r.append(String.fromCharCode(h+128)),s=!1):r.append(String.fromCharCode(h)),a=0;break;case 2:if(h<this.C40_SHIFT2_SET_CHARS.length){const x=this.C40_SHIFT2_SET_CHARS[h];s?(r.append(String.fromCharCode(x.charCodeAt(0)+128)),s=!1):r.append(x)}else switch(h){case 27:r.append("");break;case 30:s=!0;break;default:throw new L}a=0;break;case 3:s?(r.append(String.fromCharCode(h+224)),s=!1):r.append(String.fromCharCode(h+96)),a=0;break;default:throw new L}}}while(t.available()>0)}static decodeTextSegment(t,r){let s=!1,o=[],a=0;do{if(t.available()===8)return;const u=t.readBits(8);if(u===254)return;this.parseTwoBytes(u,t.readBits(8),o);for(let d=0;d<3;d++){const h=o[d];switch(a){case 0:if(h<3)a=h+1;else if(h<this.TEXT_BASIC_SET_CHARS.length){const x=this.TEXT_BASIC_SET_CHARS[h];s?(r.append(String.fromCharCode(x.charCodeAt(0)+128)),s=!1):r.append(x)}else throw new L;break;case 1:s?(r.append(String.fromCharCode(h+128)),s=!1):r.append(String.fromCharCode(h)),a=0;break;case 2:if(h<this.TEXT_SHIFT2_SET_CHARS.length){const x=this.TEXT_SHIFT2_SET_CHARS[h];s?(r.append(String.fromCharCode(x.charCodeAt(0)+128)),s=!1):r.append(x)}else switch(h){case 27:r.append("");break;case 30:s=!0;break;default:throw new L}a=0;break;case 3:if(h<this.TEXT_SHIFT3_SET_CHARS.length){const x=this.TEXT_SHIFT3_SET_CHARS[h];s?(r.append(String.fromCharCode(x.charCodeAt(0)+128)),s=!1):r.append(x),a=0}else throw new L;break;default:throw new L}}}while(t.available()>0)}static decodeAnsiX12Segment(t,r){const s=[];do{if(t.available()===8)return;const o=t.readBits(8);if(o===254)return;this.parseTwoBytes(o,t.readBits(8),s);for(let a=0;a<3;a++){const u=s[a];switch(u){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(u<14)r.append(String.fromCharCode(u+44));else if(u<40)r.append(String.fromCharCode(u+51));else throw new L;break}}}while(t.available()>0)}static parseTwoBytes(t,r,s){let o=(t<<8)+r-1,a=Math.floor(o/1600);s[0]=a,o-=a*1600,a=Math.floor(o/40),s[1]=a,s[2]=o-a*40}static decodeEdifactSegment(t,r){do{if(t.available()<=16)return;for(let s=0;s<4;s++){let o=t.readBits(6);if(o===31){const a=8-t.getBitOffset();a!==8&&t.readBits(a);return}o&32||(o|=64),r.append(String.fromCharCode(o))}}while(t.available()>0)}static decodeBase256Segment(t,r,s){let o=1+t.getByteOffset();const a=this.unrandomize255State(t.readBits(8),o++);let u;if(a===0?u=t.available()/8|0:a<250?u=a:u=250*(a-249)+this.unrandomize255State(t.readBits(8),o++),u<0)throw new L;const d=new Uint8Array(u);for(let h=0;h<u;h++){if(t.available()<8)throw new L;d[h]=this.unrandomize255State(t.readBits(8),o++)}s.push(d);try{r.append(Se.decode(d,re.ISO88591))}catch(h){throw new bn("Platform does not support required encoding: "+h.message)}}static unrandomize255State(t,r){const s=149*r%255+1,o=t-s;return o>=0?o:o+256}}ir.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ir.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ir.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ir.TEXT_SHIFT2_SET_CHARS=ir.C40_SHIFT2_SET_CHARS,ir.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Nh{constructor(){this.rsDecoder=new Zi(Oe.DATA_MATRIX_FIELD_256)}decode(t){const r=new Yl(t),s=r.getVersion(),o=r.readCodewords(),a=Zl.getDataBlocks(o,s);let u=0;for(let x of a)u+=x.getNumDataCodewords();const d=new Uint8Array(u),h=a.length;for(let x=0;x<h;x++){const w=a[x],S=w.getCodewords(),N=w.getNumDataCodewords();this.correctErrors(S,N);for(let R=0;R<N;R++)d[R*h+x]=S[R]}return ir.decode(d)}correctErrors(t,r){const s=new Int32Array(t);try{this.rsDecoder.decode(s,t.length-r)}catch{throw new O}for(let o=0;o<r;o++)t[o]=s[o]}}class ot{constructor(t){this.image=t,this.rectangleDetector=new zn(this.image)}detect(){const t=this.rectangleDetector.detect();let r=this.detectSolid1(t);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new H;r=this.shiftToModuleCenter(r);const s=r[0],o=r[1],a=r[2],u=r[3];let d=this.transitionsBetween(s,u)+1,h=this.transitionsBetween(a,u)+1;(d&1)===1&&(d+=1),(h&1)===1&&(h+=1),4*d<7*h&&4*h<7*d&&(d=h=Math.max(d,h));let x=ot.sampleGrid(this.image,s,o,a,u,d,h);return new so(x,[s,o,a,u])}static shiftPoint(t,r,s){let o=(r.getX()-t.getX())/(s+1),a=(r.getY()-t.getY())/(s+1);return new ue(t.getX()+o,t.getY()+a)}static moveAway(t,r,s){let o=t.getX(),a=t.getY();return o<r?o-=1:o+=1,a<s?a-=1:a+=1,new ue(o,a)}detectSolid1(t){let r=t[0],s=t[1],o=t[3],a=t[2],u=this.transitionsBetween(r,s),d=this.transitionsBetween(s,o),h=this.transitionsBetween(o,a),x=this.transitionsBetween(a,r),w=u,S=[a,r,s,o];return w>d&&(w=d,S[0]=r,S[1]=s,S[2]=o,S[3]=a),w>h&&(w=h,S[0]=s,S[1]=o,S[2]=a,S[3]=r),w>x&&(S[0]=o,S[1]=a,S[2]=r,S[3]=s),S}detectSolid2(t){let r=t[0],s=t[1],o=t[2],a=t[3],u=this.transitionsBetween(r,a),d=ot.shiftPoint(s,o,(u+1)*4),h=ot.shiftPoint(o,s,(u+1)*4),x=this.transitionsBetween(d,r),w=this.transitionsBetween(h,a);return x<w?(t[0]=r,t[1]=s,t[2]=o,t[3]=a):(t[0]=s,t[1]=o,t[2]=a,t[3]=r),t}correctTopRight(t){let r=t[0],s=t[1],o=t[2],a=t[3],u=this.transitionsBetween(r,a),d=this.transitionsBetween(s,a),h=ot.shiftPoint(r,s,(d+1)*4),x=ot.shiftPoint(o,s,(u+1)*4);u=this.transitionsBetween(h,a),d=this.transitionsBetween(x,a);let w=new ue(a.getX()+(o.getX()-s.getX())/(u+1),a.getY()+(o.getY()-s.getY())/(u+1)),S=new ue(a.getX()+(r.getX()-s.getX())/(d+1),a.getY()+(r.getY()-s.getY())/(d+1));if(!this.isValid(w))return this.isValid(S)?S:null;if(!this.isValid(S))return w;let N=this.transitionsBetween(h,w)+this.transitionsBetween(x,w),R=this.transitionsBetween(h,S)+this.transitionsBetween(x,S);return N>R?w:S}shiftToModuleCenter(t){let r=t[0],s=t[1],o=t[2],a=t[3],u=this.transitionsBetween(r,a)+1,d=this.transitionsBetween(o,a)+1,h=ot.shiftPoint(r,s,d*4),x=ot.shiftPoint(o,s,u*4);u=this.transitionsBetween(h,a)+1,d=this.transitionsBetween(x,a)+1,(u&1)===1&&(u+=1),(d&1)===1&&(d+=1);let w=(r.getX()+s.getX()+o.getX()+a.getX())/4,S=(r.getY()+s.getY()+o.getY()+a.getY())/4;r=ot.moveAway(r,w,S),s=ot.moveAway(s,w,S),o=ot.moveAway(o,w,S),a=ot.moveAway(a,w,S);let N,R;return h=ot.shiftPoint(r,s,d*4),h=ot.shiftPoint(h,a,u*4),N=ot.shiftPoint(s,r,d*4),N=ot.shiftPoint(N,o,u*4),x=ot.shiftPoint(o,a,d*4),x=ot.shiftPoint(x,s,u*4),R=ot.shiftPoint(a,o,d*4),R=ot.shiftPoint(R,r,u*4),[h,N,x,R]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,r,s,o,a,u,d){return nr.getInstance().sampleGrid(t,u,d,.5,.5,u-.5,.5,u-.5,d-.5,.5,d-.5,r.getX(),r.getY(),a.getX(),a.getY(),o.getX(),o.getY(),s.getX(),s.getY())}transitionsBetween(t,r){let s=Math.trunc(t.getX()),o=Math.trunc(t.getY()),a=Math.trunc(r.getX()),u=Math.trunc(r.getY()),d=Math.abs(u-o)>Math.abs(a-s);if(d){let B=s;s=o,o=B,B=a,a=u,u=B}let h=Math.abs(a-s),x=Math.abs(u-o),w=-h/2,S=o<u?1:-1,N=s<a?1:-1,R=0,P=this.image.get(d?o:s,d?s:o);for(let B=s,U=o;B!==a;B+=N){let G=this.image.get(d?U:B,d?B:U);if(G!==P&&(R++,P=G),w+=x,w>0){if(U===u)break;U+=S,w-=h}}return R}}class sr{constructor(){this.decoder=new Nh}decode(t,r=null){let s,o;if(r!=null&&r.has(z.PURE_BARCODE)){const x=sr.extractPureBits(t.getBlackMatrix());s=this.decoder.decode(x),o=sr.NO_POINTS}else{const x=new ot(t.getBlackMatrix()).detect();s=this.decoder.decode(x.getBits()),o=x.getPoints()}const a=s.getRawBytes(),u=new Qe(s.getText(),a,8*a.length,o,ce.DATA_MATRIX,k.currentTimeMillis()),d=s.getByteSegments();d!=null&&u.putMetadata(pt.BYTE_SEGMENTS,d);const h=s.getECLevel();return h!=null&&u.putMetadata(pt.ERROR_CORRECTION_LEVEL,h),u}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),s=t.getBottomRightOnBit();if(r==null||s==null)throw new H;const o=this.moduleSize(r,t);let a=r[1];const u=s[1];let d=r[0];const x=(s[0]-d+1)/o,w=(u-a+1)/o;if(x<=0||w<=0)throw new H;const S=o/2;a+=S,d+=S;const N=new se(x,w);for(let R=0;R<w;R++){const P=a+R*o;for(let B=0;B<x;B++)t.get(d+B*o,P)&&N.set(B,R)}return N}static moduleSize(t,r){const s=r.getWidth();let o=t[0];const a=t[1];for(;o<s&&r.get(o,a);)o++;if(o===s)throw new H;const u=o-t[0];if(u===0)throw new H;return u}}sr.NO_POINTS=[];class Ih extends on{constructor(t=500){super(new sr,t)}}var oi;(function(A){A[A.L=0]="L",A[A.M=1]="M",A[A.Q=2]="Q",A[A.H=3]="H"})(oi||(oi={}));class ze{constructor(t,r,s){this.value=t,this.stringValue=r,this.bits=s,ze.FOR_BITS.set(s,this),ze.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return ze.L;case"M":return ze.M;case"Q":return ze.Q;case"H":return ze.H;default:throw new C(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof ze))return!1;const r=t;return this.value===r.value}static forBits(t){if(t<0||t>=ze.FOR_BITS.size)throw new v;return ze.FOR_BITS.get(t)}}ze.FOR_BITS=new Map,ze.FOR_VALUE=new Map,ze.L=new ze(oi.L,"L",1),ze.M=new ze(oi.M,"M",0),ze.Q=new ze(oi.Q,"Q",3),ze.H=new ze(oi.H,"H",2);class Tt{constructor(t){this.errorCorrectionLevel=ze.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,r){return T.bitCount(t^r)}static decodeFormatInformation(t,r){const s=Tt.doDecodeFormatInformation(t,r);return s!==null?s:Tt.doDecodeFormatInformation(t^Tt.FORMAT_INFO_MASK_QR,r^Tt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,r){let s=Number.MAX_SAFE_INTEGER,o=0;for(const a of Tt.FORMAT_INFO_DECODE_LOOKUP){const u=a[0];if(u===t||u===r)return new Tt(a[1]);let d=Tt.numBitsDiffering(t,u);d<s&&(o=a[1],s=d),t!==r&&(d=Tt.numBitsDiffering(r,u),d<s&&(o=a[1],s=d))}return s<=3?new Tt(o):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof Tt))return!1;const r=t;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}Tt.FORMAT_INFO_MASK_QR=21522,Tt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class V{constructor(t,...r){this.ecCodewordsPerBlock=t,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const r=this.ecBlocks;for(const s of r)t+=s.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class _{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class fe{constructor(t,r,...s){this.versionNumber=t,this.alignmentPatternCenters=r,this.ecBlocks=s;let o=0;const a=s[0].getECCodewordsPerBlock(),u=s[0].getECBlocks();for(const d of u)o+=d.getCount()*(d.getDataCodewords()+a);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new L;try{return this.getVersionForNumber((t-17)/4)}catch{throw new L}}static getVersionForNumber(t){if(t<1||t>40)throw new v;return fe.VERSIONS[t-1]}static decodeVersionInformation(t){let r=Number.MAX_SAFE_INTEGER,s=0;for(let o=0;o<fe.VERSION_DECODE_INFO.length;o++){const a=fe.VERSION_DECODE_INFO[o];if(a===t)return fe.getVersionForNumber(o+7);const u=Tt.numBitsDiffering(t,a);u<r&&(s=o+7,r=u)}return r<=3?fe.getVersionForNumber(s):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),r=new se(t);r.setRegion(0,0,9,9),r.setRegion(t-8,0,8,9),r.setRegion(0,t-8,9,8);const s=this.alignmentPatternCenters.length;for(let o=0;o<s;o++){const a=this.alignmentPatternCenters[o]-2;for(let u=0;u<s;u++)o===0&&(u===0||u===s-1)||o===s-1&&u===0||r.setRegion(this.alignmentPatternCenters[u]-2,a,5,5)}return r.setRegion(6,9,1,t-17),r.setRegion(9,6,t-17,1),this.versionNumber>6&&(r.setRegion(t-11,0,3,6),r.setRegion(0,t-11,6,3)),r}toString(){return""+this.versionNumber}}fe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),fe.VERSIONS=[new fe(1,new Int32Array(0),new V(7,new _(1,19)),new V(10,new _(1,16)),new V(13,new _(1,13)),new V(17,new _(1,9))),new fe(2,Int32Array.from([6,18]),new V(10,new _(1,34)),new V(16,new _(1,28)),new V(22,new _(1,22)),new V(28,new _(1,16))),new fe(3,Int32Array.from([6,22]),new V(15,new _(1,55)),new V(26,new _(1,44)),new V(18,new _(2,17)),new V(22,new _(2,13))),new fe(4,Int32Array.from([6,26]),new V(20,new _(1,80)),new V(18,new _(2,32)),new V(26,new _(2,24)),new V(16,new _(4,9))),new fe(5,Int32Array.from([6,30]),new V(26,new _(1,108)),new V(24,new _(2,43)),new V(18,new _(2,15),new _(2,16)),new V(22,new _(2,11),new _(2,12))),new fe(6,Int32Array.from([6,34]),new V(18,new _(2,68)),new V(16,new _(4,27)),new V(24,new _(4,19)),new V(28,new _(4,15))),new fe(7,Int32Array.from([6,22,38]),new V(20,new _(2,78)),new V(18,new _(4,31)),new V(18,new _(2,14),new _(4,15)),new V(26,new _(4,13),new _(1,14))),new fe(8,Int32Array.from([6,24,42]),new V(24,new _(2,97)),new V(22,new _(2,38),new _(2,39)),new V(22,new _(4,18),new _(2,19)),new V(26,new _(4,14),new _(2,15))),new fe(9,Int32Array.from([6,26,46]),new V(30,new _(2,116)),new V(22,new _(3,36),new _(2,37)),new V(20,new _(4,16),new _(4,17)),new V(24,new _(4,12),new _(4,13))),new fe(10,Int32Array.from([6,28,50]),new V(18,new _(2,68),new _(2,69)),new V(26,new _(4,43),new _(1,44)),new V(24,new _(6,19),new _(2,20)),new V(28,new _(6,15),new _(2,16))),new fe(11,Int32Array.from([6,30,54]),new V(20,new _(4,81)),new V(30,new _(1,50),new _(4,51)),new V(28,new _(4,22),new _(4,23)),new V(24,new _(3,12),new _(8,13))),new fe(12,Int32Array.from([6,32,58]),new V(24,new _(2,92),new _(2,93)),new V(22,new _(6,36),new _(2,37)),new V(26,new _(4,20),new _(6,21)),new V(28,new _(7,14),new _(4,15))),new fe(13,Int32Array.from([6,34,62]),new V(26,new _(4,107)),new V(22,new _(8,37),new _(1,38)),new V(24,new _(8,20),new _(4,21)),new V(22,new _(12,11),new _(4,12))),new fe(14,Int32Array.from([6,26,46,66]),new V(30,new _(3,115),new _(1,116)),new V(24,new _(4,40),new _(5,41)),new V(20,new _(11,16),new _(5,17)),new V(24,new _(11,12),new _(5,13))),new fe(15,Int32Array.from([6,26,48,70]),new V(22,new _(5,87),new _(1,88)),new V(24,new _(5,41),new _(5,42)),new V(30,new _(5,24),new _(7,25)),new V(24,new _(11,12),new _(7,13))),new fe(16,Int32Array.from([6,26,50,74]),new V(24,new _(5,98),new _(1,99)),new V(28,new _(7,45),new _(3,46)),new V(24,new _(15,19),new _(2,20)),new V(30,new _(3,15),new _(13,16))),new fe(17,Int32Array.from([6,30,54,78]),new V(28,new _(1,107),new _(5,108)),new V(28,new _(10,46),new _(1,47)),new V(28,new _(1,22),new _(15,23)),new V(28,new _(2,14),new _(17,15))),new fe(18,Int32Array.from([6,30,56,82]),new V(30,new _(5,120),new _(1,121)),new V(26,new _(9,43),new _(4,44)),new V(28,new _(17,22),new _(1,23)),new V(28,new _(2,14),new _(19,15))),new fe(19,Int32Array.from([6,30,58,86]),new V(28,new _(3,113),new _(4,114)),new V(26,new _(3,44),new _(11,45)),new V(26,new _(17,21),new _(4,22)),new V(26,new _(9,13),new _(16,14))),new fe(20,Int32Array.from([6,34,62,90]),new V(28,new _(3,107),new _(5,108)),new V(26,new _(3,41),new _(13,42)),new V(30,new _(15,24),new _(5,25)),new V(28,new _(15,15),new _(10,16))),new fe(21,Int32Array.from([6,28,50,72,94]),new V(28,new _(4,116),new _(4,117)),new V(26,new _(17,42)),new V(28,new _(17,22),new _(6,23)),new V(30,new _(19,16),new _(6,17))),new fe(22,Int32Array.from([6,26,50,74,98]),new V(28,new _(2,111),new _(7,112)),new V(28,new _(17,46)),new V(30,new _(7,24),new _(16,25)),new V(24,new _(34,13))),new fe(23,Int32Array.from([6,30,54,78,102]),new V(30,new _(4,121),new _(5,122)),new V(28,new _(4,47),new _(14,48)),new V(30,new _(11,24),new _(14,25)),new V(30,new _(16,15),new _(14,16))),new fe(24,Int32Array.from([6,28,54,80,106]),new V(30,new _(6,117),new _(4,118)),new V(28,new _(6,45),new _(14,46)),new V(30,new _(11,24),new _(16,25)),new V(30,new _(30,16),new _(2,17))),new fe(25,Int32Array.from([6,32,58,84,110]),new V(26,new _(8,106),new _(4,107)),new V(28,new _(8,47),new _(13,48)),new V(30,new _(7,24),new _(22,25)),new V(30,new _(22,15),new _(13,16))),new fe(26,Int32Array.from([6,30,58,86,114]),new V(28,new _(10,114),new _(2,115)),new V(28,new _(19,46),new _(4,47)),new V(28,new _(28,22),new _(6,23)),new V(30,new _(33,16),new _(4,17))),new fe(27,Int32Array.from([6,34,62,90,118]),new V(30,new _(8,122),new _(4,123)),new V(28,new _(22,45),new _(3,46)),new V(30,new _(8,23),new _(26,24)),new V(30,new _(12,15),new _(28,16))),new fe(28,Int32Array.from([6,26,50,74,98,122]),new V(30,new _(3,117),new _(10,118)),new V(28,new _(3,45),new _(23,46)),new V(30,new _(4,24),new _(31,25)),new V(30,new _(11,15),new _(31,16))),new fe(29,Int32Array.from([6,30,54,78,102,126]),new V(30,new _(7,116),new _(7,117)),new V(28,new _(21,45),new _(7,46)),new V(30,new _(1,23),new _(37,24)),new V(30,new _(19,15),new _(26,16))),new fe(30,Int32Array.from([6,26,52,78,104,130]),new V(30,new _(5,115),new _(10,116)),new V(28,new _(19,47),new _(10,48)),new V(30,new _(15,24),new _(25,25)),new V(30,new _(23,15),new _(25,16))),new fe(31,Int32Array.from([6,30,56,82,108,134]),new V(30,new _(13,115),new _(3,116)),new V(28,new _(2,46),new _(29,47)),new V(30,new _(42,24),new _(1,25)),new V(30,new _(23,15),new _(28,16))),new fe(32,Int32Array.from([6,34,60,86,112,138]),new V(30,new _(17,115)),new V(28,new _(10,46),new _(23,47)),new V(30,new _(10,24),new _(35,25)),new V(30,new _(19,15),new _(35,16))),new fe(33,Int32Array.from([6,30,58,86,114,142]),new V(30,new _(17,115),new _(1,116)),new V(28,new _(14,46),new _(21,47)),new V(30,new _(29,24),new _(19,25)),new V(30,new _(11,15),new _(46,16))),new fe(34,Int32Array.from([6,34,62,90,118,146]),new V(30,new _(13,115),new _(6,116)),new V(28,new _(14,46),new _(23,47)),new V(30,new _(44,24),new _(7,25)),new V(30,new _(59,16),new _(1,17))),new fe(35,Int32Array.from([6,30,54,78,102,126,150]),new V(30,new _(12,121),new _(7,122)),new V(28,new _(12,47),new _(26,48)),new V(30,new _(39,24),new _(14,25)),new V(30,new _(22,15),new _(41,16))),new fe(36,Int32Array.from([6,24,50,76,102,128,154]),new V(30,new _(6,121),new _(14,122)),new V(28,new _(6,47),new _(34,48)),new V(30,new _(46,24),new _(10,25)),new V(30,new _(2,15),new _(64,16))),new fe(37,Int32Array.from([6,28,54,80,106,132,158]),new V(30,new _(17,122),new _(4,123)),new V(28,new _(29,46),new _(14,47)),new V(30,new _(49,24),new _(10,25)),new V(30,new _(24,15),new _(46,16))),new fe(38,Int32Array.from([6,32,58,84,110,136,162]),new V(30,new _(4,122),new _(18,123)),new V(28,new _(13,46),new _(32,47)),new V(30,new _(48,24),new _(14,25)),new V(30,new _(42,15),new _(32,16))),new fe(39,Int32Array.from([6,26,54,82,110,138,166]),new V(30,new _(20,117),new _(4,118)),new V(28,new _(40,47),new _(7,48)),new V(30,new _(43,24),new _(22,25)),new V(30,new _(10,15),new _(67,16))),new fe(40,Int32Array.from([6,30,58,86,114,142,170]),new V(30,new _(19,118),new _(6,119)),new V(28,new _(18,47),new _(31,48)),new V(30,new _(34,24),new _(34,25)),new V(30,new _(20,15),new _(61,16)))];var mt;(function(A){A[A.DATA_MASK_000=0]="DATA_MASK_000",A[A.DATA_MASK_001=1]="DATA_MASK_001",A[A.DATA_MASK_010=2]="DATA_MASK_010",A[A.DATA_MASK_011=3]="DATA_MASK_011",A[A.DATA_MASK_100=4]="DATA_MASK_100",A[A.DATA_MASK_101=5]="DATA_MASK_101",A[A.DATA_MASK_110=6]="DATA_MASK_110",A[A.DATA_MASK_111=7]="DATA_MASK_111"})(mt||(mt={}));class an{constructor(t,r){this.value=t,this.isMasked=r}unmaskBitMatrix(t,r){for(let s=0;s<r;s++)for(let o=0;o<r;o++)this.isMasked(s,o)&&t.flip(o,s)}}an.values=new Map([[mt.DATA_MASK_000,new an(mt.DATA_MASK_000,(A,t)=>(A+t&1)===0)],[mt.DATA_MASK_001,new an(mt.DATA_MASK_001,(A,t)=>(A&1)===0)],[mt.DATA_MASK_010,new an(mt.DATA_MASK_010,(A,t)=>t%3===0)],[mt.DATA_MASK_011,new an(mt.DATA_MASK_011,(A,t)=>(A+t)%3===0)],[mt.DATA_MASK_100,new an(mt.DATA_MASK_100,(A,t)=>(Math.floor(A/2)+Math.floor(t/3)&1)===0)],[mt.DATA_MASK_101,new an(mt.DATA_MASK_101,(A,t)=>A*t%6===0)],[mt.DATA_MASK_110,new an(mt.DATA_MASK_110,(A,t)=>A*t%6<3)],[mt.DATA_MASK_111,new an(mt.DATA_MASK_111,(A,t)=>(A+t+A*t%3&1)===0)]]);class bh{constructor(t){const r=t.getHeight();if(r<21||(r&3)!==1)throw new L;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let a=0;a<6;a++)t=this.copyBit(a,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let a=5;a>=0;a--)t=this.copyBit(8,a,t);const r=this.bitMatrix.getHeight();let s=0;const o=r-7;for(let a=r-1;a>=o;a--)s=this.copyBit(8,a,s);for(let a=r-8;a<r;a++)s=this.copyBit(a,8,s);if(this.parsedFormatInfo=Tt.decodeFormatInformation(t,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new L}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),r=Math.floor((t-17)/4);if(r<=6)return fe.getVersionForNumber(r);let s=0;const o=t-11;for(let u=5;u>=0;u--)for(let d=t-9;d>=o;d--)s=this.copyBit(d,u,s);let a=fe.decodeVersionInformation(s);if(a!==null&&a.getDimensionForVersion()===t)return this.parsedVersion=a,a;s=0;for(let u=5;u>=0;u--)for(let d=t-9;d>=o;d--)s=this.copyBit(u,d,s);if(a=fe.decodeVersionInformation(s),a!==null&&a.getDimensionForVersion()===t)return this.parsedVersion=a,a;throw new L}copyBit(t,r,s){return(this.isMirror?this.bitMatrix.get(r,t):this.bitMatrix.get(t,r))?s<<1|1:s<<1}readCodewords(){const t=this.readFormatInformation(),r=this.readVersion(),s=an.values.get(t.getDataMask()),o=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,o);const a=r.buildFunctionPattern();let u=!0;const d=new Uint8Array(r.getTotalCodewords());let h=0,x=0,w=0;for(let S=o-1;S>0;S-=2){S===6&&S--;for(let N=0;N<o;N++){const R=u?o-1-N:N;for(let P=0;P<2;P++)a.get(S-P,R)||(w++,x<<=1,this.bitMatrix.get(S-P,R)&&(x|=1),w===8&&(d[h++]=x,w=0,x=0))}u=!u}if(h!==r.getTotalCodewords())throw new L;return d}remask(){if(this.parsedFormatInfo===null)return;const t=an.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,r)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let r=0,s=t.getWidth();r<s;r++)for(let o=r+1,a=t.getHeight();o<a;o++)t.get(r,o)!==t.get(o,r)&&(t.flip(o,r),t.flip(r,o))}}class Kl{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r,s){if(t.length!==r.getTotalCodewords())throw new v;const o=r.getECBlocksForLevel(s);let a=0;const u=o.getECBlocks();for(const P of u)a+=P.getCount();const d=new Array(a);let h=0;for(const P of u)for(let B=0;B<P.getCount();B++){const U=P.getDataCodewords(),G=o.getECCodewordsPerBlock()+U;d[h++]=new Kl(U,new Uint8Array(G))}const x=d[0].codewords.length;let w=d.length-1;for(;w>=0&&d[w].codewords.length!==x;)w--;w++;const S=x-o.getECCodewordsPerBlock();let N=0;for(let P=0;P<S;P++)for(let B=0;B<h;B++)d[B].codewords[P]=t[N++];for(let P=w;P<h;P++)d[P].codewords[S]=t[N++];const R=d[0].codewords.length;for(let P=S;P<R;P++)for(let B=0;B<h;B++){const U=B<w?P:P+1;d[B].codewords[U]=t[N++]}return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var un;(function(A){A[A.TERMINATOR=0]="TERMINATOR",A[A.NUMERIC=1]="NUMERIC",A[A.ALPHANUMERIC=2]="ALPHANUMERIC",A[A.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",A[A.BYTE=4]="BYTE",A[A.ECI=5]="ECI",A[A.KANJI=6]="KANJI",A[A.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",A[A.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",A[A.HANZI=9]="HANZI"})(un||(un={}));class de{constructor(t,r,s,o){this.value=t,this.stringValue=r,this.characterCountBitsForVersions=s,this.bits=o,de.FOR_BITS.set(o,this),de.FOR_VALUE.set(t,this)}static forBits(t){const r=de.FOR_BITS.get(t);if(r===void 0)throw new v;return r}getCharacterCountBits(t){const r=t.getVersionNumber();let s;return r<=9?s=0:r<=26?s=1:s=2,this.characterCountBitsForVersions[s]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof de))return!1;const r=t;return this.value===r.value}toString(){return this.stringValue}}de.FOR_BITS=new Map,de.FOR_VALUE=new Map,de.TERMINATOR=new de(un.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),de.NUMERIC=new de(un.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),de.ALPHANUMERIC=new de(un.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),de.STRUCTURED_APPEND=new de(un.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),de.BYTE=new de(un.BYTE,"BYTE",Int32Array.from([8,16,16]),4),de.ECI=new de(un.ECI,"ECI",Int32Array.from([0,0,0]),7),de.KANJI=new de(un.KANJI,"KANJI",Int32Array.from([8,10,12]),8),de.FNC1_FIRST_POSITION=new de(un.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),de.FNC1_SECOND_POSITION=new de(un.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),de.HANZI=new de(un.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ke{static decode(t,r,s,o){const a=new Ql(t);let u=new K;const d=new Array;let h=-1,x=-1;try{let w=null,S=!1,N;do{if(a.available()<4)N=de.TERMINATOR;else{const R=a.readBits(4);N=de.forBits(R)}switch(N){case de.TERMINATOR:break;case de.FNC1_FIRST_POSITION:case de.FNC1_SECOND_POSITION:S=!0;break;case de.STRUCTURED_APPEND:if(a.available()<16)throw new L;h=a.readBits(8),x=a.readBits(8);break;case de.ECI:const R=Ke.parseECIValue(a);if(w=X.getCharacterSetECIByValue(R),w===null)throw new L;break;case de.HANZI:const P=a.readBits(4),B=a.readBits(N.getCharacterCountBits(r));P===Ke.GB2312_SUBSET&&Ke.decodeHanziSegment(a,u,B);break;default:const U=a.readBits(N.getCharacterCountBits(r));switch(N){case de.NUMERIC:Ke.decodeNumericSegment(a,u,U);break;case de.ALPHANUMERIC:Ke.decodeAlphanumericSegment(a,u,U,S);break;case de.BYTE:Ke.decodeByteSegment(a,u,U,w,d,o);break;case de.KANJI:Ke.decodeKanjiSegment(a,u,U);break;default:throw new L}break}}while(N!==de.TERMINATOR)}catch{throw new L}return new Xi(t,u.toString(),d.length===0?null:d,s===null?null:s.toString(),h,x)}static decodeHanziSegment(t,r,s){if(s*13>t.available())throw new L;const o=new Uint8Array(2*s);let a=0;for(;s>0;){const u=t.readBits(13);let d=u/96<<8&4294967295|u%96;d<959?d+=41377:d+=42657,o[a]=d>>8&255,o[a+1]=d&255,a+=2,s--}try{r.append(Se.decode(o,re.GB2312))}catch(u){throw new L(u)}}static decodeKanjiSegment(t,r,s){if(s*13>t.available())throw new L;const o=new Uint8Array(2*s);let a=0;for(;s>0;){const u=t.readBits(13);let d=u/192<<8&4294967295|u%192;d<7936?d+=33088:d+=49472,o[a]=d>>8,o[a+1]=d,a+=2,s--}try{r.append(Se.decode(o,re.SHIFT_JIS))}catch(u){throw new L(u)}}static decodeByteSegment(t,r,s,o,a,u){if(8*s>t.available())throw new L;const d=new Uint8Array(s);for(let x=0;x<s;x++)d[x]=t.readBits(8);let h;o===null?h=re.guessEncoding(d,u):h=o.getName();try{r.append(Se.decode(d,h))}catch(x){throw new L(x)}a.push(d)}static toAlphaNumericChar(t){if(t>=Ke.ALPHANUMERIC_CHARS.length)throw new L;return Ke.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,r,s,o){const a=r.length();for(;s>1;){if(t.available()<11)throw new L;const u=t.readBits(11);r.append(Ke.toAlphaNumericChar(Math.floor(u/45))),r.append(Ke.toAlphaNumericChar(u%45)),s-=2}if(s===1){if(t.available()<6)throw new L;r.append(Ke.toAlphaNumericChar(t.readBits(6)))}if(o)for(let u=a;u<r.length();u++)r.charAt(u)==="%"&&(u<r.length()-1&&r.charAt(u+1)==="%"?r.deleteCharAt(u+1):r.setCharAt(u,""))}static decodeNumericSegment(t,r,s){for(;s>=3;){if(t.available()<10)throw new L;const o=t.readBits(10);if(o>=1e3)throw new L;r.append(Ke.toAlphaNumericChar(Math.floor(o/100))),r.append(Ke.toAlphaNumericChar(Math.floor(o/10)%10)),r.append(Ke.toAlphaNumericChar(o%10)),s-=3}if(s===2){if(t.available()<7)throw new L;const o=t.readBits(7);if(o>=100)throw new L;r.append(Ke.toAlphaNumericChar(Math.floor(o/10))),r.append(Ke.toAlphaNumericChar(o%10))}else if(s===1){if(t.available()<4)throw new L;const o=t.readBits(4);if(o>=10)throw new L;r.append(Ke.toAlphaNumericChar(o))}}static parseECIValue(t){const r=t.readBits(8);if(!(r&128))return r&127;if((r&192)===128){const s=t.readBits(8);return(r&63)<<8&4294967295|s}if((r&224)===192){const s=t.readBits(16);return(r&31)<<16&4294967295|s}throw new L}}Ke.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ke.GB2312_SUBSET=1;class Bc{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const r=t[0];t[0]=t[2],t[2]=r}}class _h{constructor(){this.rsDecoder=new Zi(Oe.QR_CODE_FIELD_256)}decodeBooleanArray(t,r){return this.decodeBitMatrix(se.parseFromBooleanArray(t),r)}decodeBitMatrix(t,r){const s=new bh(t);let o=null;try{return this.decodeBitMatrixParser(s,r)}catch(a){o=a}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();const a=this.decodeBitMatrixParser(s,r);return a.setOther(new Bc(!0)),a}catch(a){throw o!==null?o:a}}decodeBitMatrixParser(t,r){const s=t.readVersion(),o=t.readFormatInformation().getErrorCorrectionLevel(),a=t.readCodewords(),u=Kl.getDataBlocks(a,s,o);let d=0;for(const w of u)d+=w.getNumDataCodewords();const h=new Uint8Array(d);let x=0;for(const w of u){const S=w.getCodewords(),N=w.getNumDataCodewords();this.correctErrors(S,N);for(let R=0;R<N;R++)h[x++]=S[R]}return Ke.decode(h,s,o,r)}correctErrors(t,r){const s=new Int32Array(t);try{this.rsDecoder.decode(s,t.length-r)}catch{throw new O}for(let o=0;o<r;o++)t[o]=s[o]}}class ql extends ue{constructor(t,r,s){super(t,r),this.estimatedModuleSize=s}aboutEquals(t,r,s){if(Math.abs(r-this.getY())<=t&&Math.abs(s-this.getX())<=t){const o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(t,r,s){const o=(this.getX()+r)/2,a=(this.getY()+t)/2,u=(this.estimatedModuleSize+s)/2;return new ql(o,a,u)}}class co{constructor(t,r,s,o,a,u,d){this.image=t,this.startX=r,this.startY=s,this.width=o,this.height=a,this.moduleSize=u,this.resultPointCallback=d,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,r=this.height,s=this.width,o=t+s,a=this.startY+r/2,u=new Int32Array(3),d=this.image;for(let h=0;h<r;h++){const x=a+(h&1?-Math.floor((h+1)/2):Math.floor((h+1)/2));u[0]=0,u[1]=0,u[2]=0;let w=t;for(;w<o&&!d.get(w,x);)w++;let S=0;for(;w<o;){if(d.get(w,x))if(S===1)u[1]++;else if(S===2){if(this.foundPatternCross(u)){const N=this.handlePossibleCenter(u,x,w);if(N!==null)return N}u[0]=u[2],u[1]=1,u[2]=0,S=1}else u[++S]++;else S===1&&S++,u[S]++;w++}if(this.foundPatternCross(u)){const N=this.handlePossibleCenter(u,x,o);if(N!==null)return N}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new H}static centerFromEnd(t,r){return r-t[2]-t[1]/2}foundPatternCross(t){const r=this.moduleSize,s=r/2;for(let o=0;o<3;o++)if(Math.abs(r-t[o])>=s)return!1;return!0}crossCheckVertical(t,r,s,o){const a=this.image,u=a.getHeight(),d=this.crossCheckStateCount;d[0]=0,d[1]=0,d[2]=0;let h=t;for(;h>=0&&a.get(r,h)&&d[1]<=s;)d[1]++,h--;if(h<0||d[1]>s)return NaN;for(;h>=0&&!a.get(r,h)&&d[0]<=s;)d[0]++,h--;if(d[0]>s)return NaN;for(h=t+1;h<u&&a.get(r,h)&&d[1]<=s;)d[1]++,h++;if(h===u||d[1]>s)return NaN;for(;h<u&&!a.get(r,h)&&d[2]<=s;)d[2]++,h++;if(d[2]>s)return NaN;const x=d[0]+d[1]+d[2];return 5*Math.abs(x-o)>=2*o?NaN:this.foundPatternCross(d)?co.centerFromEnd(d,h):NaN}handlePossibleCenter(t,r,s){const o=t[0]+t[1]+t[2],a=co.centerFromEnd(t,s),u=this.crossCheckVertical(r,a,2*t[1],o);if(!isNaN(u)){const d=(t[0]+t[1]+t[2])/3;for(const x of this.possibleCenters)if(x.aboutEquals(d,u,a))return x.combineEstimate(u,a,d);const h=new ql(a,u,d);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null}}class Jl extends ue{constructor(t,r,s,o){super(t,r),this.estimatedModuleSize=s,this.count=o,o===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,r,s){if(Math.abs(r-this.getY())<=t&&Math.abs(s-this.getX())<=t){const o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(t,r,s){const o=this.count+1,a=(this.count*this.getX()+r)/o,u=(this.count*this.getY()+t)/o,d=(this.count*this.estimatedModuleSize+s)/o;return new Jl(a,u,d,o)}}class Th{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class wt{constructor(t,r){this.image=t,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const r=t!=null&&t.get(z.TRY_HARDER)!==void 0,s=t!=null&&t.get(z.PURE_BARCODE)!==void 0,o=this.image,a=o.getHeight(),u=o.getWidth();let d=Math.floor(3*a/(4*wt.MAX_MODULES));(d<wt.MIN_SKIP||r)&&(d=wt.MIN_SKIP);let h=!1;const x=new Int32Array(5);for(let S=d-1;S<a&&!h;S+=d){x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0;let N=0;for(let R=0;R<u;R++)if(o.get(R,S))(N&1)===1&&N++,x[N]++;else if(N&1)x[N]++;else if(N===4)if(wt.foundPatternCross(x)){if(this.handlePossibleCenter(x,S,R,s)===!0)if(d=2,this.hasSkipped===!0)h=this.haveMultiplyConfirmedCenters();else{const B=this.findRowSkip();B>x[2]&&(S+=B-x[2]-d,R=u-1)}else{x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,N=3;continue}N=0,x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0}else x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,N=3;else x[++N]++;wt.foundPatternCross(x)&&this.handlePossibleCenter(x,S,u,s)===!0&&(d=x[0],this.hasSkipped&&(h=this.haveMultiplyConfirmedCenters()))}const w=this.selectBestPatterns();return ue.orderBestPatterns(w),new Th(w)}static centerFromEnd(t,r){return r-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let r=0;for(let a=0;a<5;a++){const u=t[a];if(u===0)return!1;r+=u}if(r<7)return!1;const s=r/7,o=s/2;return Math.abs(s-t[0])<o&&Math.abs(s-t[1])<o&&Math.abs(3*s-t[2])<3*o&&Math.abs(s-t[3])<o&&Math.abs(s-t[4])<o}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,r,s,o){const a=this.getCrossCheckStateCount();let u=0;const d=this.image;for(;t>=u&&r>=u&&d.get(r-u,t-u);)a[2]++,u++;if(t<u||r<u)return!1;for(;t>=u&&r>=u&&!d.get(r-u,t-u)&&a[1]<=s;)a[1]++,u++;if(t<u||r<u||a[1]>s)return!1;for(;t>=u&&r>=u&&d.get(r-u,t-u)&&a[0]<=s;)a[0]++,u++;if(a[0]>s)return!1;const h=d.getHeight(),x=d.getWidth();for(u=1;t+u<h&&r+u<x&&d.get(r+u,t+u);)a[2]++,u++;if(t+u>=h||r+u>=x)return!1;for(;t+u<h&&r+u<x&&!d.get(r+u,t+u)&&a[3]<s;)a[3]++,u++;if(t+u>=h||r+u>=x||a[3]>=s)return!1;for(;t+u<h&&r+u<x&&d.get(r+u,t+u)&&a[4]<s;)a[4]++,u++;if(a[4]>=s)return!1;const w=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(w-o)<2*o&&wt.foundPatternCross(a)}crossCheckVertical(t,r,s,o){const a=this.image,u=a.getHeight(),d=this.getCrossCheckStateCount();let h=t;for(;h>=0&&a.get(r,h);)d[2]++,h--;if(h<0)return NaN;for(;h>=0&&!a.get(r,h)&&d[1]<=s;)d[1]++,h--;if(h<0||d[1]>s)return NaN;for(;h>=0&&a.get(r,h)&&d[0]<=s;)d[0]++,h--;if(d[0]>s)return NaN;for(h=t+1;h<u&&a.get(r,h);)d[2]++,h++;if(h===u)return NaN;for(;h<u&&!a.get(r,h)&&d[3]<s;)d[3]++,h++;if(h===u||d[3]>=s)return NaN;for(;h<u&&a.get(r,h)&&d[4]<s;)d[4]++,h++;if(d[4]>=s)return NaN;const x=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(x-o)>=2*o?NaN:wt.foundPatternCross(d)?wt.centerFromEnd(d,h):NaN}crossCheckHorizontal(t,r,s,o){const a=this.image,u=a.getWidth(),d=this.getCrossCheckStateCount();let h=t;for(;h>=0&&a.get(h,r);)d[2]++,h--;if(h<0)return NaN;for(;h>=0&&!a.get(h,r)&&d[1]<=s;)d[1]++,h--;if(h<0||d[1]>s)return NaN;for(;h>=0&&a.get(h,r)&&d[0]<=s;)d[0]++,h--;if(d[0]>s)return NaN;for(h=t+1;h<u&&a.get(h,r);)d[2]++,h++;if(h===u)return NaN;for(;h<u&&!a.get(h,r)&&d[3]<s;)d[3]++,h++;if(h===u||d[3]>=s)return NaN;for(;h<u&&a.get(h,r)&&d[4]<s;)d[4]++,h++;if(d[4]>=s)return NaN;const x=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(x-o)>=o?NaN:wt.foundPatternCross(d)?wt.centerFromEnd(d,h):NaN}handlePossibleCenter(t,r,s,o){const a=t[0]+t[1]+t[2]+t[3]+t[4];let u=wt.centerFromEnd(t,s),d=this.crossCheckVertical(r,Math.floor(u),t[2],a);if(!isNaN(d)&&(u=this.crossCheckHorizontal(Math.floor(u),Math.floor(d),t[2],a),!isNaN(u)&&(!o||this.crossCheckDiagonal(Math.floor(d),Math.floor(u),t[2],a)))){const h=a/7;let x=!1;const w=this.possibleCenters;for(let S=0,N=w.length;S<N;S++){const R=w[S];if(R.aboutEquals(h,d,u)){w[S]=R.combineEstimate(d,u,h),x=!0;break}}if(!x){const S=new Jl(u,d,h);w.push(S),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(S)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const s of this.possibleCenters)if(s.getCount()>=wt.CENTER_QUORUM)if(r==null)r=s;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-s.getX())-Math.abs(r.getY()-s.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,r=0;const s=this.possibleCenters.length;for(const u of this.possibleCenters)u.getCount()>=wt.CENTER_QUORUM&&(t++,r+=u.getEstimatedModuleSize());if(t<3)return!1;const o=r/s;let a=0;for(const u of this.possibleCenters)a+=Math.abs(u.getEstimatedModuleSize()-o);return a<=.05*r}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new H;const r=this.possibleCenters;let s;if(t>3){let o=0,a=0;for(const h of this.possibleCenters){const x=h.getEstimatedModuleSize();o+=x,a+=x*x}s=o/t;let u=Math.sqrt(a/t-s*s);r.sort((h,x)=>{const w=Math.abs(x.getEstimatedModuleSize()-s),S=Math.abs(h.getEstimatedModuleSize()-s);return w<S?-1:w>S?1:0});const d=Math.max(.2*s,u);for(let h=0;h<r.length&&r.length>3;h++){const x=r[h];Math.abs(x.getEstimatedModuleSize()-s)>d&&(r.splice(h,1),h--)}}if(r.length>3){let o=0;for(const a of r)o+=a.getEstimatedModuleSize();s=o/r.length,r.sort((a,u)=>{if(u.getCount()===a.getCount()){const d=Math.abs(u.getEstimatedModuleSize()-s),h=Math.abs(a.getEstimatedModuleSize()-s);return d<h?1:d>h?-1:0}else return u.getCount()-a.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}wt.CENTER_QUORUM=2,wt.MIN_SKIP=3,wt.MAX_MODULES=57;class Ki{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(z.NEED_RESULT_POINT_CALLBACK);const s=new wt(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(s)}processFinderPatternInfo(t){const r=t.getTopLeft(),s=t.getTopRight(),o=t.getBottomLeft(),a=this.calculateModuleSize(r,s,o);if(a<1)throw new H("No pattern found in proccess finder.");const u=Ki.computeDimension(r,s,o,a),d=fe.getProvisionalVersionForDimension(u),h=d.getDimensionForVersion()-7;let x=null;if(d.getAlignmentPatternCenters().length>0){const R=s.getX()-r.getX()+o.getX(),P=s.getY()-r.getY()+o.getY(),B=1-3/h,U=Math.floor(r.getX()+B*(R-r.getX())),G=Math.floor(r.getY()+B*(P-r.getY()));for(let ee=4;ee<=16;ee<<=1)try{x=this.findAlignmentInRegion(a,U,G,ee);break}catch(te){if(!(te instanceof H))throw te}}const w=Ki.createTransform(r,s,o,x,u),S=Ki.sampleGrid(this.image,w,u);let N;return x===null?N=[o,r,s]:N=[o,r,s,x],new so(S,N)}static createTransform(t,r,s,o,a){const u=a-3.5;let d,h,x,w;return o!==null?(d=o.getX(),h=o.getY(),x=u-3,w=x):(d=r.getX()-t.getX()+s.getX(),h=r.getY()-t.getY()+s.getY(),x=u,w=u),mn.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,x,w,3.5,u,t.getX(),t.getY(),r.getX(),r.getY(),d,h,s.getX(),s.getY())}static sampleGrid(t,r,s){return nr.getInstance().sampleGridWithTransform(t,s,s,r)}static computeDimension(t,r,s,o){const a=_e.round(ue.distance(t,r)/o),u=_e.round(ue.distance(t,s)/o);let d=Math.floor((a+u)/2)+7;switch(d&3){case 0:d++;break;case 2:d--;break;case 3:throw new H("Dimensions could be not found.")}return d}calculateModuleSize(t,r,s){return(this.calculateModuleSizeOneWay(t,r)+this.calculateModuleSizeOneWay(t,s))/2}calculateModuleSizeOneWay(t,r){const s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(r.getX()),Math.floor(r.getY())),o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(s)?o/7:isNaN(o)?s/7:(s+o)/14}sizeOfBlackWhiteBlackRunBothWays(t,r,s,o){let a=this.sizeOfBlackWhiteBlackRun(t,r,s,o),u=1,d=t-(s-t);d<0?(u=t/(t-d),d=0):d>=this.image.getWidth()&&(u=(this.image.getWidth()-1-t)/(d-t),d=this.image.getWidth()-1);let h=Math.floor(r-(o-r)*u);return u=1,h<0?(u=r/(r-h),h=0):h>=this.image.getHeight()&&(u=(this.image.getHeight()-1-r)/(h-r),h=this.image.getHeight()-1),d=Math.floor(t+(d-t)*u),a+=this.sizeOfBlackWhiteBlackRun(t,r,d,h),a-1}sizeOfBlackWhiteBlackRun(t,r,s,o){const a=Math.abs(o-r)>Math.abs(s-t);if(a){let R=t;t=r,r=R,R=s,s=o,o=R}const u=Math.abs(s-t),d=Math.abs(o-r);let h=-u/2;const x=t<s?1:-1,w=r<o?1:-1;let S=0;const N=s+x;for(let R=t,P=r;R!==N;R+=x){const B=a?P:R,U=a?R:P;if(S===1===this.image.get(B,U)){if(S===2)return _e.distance(R,P,t,r);S++}if(h+=d,h>0){if(P===o)break;P+=w,h-=u}}return S===2?_e.distance(s+x,o,t,r):NaN}findAlignmentInRegion(t,r,s,o){const a=Math.floor(o*t),u=Math.max(0,r-a),d=Math.min(this.image.getWidth()-1,r+a);if(d-u<t*3)throw new H("Alignment top exceeds estimated module size.");const h=Math.max(0,s-a),x=Math.min(this.image.getHeight()-1,s+a);if(x-h<t*3)throw new H("Alignment bottom exceeds estimated module size.");return new co(this.image,u,h,d-u,x-h,t,this.resultPointCallback).find()}}class or{constructor(){this.decoder=new _h}getDecoder(){return this.decoder}decode(t,r){let s,o;if(r!=null&&r.get(z.PURE_BARCODE)!==void 0){const h=or.extractPureBits(t.getBlackMatrix());s=this.decoder.decodeBitMatrix(h,r),o=or.NO_POINTS}else{const h=new Ki(t.getBlackMatrix()).detect(r);s=this.decoder.decodeBitMatrix(h.getBits(),r),o=h.getPoints()}s.getOther()instanceof Bc&&s.getOther().applyMirroredCorrection(o);const a=new Qe(s.getText(),s.getRawBytes(),void 0,o,ce.QR_CODE,void 0),u=s.getByteSegments();u!==null&&a.putMetadata(pt.BYTE_SEGMENTS,u);const d=s.getECLevel();return d!==null&&a.putMetadata(pt.ERROR_CORRECTION_LEVEL,d),s.hasStructuredAppend()&&(a.putMetadata(pt.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),a.putMetadata(pt.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),a}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),s=t.getBottomRightOnBit();if(r===null||s===null)throw new H;const o=this.moduleSize(r,t);let a=r[1],u=s[1],d=r[0],h=s[0];if(d>=h||a>=u)throw new H;if(u-a!==h-d&&(h=d+(u-a),h>=t.getWidth()))throw new H;const x=Math.round((h-d+1)/o),w=Math.round((u-a+1)/o);if(x<=0||w<=0)throw new H;if(w!==x)throw new H;const S=Math.floor(o/2);a+=S,d+=S;const N=d+Math.floor((x-1)*o)-h;if(N>0){if(N>S)throw new H;d-=N}const R=a+Math.floor((w-1)*o)-u;if(R>0){if(R>S)throw new H;a-=R}const P=new se(x,w);for(let B=0;B<w;B++){const U=a+Math.floor(B*o);for(let G=0;G<x;G++)t.get(d+Math.floor(G*o),U)&&P.set(G,B)}return P}static moduleSize(t,r){const s=r.getHeight(),o=r.getWidth();let a=t[0],u=t[1],d=!0,h=0;for(;a<o&&u<s;){if(d!==r.get(a,u)){if(++h===5)break;d=!d}a++,u++}if(a===o||u===s)throw new H;return(a-t[0])/7}}or.NO_POINTS=new Array;class pe{PDF417Common(){}static getBitCountSum(t){return _e.sum(t)}static toIntArray(t){if(t==null||!t.length)return pe.EMPTY_INT_ARRAY;const r=new Int32Array(t.length);let s=0;for(const o of t)r[s++]=o;return r}static getCodeword(t){const r=b.binarySearch(pe.SYMBOL_TABLE,t&262143);return r<0?-1:(pe.CODEWORD_TABLE[r]-1)%pe.NUMBER_OF_CODEWORDS}}pe.NUMBER_OF_CODEWORDS=929,pe.MAX_CODEWORDS_IN_BARCODE=pe.NUMBER_OF_CODEWORDS-1,pe.MIN_ROWS_IN_BARCODE=3,pe.MAX_ROWS_IN_BARCODE=90,pe.MODULES_IN_CODEWORD=17,pe.MODULES_IN_STOP_PATTERN=18,pe.BARS_IN_MODULE=8,pe.EMPTY_INT_ARRAY=new Int32Array([]),pe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),pe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Rh{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Ee{static detectMultiple(t,r,s){let o=t.getBlackMatrix(),a=Ee.detect(s,o);return a.length||(o=o.clone(),o.rotate180(),a=Ee.detect(s,o)),new Rh(o,a)}static detect(t,r){const s=new Array;let o=0,a=0,u=!1;for(;o<r.getHeight();){const d=Ee.findVertices(r,o,a);if(d[0]==null&&d[3]==null){if(!u)break;u=!1,a=0;for(const h of s)h[1]!=null&&(o=Math.trunc(Math.max(o,h[1].getY()))),h[3]!=null&&(o=Math.max(o,Math.trunc(h[3].getY())));o+=Ee.ROW_STEP;continue}if(u=!0,s.push(d),!t)break;d[2]!=null?(a=Math.trunc(d[2].getX()),o=Math.trunc(d[2].getY())):(a=Math.trunc(d[4].getX()),o=Math.trunc(d[4].getY()))}return s}static findVertices(t,r,s){const o=t.getHeight(),a=t.getWidth(),u=new Array(8);return Ee.copyToResult(u,Ee.findRowsWithPattern(t,o,a,r,s,Ee.START_PATTERN),Ee.INDEXES_START_PATTERN),u[4]!=null&&(s=Math.trunc(u[4].getX()),r=Math.trunc(u[4].getY())),Ee.copyToResult(u,Ee.findRowsWithPattern(t,o,a,r,s,Ee.STOP_PATTERN),Ee.INDEXES_STOP_PATTERN),u}static copyToResult(t,r,s){for(let o=0;o<s.length;o++)t[s[o]]=r[o]}static findRowsWithPattern(t,r,s,o,a,u){const d=new Array(4);let h=!1;const x=new Int32Array(u.length);for(;o<r;o+=Ee.ROW_STEP){let S=Ee.findGuardPattern(t,a,o,s,!1,u,x);if(S!=null){for(;o>0;){const N=Ee.findGuardPattern(t,a,--o,s,!1,u,x);if(N!=null)S=N;else{o++;break}}d[0]=new ue(S[0],o),d[1]=new ue(S[1],o),h=!0;break}}let w=o+1;if(h){let S=0,N=Int32Array.from([Math.trunc(d[0].getX()),Math.trunc(d[1].getX())]);for(;w<r;w++){const R=Ee.findGuardPattern(t,N[0],w,s,!1,u,x);if(R!=null&&Math.abs(N[0]-R[0])<Ee.MAX_PATTERN_DRIFT&&Math.abs(N[1]-R[1])<Ee.MAX_PATTERN_DRIFT)N=R,S=0;else{if(S>Ee.SKIPPED_ROW_COUNT_MAX)break;S++}}w-=S+1,d[2]=new ue(N[0],w),d[3]=new ue(N[1],w)}return w-o<Ee.BARCODE_MIN_HEIGHT&&b.fill(d,null),d}static findGuardPattern(t,r,s,o,a,u,d){b.fillWithin(d,0,d.length,0);let h=r,x=0;for(;t.get(h,s)&&h>0&&x++<Ee.MAX_PIXEL_DRIFT;)h--;let w=h,S=0,N=u.length;for(let R=a;w<o;w++)if(t.get(w,s)!==R)d[S]++;else{if(S===N-1){if(Ee.patternMatchVariance(d,u,Ee.MAX_INDIVIDUAL_VARIANCE)<Ee.MAX_AVG_VARIANCE)return new Int32Array([h,w]);h+=d[0]+d[1],k.arraycopy(d,2,d,0,S-1),d[S-1]=0,d[S]=0,S--}else S++;d[S]=1,R=!R}return S===N-1&&Ee.patternMatchVariance(d,u,Ee.MAX_INDIVIDUAL_VARIANCE)<Ee.MAX_AVG_VARIANCE?new Int32Array([h,w-1]):null}static patternMatchVariance(t,r,s){let o=t.length,a=0,u=0;for(let x=0;x<o;x++)a+=t[x],u+=r[x];if(a<u)return 1/0;let d=a/u;s*=d;let h=0;for(let x=0;x<o;x++){let w=t[x],S=r[x]*d,N=w>S?w-S:S-w;if(N>s)return 1/0;h+=N}return h/a}}Ee.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ee.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ee.MAX_AVG_VARIANCE=.42,Ee.MAX_INDIVIDUAL_VARIANCE=.8,Ee.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ee.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ee.MAX_PIXEL_DRIFT=3,Ee.MAX_PATTERN_DRIFT=5,Ee.SKIPPED_ROW_COUNT_MAX=25,Ee.ROW_STEP=5,Ee.BARCODE_MIN_HEIGHT=10;class vt{constructor(t,r){if(r.length===0)throw new v;this.field=t;let s=r.length;if(s>1&&r[0]===0){let o=1;for(;o<s&&r[o]===0;)o++;o===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-o),k.arraycopy(r,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let o=0;for(let a of this.coefficients)o=this.field.add(o,a);return o}let r=this.coefficients[0],s=this.coefficients.length;for(let o=1;o<s;o++)r=this.field.add(this.field.multiply(t,r),this.coefficients[o]);return r}add(t){if(!this.field.equals(t.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,s=t.coefficients;if(r.length>s.length){let u=r;r=s,s=u}let o=new Int32Array(s.length),a=s.length-r.length;k.arraycopy(s,0,o,0,a);for(let u=a;u<s.length;u++)o[u]=this.field.add(r[u-a],s[u]);return new vt(this.field,o)}subtract(t){if(!this.field.equals(t.field))throw new v("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof vt?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new vt(this.field,new Int32Array([0]));let r=this.coefficients,s=r.length,o=t.coefficients,a=o.length,u=new Int32Array(s+a-1);for(let d=0;d<s;d++){let h=r[d];for(let x=0;x<a;x++)u[d+x]=this.field.add(u[d+x],this.field.multiply(h,o[x]))}return new vt(this.field,u)}negative(){let t=this.coefficients.length,r=new Int32Array(t);for(let s=0;s<t;s++)r[s]=this.field.subtract(0,this.coefficients[s]);return new vt(this.field,r)}multiplyScalar(t){if(t===0)return new vt(this.field,new Int32Array([0]));if(t===1)return this;let r=this.coefficients.length,s=new Int32Array(r);for(let o=0;o<r;o++)s[o]=this.field.multiply(this.coefficients[o],t);return new vt(this.field,s)}multiplyByMonomial(t,r){if(t<0)throw new v;if(r===0)return new vt(this.field,new Int32Array([0]));let s=this.coefficients.length,o=new Int32Array(s+t);for(let a=0;a<s;a++)o[a]=this.field.multiply(this.coefficients[a],r);return new vt(this.field,o)}toString(){let t=new K;for(let r=this.getDegree();r>=0;r--){let s=this.getCoefficient(r);s!==0&&(s<0?(t.append(" - "),s=-s):t.length()>0&&t.append(" + "),(r===0||s!==1)&&t.append(s),r!==0&&(r===1?t.append("x"):(t.append("x^"),t.append(r))))}return t.toString()}}class Oh{add(t,r){return(t+r)%this.modulus}subtract(t,r){return(this.modulus+t-r)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new v;return this.logTable[t]}inverse(t){if(t===0)throw new ro;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class $l extends Oh{constructor(t,r){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let s=1;for(let o=0;o<t;o++)this.expTable[o]=s,s=s*r%t;for(let o=0;o<t-1;o++)this.logTable[this.expTable[o]]=o;this.zero=new vt(this,new Int32Array([0])),this.one=new vt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new v;if(r===0)return this.zero;let s=new Int32Array(t+1);return s[0]=r,new vt(this,s)}}$l.PDF417_GF=new $l(pe.NUMBER_OF_CODEWORDS,3);class Lc{constructor(){this.field=$l.PDF417_GF}decode(t,r,s){let o=new vt(this.field,t),a=new Int32Array(r),u=!1;for(let P=r;P>0;P--){let B=o.evaluateAt(this.field.exp(P));a[r-P]=B,B!==0&&(u=!0)}if(!u)return 0;let d=this.field.getOne();if(s!=null)for(const P of s){let B=this.field.exp(t.length-1-P),U=new vt(this.field,new Int32Array([this.field.subtract(0,B),1]));d=d.multiply(U)}let h=new vt(this.field,a),x=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),h,r),w=x[0],S=x[1],N=this.findErrorLocations(w),R=this.findErrorMagnitudes(S,w,N);for(let P=0;P<N.length;P++){let B=t.length-1-this.field.log(N[P]);if(B<0)throw O.getChecksumInstance();t[B]=this.field.subtract(t[B],R[P])}return N.length}runEuclideanAlgorithm(t,r,s){if(t.getDegree()<r.getDegree()){let N=t;t=r,r=N}let o=t,a=r,u=this.field.getZero(),d=this.field.getOne();for(;a.getDegree()>=Math.round(s/2);){let N=o,R=u;if(o=a,u=d,o.isZero())throw O.getChecksumInstance();a=N;let P=this.field.getZero(),B=o.getCoefficient(o.getDegree()),U=this.field.inverse(B);for(;a.getDegree()>=o.getDegree()&&!a.isZero();){let G=a.getDegree()-o.getDegree(),ee=this.field.multiply(a.getCoefficient(a.getDegree()),U);P=P.add(this.field.buildMonomial(G,ee)),a=a.subtract(o.multiplyByMonomial(G,ee))}d=P.multiply(u).subtract(R).negative()}let h=d.getCoefficient(0);if(h===0)throw O.getChecksumInstance();let x=this.field.inverse(h),w=d.multiply(x),S=a.multiply(x);return[w,S]}findErrorLocations(t){let r=t.getDegree(),s=new Int32Array(r),o=0;for(let a=1;a<this.field.getSize()&&o<r;a++)t.evaluateAt(a)===0&&(s[o]=this.field.inverse(a),o++);if(o!==r)throw O.getChecksumInstance();return s}findErrorMagnitudes(t,r,s){let o=r.getDegree(),a=new Int32Array(o);for(let x=1;x<=o;x++)a[o-x]=this.field.multiply(x,r.getCoefficient(x));let u=new vt(this.field,a),d=s.length,h=new Int32Array(d);for(let x=0;x<d;x++){let w=this.field.inverse(s[x]),S=this.field.subtract(0,t.evaluateAt(w)),N=this.field.inverse(u.evaluateAt(w));h[x]=this.field.multiply(S,N)}return h}}class Pr{constructor(t,r,s,o,a){t instanceof Pr?this.constructor_2(t):this.constructor_1(t,r,s,o,a)}constructor_1(t,r,s,o,a){const u=r==null||s==null,d=o==null||a==null;if(u&&d)throw new H;u?(r=new ue(0,o.getY()),s=new ue(0,a.getY())):d&&(o=new ue(t.getWidth()-1,r.getY()),a=new ue(t.getWidth()-1,s.getY())),this.image=t,this.topLeft=r,this.bottomLeft=s,this.topRight=o,this.bottomRight=a,this.minX=Math.trunc(Math.min(r.getX(),s.getX())),this.maxX=Math.trunc(Math.max(o.getX(),a.getX())),this.minY=Math.trunc(Math.min(r.getY(),o.getY())),this.maxY=Math.trunc(Math.max(s.getY(),a.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,r){return t==null?r:r==null?t:new Pr(t.image,t.topLeft,t.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(t,r,s){let o=this.topLeft,a=this.bottomLeft,u=this.topRight,d=this.bottomRight;if(t>0){let h=s?this.topLeft:this.topRight,x=Math.trunc(h.getY()-t);x<0&&(x=0);let w=new ue(h.getX(),x);s?o=w:u=w}if(r>0){let h=s?this.bottomLeft:this.bottomRight,x=Math.trunc(h.getY()+r);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);let w=new ue(h.getX(),x);s?a=w:d=w}return new Pr(this.image,o,a,u,d)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Mh{constructor(t,r,s,o){this.columnCount=t,this.errorCorrectionLevel=o,this.rowCountUpperPart=r,this.rowCountLowerPart=s,this.rowCount=r+s}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class qi{constructor(){this.buffer=""}static form(t,r){let s=-1;function o(u,d,h,x,w,S){if(u==="%%")return"%";if(r[++s]===void 0)return;u=x?parseInt(x.substr(1)):void 0;let N=w?parseInt(w.substr(1)):void 0,R;switch(S){case"s":R=r[s];break;case"c":R=r[s][0];break;case"f":R=parseFloat(r[s]).toFixed(u);break;case"p":R=parseFloat(r[s]).toPrecision(u);break;case"e":R=parseFloat(r[s]).toExponential(u);break;case"x":R=parseInt(r[s]).toString(N||16);break;case"d":R=parseFloat(parseInt(r[s],N||10).toPrecision(u)).toFixed(0);break}R=typeof R=="object"?JSON.stringify(R):(+R).toString(N);let P=parseInt(h),B=h&&h[0]+""=="0"?"0":" ";for(;R.length<P;)R=d!==void 0?R+B:B+R;return R}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(a,o)}format(t,...r){this.buffer+=qi.form(t,r)}toString(){return this.buffer}}class Ji{constructor(t){this.boundingBox=new Pr(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let r=this.getCodeword(t);if(r!=null)return r;for(let s=1;s<Ji.MAX_NEARBY_DISTANCE;s++){let o=this.imageRowToCodewordIndex(t)-s;if(o>=0&&(r=this.codewords[o],r!=null)||(o=this.imageRowToCodewordIndex(t)+s,o<this.codewords.length&&(r=this.codewords[o],r!=null)))return r}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,r){this.codewords[this.imageRowToCodewordIndex(t)]=r}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new qi;let r=0;for(const s of this.codewords){if(s==null){t.format("%3d:    |   %n",r++);continue}t.format("%3d: %3d|%3d%n",r++,s.getRowNumber(),s.getValue())}return t.toString()}}Ji.MAX_NEARBY_DISTANCE=5;class $i{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let r=this.values.get(t);r==null&&(r=0),r++,this.values.set(t,r)}getValue(){let t=-1,r=new Array;for(const[s,o]of this.values.entries()){const a={getKey:()=>s,getValue:()=>o};a.getValue()>t?(t=a.getValue(),r=[],r.push(a.getKey())):a.getValue()===t&&r.push(a.getKey())}return pe.toIntArray(r)}getConfidence(t){return this.values.get(t)}}class Fc extends Ji{constructor(t,r){super(t),this._isLeft=r}setRowNumbers(){for(let t of this.getCodewords())t!=null&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);let s=this.getBoundingBox(),o=this._isLeft?s.getTopLeft():s.getTopRight(),a=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=-1,x=1,w=0;for(let S=u;S<d;S++){if(r[S]==null)continue;let N=r[S],R=N.getRowNumber()-h;if(R===0)w++;else if(R===1)x=Math.max(x,w),w=1,h=N.getRowNumber();else if(R<0||N.getRowNumber()>=t.getRowCount()||R>S)r[S]=null;else{let P;x>2?P=(x-2)*R:P=R;let B=P>=S;for(let U=1;U<=P&&!B;U++)B=r[S-U]!=null;B?r[S]=null:(h=N.getRowNumber(),w=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let r=new Int32Array(t.getRowCount());for(let s of this.getCodewords())if(s!=null){let o=s.getRowNumber();if(o>=r.length)continue;r[o]++}return r}adjustIncompleteIndicatorColumnRowNumbers(t){let r=this.getBoundingBox(),s=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(s.getY())),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=this.getCodewords(),h=-1;for(let x=a;x<u;x++){if(d[x]==null)continue;let w=d[x];w.setRowNumberAsRowIndicatorColumn();let S=w.getRowNumber()-h;S===0||(S===1?h=w.getRowNumber():w.getRowNumber()>=t.getRowCount()?d[x]=null:h=w.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),r=new $i,s=new $i,o=new $i,a=new $i;for(let d of t){if(d==null)continue;d.setRowNumberAsRowIndicatorColumn();let h=d.getValue()%30,x=d.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:s.setValue(h*3+1);break;case 1:a.setValue(h/3),o.setValue(h%3);break;case 2:r.setValue(h+1);break}}if(r.getValue().length===0||s.getValue().length===0||o.getValue().length===0||a.getValue().length===0||r.getValue()[0]<1||s.getValue()[0]+o.getValue()[0]<pe.MIN_ROWS_IN_BARCODE||s.getValue()[0]+o.getValue()[0]>pe.MAX_ROWS_IN_BARCODE)return null;let u=new Mh(r.getValue()[0],s.getValue()[0],o.getValue()[0],a.getValue()[0]);return this.removeIncorrectCodewords(t,u),u}removeIncorrectCodewords(t,r){for(let s=0;s<t.length;s++){let o=t[s];if(t[s]==null)continue;let a=o.getValue()%30,u=o.getRowNumber();if(u>r.getRowCount()){t[s]=null;continue}switch(this._isLeft||(u+=2),u%3){case 0:a*3+1!==r.getRowCountUpperPart()&&(t[s]=null);break;case 1:(Math.trunc(a/3)!==r.getErrorCorrectionLevel()||a%3!==r.getRowCountLowerPart())&&(t[s]=null);break;case 2:a+1!==r.getColumnCount()&&(t[s]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class es{constructor(t,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=pe.MAX_CODEWORDS_IN_BARCODE,r;do r=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let s=this.detectionResultColumns[r].getCodewords();for(let o=0;o<s.length;o++)s[o]!=null&&(s[o].hasValidRowNumber()||this.adjustRowNumbers(r,o,s))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<t.length;s++)if(t[s]!=null&&r[s]!=null&&t[s].getRowNumber()===r[s].getRowNumber())for(let o=1;o<=this.barcodeColumnCount;o++){let a=this.detectionResultColumns[o].getCodewords()[s];a!=null&&(a.setRowNumber(t[s].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[o].getCodewords()[s]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<r.length;s++){if(r[s]==null)continue;let o=r[s].getRowNumber(),a=0;for(let u=this.barcodeColumnCount+1;u>0&&a<this.ADJUST_ROW_NUMBER_SKIP;u--){let d=this.detectionResultColumns[u].getCodewords()[s];d!=null&&(a=es.adjustRowNumberIfValid(o,a,d),d.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,r=this.detectionResultColumns[0].getCodewords();for(let s=0;s<r.length;s++){if(r[s]==null)continue;let o=r[s].getRowNumber(),a=0;for(let u=1;u<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;u++){let d=this.detectionResultColumns[u].getCodewords()[s];d!=null&&(a=es.adjustRowNumberIfValid(o,a,d),d.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,r,s){return s==null||s.hasValidRowNumber()||(s.isValidRowNumber(t)?(s.setRowNumber(t),r=0):++r),r}adjustRowNumbers(t,r,s){if(!this.detectionResultColumns[t-1])return;let o=s[r],a=this.detectionResultColumns[t-1].getCodewords(),u=a;this.detectionResultColumns[t+1]!=null&&(u=this.detectionResultColumns[t+1].getCodewords());let d=new Array(14);d[2]=a[r],d[3]=u[r],r>0&&(d[0]=s[r-1],d[4]=a[r-1],d[5]=u[r-1]),r>1&&(d[8]=s[r-2],d[10]=a[r-2],d[11]=u[r-2]),r<s.length-1&&(d[1]=s[r+1],d[6]=a[r+1],d[7]=u[r+1]),r<s.length-2&&(d[9]=s[r+2],d[12]=a[r+2],d[13]=u[r+2]);for(let h of d)if(es.adjustRowNumber(o,h))return}static adjustRowNumber(t,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===t.getBucket()?(t.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,r){this.detectionResultColumns[t]=r}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new qi;for(let s=0;s<t.getCodewords().length;s++){r.format("CW %3d:",s);for(let o=0;o<this.barcodeColumnCount+2;o++){if(this.detectionResultColumns[o]==null){r.format("    |   ");continue}let a=this.detectionResultColumns[o].getCodewords()[s];if(a==null){r.format("    |   ");continue}r.format(" %3d|%3d",a.getRowNumber(),a.getValue())}r.format("%n")}return r.toString()}}class ts{constructor(t,r,s,o){this.rowNumber=ts.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(r),this.bucket=Math.trunc(s),this.value=Math.trunc(o)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==ts.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}ts.BARCODE_ROW_UNKNOWN=-1;class Ht{static initialize(){for(let t=0;t<pe.SYMBOL_TABLE.length;t++){let r=pe.SYMBOL_TABLE[t],s=r&1;for(let o=0;o<pe.BARS_IN_MODULE;o++){let a=0;for(;(r&1)===s;)a+=1,r>>=1;s=r&1,Ht.RATIOS_TABLE[t]||(Ht.RATIOS_TABLE[t]=new Array(pe.BARS_IN_MODULE)),Ht.RATIOS_TABLE[t][pe.BARS_IN_MODULE-o-1]=Math.fround(a/pe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let r=Ht.getDecodedCodewordValue(Ht.sampleBitCounts(t));return r!==-1?r:Ht.getClosestDecodedValue(t)}static sampleBitCounts(t){let r=_e.sum(t),s=new Int32Array(pe.BARS_IN_MODULE),o=0,a=0;for(let u=0;u<pe.MODULES_IN_CODEWORD;u++){let d=r/(2*pe.MODULES_IN_CODEWORD)+u*r/pe.MODULES_IN_CODEWORD;a+t[o]<=d&&(a+=t[o],o++),s[o]++}return s}static getDecodedCodewordValue(t){let r=Ht.getBitValue(t);return pe.getCodeword(r)===-1?-1:r}static getBitValue(t){let r=0;for(let s=0;s<t.length;s++)for(let o=0;o<t[s];o++)r=r<<1|(s%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(t){let r=_e.sum(t),s=new Array(pe.BARS_IN_MODULE);if(r>1)for(let u=0;u<s.length;u++)s[u]=Math.fround(t[u]/r);let o=io.MAX_VALUE,a=-1;this.bSymbolTableReady||Ht.initialize();for(let u=0;u<Ht.RATIOS_TABLE.length;u++){let d=0,h=Ht.RATIOS_TABLE[u];for(let x=0;x<pe.BARS_IN_MODULE;x++){let w=Math.fround(h[x]-s[x]);if(d+=Math.fround(w*w),d>=o)break}d<o&&(o=d,a=pe.SYMBOL_TABLE[u])}return a}}Ht.bSymbolTableReady=!1,Ht.RATIOS_TABLE=new Array(pe.SYMBOL_TABLE.length).map(A=>new Array(pe.BARS_IN_MODULE));class jc{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class Uc{static parseLong(t,r=void 0){return parseInt(t,r)}}class zc extends p{}zc.kind="NullPointerException";class Dh{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,r,s){if(t==null)throw new zc;if(r<0||r>t.length||s<0||r+s>t.length||r+s<0)throw new F;if(s===0)return;for(let o=0;o<s;o++)this.write(t[r+o])}flush(){}close(){}}class kh extends p{}class Ph extends Dh{constructor(t=32){if(super(),this.count=0,t<0)throw new v("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let s=this.buf.length<<1;if(s-t<0&&(s=t),s<0){if(t<0)throw new kh;s=T.MAX_VALUE}this.buf=b.copyOfUint8Array(this.buf,s)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,r,s){if(r<0||r>t.length||s<0||r+s-t.length>0)throw new F;this.ensureCapacity(this.count+s),k.arraycopy(t,r,this.buf,this.count,s),this.count+=s}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return b.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var Be;(function(A){A[A.ALPHA=0]="ALPHA",A[A.LOWER=1]="LOWER",A[A.MIXED=2]="MIXED",A[A.PUNCT=3]="PUNCT",A[A.ALPHA_SHIFT=4]="ALPHA_SHIFT",A[A.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Be||(Be={}));function Vc(){if(typeof window<"u")return window.BigInt||null;if(typeof is<"u")return is.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let fo;function lr(A){if(typeof fo>"u"&&(fo=Vc()),fo===null)throw new Error("BigInt is not supported!");return fo(A)}function Bh(){let A=[];A[0]=lr(1);let t=lr(900);A[1]=t;for(let r=2;r<16;r++)A[r]=A[r-1]*t;return A}class W{static decode(t,r){let s=new K(""),o=X.ISO8859_1;s.enableDecoding(o);let a=1,u=t[a++],d=new jc;for(;a<t[0];){switch(u){case W.TEXT_COMPACTION_MODE_LATCH:a=W.textCompaction(t,a,s);break;case W.BYTE_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:a=W.byteCompaction(u,t,o,a,s);break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(t[a++]);break;case W.NUMERIC_COMPACTION_MODE_LATCH:a=W.numericCompaction(t,a,s);break;case W.ECI_CHARSET:X.getCharacterSetECIByValue(t[a++]);break;case W.ECI_GENERAL_PURPOSE:a+=2;break;case W.ECI_USER_DEFINED:a++;break;case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=W.decodeMacroBlock(t,a,d);break;case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:throw new L;default:a--,a=W.textCompaction(t,a,s);break}if(a<t.length)u=t[a++];else throw L.getFormatInstance()}if(s.length()===0)throw L.getFormatInstance();let h=new Xi(null,s.toString(),null,r);return h.setOther(d),h}static decodeMacroBlock(t,r,s){if(r+W.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw L.getFormatInstance();let o=new Int32Array(W.NUMBER_OF_SEQUENCE_CODEWORDS);for(let d=0;d<W.NUMBER_OF_SEQUENCE_CODEWORDS;d++,r++)o[d]=t[r];s.setSegmentIndex(T.parseInt(W.decodeBase900toBase10(o,W.NUMBER_OF_SEQUENCE_CODEWORDS)));let a=new K;r=W.textCompaction(t,r,a),s.setFileId(a.toString());let u=-1;for(t[r]===W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(u=r+1);r<t[0];)switch(t[r]){case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,t[r]){case W.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let d=new K;r=W.textCompaction(t,r+1,d),s.setFileName(d.toString());break;case W.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let h=new K;r=W.textCompaction(t,r+1,h),s.setSender(h.toString());break;case W.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let x=new K;r=W.textCompaction(t,r+1,x),s.setAddressee(x.toString());break;case W.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let w=new K;r=W.numericCompaction(t,r+1,w),s.setSegmentCount(T.parseInt(w.toString()));break;case W.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let S=new K;r=W.numericCompaction(t,r+1,S),s.setTimestamp(Uc.parseLong(S.toString()));break;case W.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let N=new K;r=W.numericCompaction(t,r+1,N),s.setChecksum(T.parseInt(N.toString()));break;case W.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let R=new K;r=W.numericCompaction(t,r+1,R),s.setFileSize(Uc.parseLong(R.toString()));break;default:throw L.getFormatInstance()}break;case W.MACRO_PDF417_TERMINATOR:r++,s.setLastSegment(!0);break;default:throw L.getFormatInstance()}if(u!==-1){let d=r-u;s.isLastSegment()&&d--,s.setOptionalData(b.copyOfRange(t,u,u+d))}return r}static textCompaction(t,r,s){let o=new Int32Array((t[0]-r)*2),a=new Int32Array((t[0]-r)*2),u=0,d=!1;for(;r<t[0]&&!d;){let h=t[r++];if(h<W.TEXT_COMPACTION_MODE_LATCH)o[u]=h/30,o[u+1]=h%30,u+=2;else switch(h){case W.TEXT_COMPACTION_MODE_LATCH:o[u++]=W.TEXT_COMPACTION_MODE_LATCH;break;case W.BYTE_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:case W.NUMERIC_COMPACTION_MODE_LATCH:case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:r--,d=!0;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[u]=W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,h=t[r++],a[u]=h,u++;break}}return W.decodeTextCompaction(o,a,u,s),r}static decodeTextCompaction(t,r,s,o){let a=Be.ALPHA,u=Be.ALPHA,d=0;for(;d<s;){let h=t[d],x="";switch(a){case Be.ALPHA:if(h<26)x=String.fromCharCode(65+h);else switch(h){case 26:x=" ";break;case W.LL:a=Be.LOWER;break;case W.ML:a=Be.MIXED;break;case W.PS:u=a,a=Be.PUNCT_SHIFT;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[d]);break;case W.TEXT_COMPACTION_MODE_LATCH:a=Be.ALPHA;break}break;case Be.LOWER:if(h<26)x=String.fromCharCode(97+h);else switch(h){case 26:x=" ";break;case W.AS:u=a,a=Be.ALPHA_SHIFT;break;case W.ML:a=Be.MIXED;break;case W.PS:u=a,a=Be.PUNCT_SHIFT;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[d]);break;case W.TEXT_COMPACTION_MODE_LATCH:a=Be.ALPHA;break}break;case Be.MIXED:if(h<W.PL)x=W.MIXED_CHARS[h];else switch(h){case W.PL:a=Be.PUNCT;break;case 26:x=" ";break;case W.LL:a=Be.LOWER;break;case W.AL:a=Be.ALPHA;break;case W.PS:u=a,a=Be.PUNCT_SHIFT;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[d]);break;case W.TEXT_COMPACTION_MODE_LATCH:a=Be.ALPHA;break}break;case Be.PUNCT:if(h<W.PAL)x=W.PUNCT_CHARS[h];else switch(h){case W.PAL:a=Be.ALPHA;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[d]);break;case W.TEXT_COMPACTION_MODE_LATCH:a=Be.ALPHA;break}break;case Be.ALPHA_SHIFT:if(a=u,h<26)x=String.fromCharCode(65+h);else switch(h){case 26:x=" ";break;case W.TEXT_COMPACTION_MODE_LATCH:a=Be.ALPHA;break}break;case Be.PUNCT_SHIFT:if(a=u,h<W.PAL)x=W.PUNCT_CHARS[h];else switch(h){case W.PAL:a=Be.ALPHA;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[d]);break;case W.TEXT_COMPACTION_MODE_LATCH:a=Be.ALPHA;break}break}x!==""&&o.append(x),d++}}static byteCompaction(t,r,s,o,a){let u=new Ph,d=0,h=0,x=!1;switch(t){case W.BYTE_COMPACTION_MODE_LATCH:let w=new Int32Array(6),S=r[o++];for(;o<r[0]&&!x;)switch(w[d++]=S,h=900*h+S,S=r[o++],S){case W.TEXT_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH:case W.NUMERIC_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:o--,x=!0;break;default:if(d%5===0&&d>0){for(let N=0;N<6;++N)u.write(Number(lr(h)>>lr(8*(5-N))));h=0,d=0}break}o===r[0]&&S<W.TEXT_COMPACTION_MODE_LATCH&&(w[d++]=S);for(let N=0;N<d;N++)u.write(w[N]);break;case W.BYTE_COMPACTION_MODE_LATCH_6:for(;o<r[0]&&!x;){let N=r[o++];if(N<W.TEXT_COMPACTION_MODE_LATCH)d++,h=900*h+N;else switch(N){case W.TEXT_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH:case W.NUMERIC_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:o--,x=!0;break}if(d%5===0&&d>0){for(let R=0;R<6;++R)u.write(Number(lr(h)>>lr(8*(5-R))));h=0,d=0}}break}return a.append(Se.decode(u.toByteArray(),s)),o}static numericCompaction(t,r,s){let o=0,a=!1,u=new Int32Array(W.MAX_NUMERIC_CODEWORDS);for(;r<t[0]&&!a;){let d=t[r++];if(r===t[0]&&(a=!0),d<W.TEXT_COMPACTION_MODE_LATCH)u[o]=d,o++;else switch(d){case W.TEXT_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:r--,a=!0;break}(o%W.MAX_NUMERIC_CODEWORDS===0||d===W.NUMERIC_COMPACTION_MODE_LATCH||a)&&o>0&&(s.append(W.decodeBase900toBase10(u,o)),o=0)}return r}static decodeBase900toBase10(t,r){let s=lr(0);for(let a=0;a<r;a++)s+=W.EXP900[r-a-1]*lr(t[a]);let o=s.toString();if(o.charAt(0)!=="1")throw new L;return o.substring(1)}}W.TEXT_COMPACTION_MODE_LATCH=900,W.BYTE_COMPACTION_MODE_LATCH=901,W.NUMERIC_COMPACTION_MODE_LATCH=902,W.BYTE_COMPACTION_MODE_LATCH_6=924,W.ECI_USER_DEFINED=925,W.ECI_GENERAL_PURPOSE=926,W.ECI_CHARSET=927,W.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,W.MACRO_PDF417_TERMINATOR=922,W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,W.MAX_NUMERIC_CODEWORDS=15,W.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,W.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,W.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,W.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,W.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,W.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,W.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,W.PL=25,W.LL=27,W.AS=27,W.ML=28,W.AL=28,W.PS=29,W.PAL=29,W.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,W.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",W.EXP900=Vc()?Bh():[],W.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ce{constructor(){}static decode(t,r,s,o,a,u,d){let h=new Pr(t,r,s,o,a),x=null,w=null,S;for(let P=!0;;P=!1){if(r!=null&&(x=Ce.getRowIndicatorColumn(t,h,r,!0,u,d)),o!=null&&(w=Ce.getRowIndicatorColumn(t,h,o,!1,u,d)),S=Ce.merge(x,w),S==null)throw H.getNotFoundInstance();let B=S.getBoundingBox();if(P&&B!=null&&(B.getMinY()<h.getMinY()||B.getMaxY()>h.getMaxY()))h=B;else break}S.setBoundingBox(h);let N=S.getBarcodeColumnCount()+1;S.setDetectionResultColumn(0,x),S.setDetectionResultColumn(N,w);let R=x!=null;for(let P=1;P<=N;P++){let B=R?P:N-P;if(S.getDetectionResultColumn(B)!==void 0)continue;let U;B===0||B===N?U=new Fc(h,B===0):U=new Ji(h),S.setDetectionResultColumn(B,U);let G=-1,ee=G;for(let te=h.getMinY();te<=h.getMaxY();te++){if(G=Ce.getStartColumn(S,B,te,R),G<0||G>h.getMaxX()){if(ee===-1)continue;G=ee}let J=Ce.detectCodeword(t,h.getMinX(),h.getMaxX(),R,G,te,u,d);J!=null&&(U.setCodeword(te,J),ee=G,u=Math.min(u,J.getWidth()),d=Math.max(d,J.getWidth()))}}return Ce.createDecoderResult(S)}static merge(t,r){if(t==null&&r==null)return null;let s=Ce.getBarcodeMetadata(t,r);if(s==null)return null;let o=Pr.merge(Ce.adjustBoundingBox(t),Ce.adjustBoundingBox(r));return new es(s,o)}static adjustBoundingBox(t){if(t==null)return null;let r=t.getRowHeights();if(r==null)return null;let s=Ce.getMax(r),o=0;for(let d of r)if(o+=s-d,d>0)break;let a=t.getCodewords();for(let d=0;o>0&&a[d]==null;d++)o--;let u=0;for(let d=r.length-1;d>=0&&(u+=s-r[d],!(r[d]>0));d--);for(let d=a.length-1;u>0&&a[d]==null;d--)u--;return t.getBoundingBox().addMissingRows(o,u,t.isLeft())}static getMax(t){let r=-1;for(let s of t)r=Math.max(r,s);return r}static getBarcodeMetadata(t,r){let s;if(t==null||(s=t.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let o;return r==null||(o=r.getBarcodeMetadata())==null?s:s.getColumnCount()!==o.getColumnCount()&&s.getErrorCorrectionLevel()!==o.getErrorCorrectionLevel()&&s.getRowCount()!==o.getRowCount()?null:s}static getRowIndicatorColumn(t,r,s,o,a,u){let d=new Fc(r,o);for(let h=0;h<2;h++){let x=h===0?1:-1,w=Math.trunc(Math.trunc(s.getX()));for(let S=Math.trunc(Math.trunc(s.getY()));S<=r.getMaxY()&&S>=r.getMinY();S+=x){let N=Ce.detectCodeword(t,0,t.getWidth(),o,w,S,a,u);N!=null&&(d.setCodeword(S,N),o?w=N.getStartX():w=N.getEndX())}}return d}static adjustCodewordCount(t,r){let s=r[0][1],o=s.getValue(),a=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-Ce.getNumberOfECCodeWords(t.getBarcodeECLevel());if(o.length===0){if(a<1||a>pe.MAX_CODEWORDS_IN_BARCODE)throw H.getNotFoundInstance();s.setValue(a)}else o[0]!==a&&s.setValue(a)}static createDecoderResult(t){let r=Ce.createBarcodeMatrix(t);Ce.adjustCodewordCount(t,r);let s=new Array,o=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),a=[],u=new Array;for(let h=0;h<t.getBarcodeRowCount();h++)for(let x=0;x<t.getBarcodeColumnCount();x++){let w=r[h][x+1].getValue(),S=h*t.getBarcodeColumnCount()+x;w.length===0?s.push(S):w.length===1?o[S]=w[0]:(u.push(S),a.push(w))}let d=new Array(a.length);for(let h=0;h<d.length;h++)d[h]=a[h];return Ce.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),o,pe.toIntArray(s),pe.toIntArray(u),d)}static createDecoderResultFromAmbiguousValues(t,r,s,o,a){let u=new Int32Array(o.length),d=100;for(;d-- >0;){for(let h=0;h<u.length;h++)r[o[h]]=a[h][u[h]];try{return Ce.decodeCodewords(r,t,s)}catch(h){if(!(h instanceof O))throw h}if(u.length===0)throw O.getChecksumInstance();for(let h=0;h<u.length;h++)if(u[h]<a[h].length-1){u[h]++;break}else if(u[h]=0,h===u.length-1)throw O.getChecksumInstance()}throw O.getChecksumInstance()}static createBarcodeMatrix(t){let r=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let o=0;o<r.length;o++)for(let a=0;a<r[o].length;a++)r[o][a]=new $i;let s=0;for(let o of t.getDetectionResultColumns()){if(o!=null){for(let a of o.getCodewords())if(a!=null){let u=a.getRowNumber();if(u>=0){if(u>=r.length)continue;r[u][s].setValue(a.getValue())}}}s++}return r}static isValidBarcodeColumn(t,r){return r>=0&&r<=t.getBarcodeColumnCount()+1}static getStartColumn(t,r,s,o){let a=o?1:-1,u=null;if(Ce.isValidBarcodeColumn(t,r-a)&&(u=t.getDetectionResultColumn(r-a).getCodeword(s)),u!=null)return o?u.getEndX():u.getStartX();if(u=t.getDetectionResultColumn(r).getCodewordNearby(s),u!=null)return o?u.getStartX():u.getEndX();if(Ce.isValidBarcodeColumn(t,r-a)&&(u=t.getDetectionResultColumn(r-a).getCodewordNearby(s)),u!=null)return o?u.getEndX():u.getStartX();let d=0;for(;Ce.isValidBarcodeColumn(t,r-a);){r-=a;for(let h of t.getDetectionResultColumn(r).getCodewords())if(h!=null)return(o?h.getEndX():h.getStartX())+a*d*(h.getEndX()-h.getStartX());d++}return o?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,r,s,o,a,u,d,h){a=Ce.adjustCodewordStartColumn(t,r,s,o,a,u);let x=Ce.getModuleBitCount(t,r,s,o,a,u);if(x==null)return null;let w,S=_e.sum(x);if(o)w=a+S;else{for(let P=0;P<x.length/2;P++){let B=x[P];x[P]=x[x.length-1-P],x[x.length-1-P]=B}w=a,a=w-S}if(!Ce.checkCodewordSkew(S,d,h))return null;let N=Ht.getDecodedValue(x),R=pe.getCodeword(N);return R===-1?null:new ts(a,w,Ce.getCodewordBucketNumber(N),R)}static getModuleBitCount(t,r,s,o,a,u){let d=a,h=new Int32Array(8),x=0,w=o?1:-1,S=o;for(;(o?d<s:d>=r)&&x<h.length;)t.get(d,u)===S?(h[x]++,d+=w):(x++,S=!S);return x===h.length||d===(o?s:r)&&x===h.length-1?h:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,r,s,o,a,u){let d=a,h=o?-1:1;for(let x=0;x<2;x++){for(;(o?d>=r:d<s)&&o===t.get(d,u);){if(Math.abs(a-d)>Ce.CODEWORD_SKEW_SIZE)return a;d+=h}h=-h,o=!o}return d}static checkCodewordSkew(t,r,s){return r-Ce.CODEWORD_SKEW_SIZE<=t&&t<=s+Ce.CODEWORD_SKEW_SIZE}static decodeCodewords(t,r,s){if(t.length===0)throw L.getFormatInstance();let o=1<<r+1,a=Ce.correctErrors(t,s,o);Ce.verifyCodewordCount(t,o);let u=W.decode(t,""+r);return u.setErrorsCorrected(a),u.setErasures(s.length),u}static correctErrors(t,r,s){if(r!=null&&r.length>s/2+Ce.MAX_ERRORS||s<0||s>Ce.MAX_EC_CODEWORDS)throw O.getChecksumInstance();return Ce.errorCorrection.decode(t,s,r)}static verifyCodewordCount(t,r){if(t.length<4)throw L.getFormatInstance();let s=t[0];if(s>t.length)throw L.getFormatInstance();if(s===0)if(r<t.length)t[0]=t.length-r;else throw L.getFormatInstance()}static getBitCountForCodeword(t){let r=new Int32Array(8),s=0,o=r.length-1;for(;!((t&1)!==s&&(s=t&1,o--,o<0));)r[o]++,t>>=1;return r}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return Ce.getCodewordBucketNumber(Ce.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let r=new qi;for(let s=0;s<t.length;s++){r.format("Row %2d: ",s);for(let o=0;o<t[s].length;o++){let a=t[s][o];a.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}r.format("%n")}return r.toString()}}Ce.CODEWORD_SKEW_SIZE=2,Ce.MAX_ERRORS=3,Ce.MAX_EC_CODEWORDS=512,Ce.errorCorrection=new Lc;class At{decode(t,r=null){let s=At.decode(t,r,!1);if(s==null||s.length===0||s[0]==null)throw H.getNotFoundInstance();return s[0]}decodeMultiple(t,r=null){try{return At.decode(t,r,!0)}catch(s){throw s instanceof L||s instanceof O?H.getNotFoundInstance():s}}static decode(t,r,s){const o=new Array,a=Ee.detectMultiple(t,r,s);for(const u of a.getPoints()){const d=Ce.decode(a.getBits(),u[4],u[5],u[6],u[7],At.getMinCodewordWidth(u),At.getMaxCodewordWidth(u)),h=new Qe(d.getText(),d.getRawBytes(),void 0,u,ce.PDF_417);h.putMetadata(pt.ERROR_CORRECTION_LEVEL,d.getECLevel());const x=d.getOther();x!=null&&h.putMetadata(pt.PDF417_EXTRA_METADATA,x),o.push(h)}return o.map(u=>u)}static getMaxWidth(t,r){return t==null||r==null?0:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMinWidth(t,r){return t==null||r==null?T.MAX_VALUE:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(At.getMaxWidth(t[0],t[4]),At.getMaxWidth(t[6],t[2])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN),Math.max(At.getMaxWidth(t[1],t[5]),At.getMaxWidth(t[7],t[3])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(At.getMinWidth(t[0],t[4]),At.getMinWidth(t[6],t[2])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN),Math.min(At.getMinWidth(t[1],t[5]),At.getMinWidth(t[7],t[3])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN)))}reset(){}}class ho extends p{}ho.kind="ReaderException";class Hc{constructor(t,r){this.verbose=t===!0,r&&this.setHints(r)}decode(t,r){return r&&this.setHints(r),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const r=!l(t)&&t.get(z.TRY_HARDER)===!0,s=l(t)?null:t.get(z.POSSIBLE_FORMATS),o=new Array;if(!l(s)){const a=s.some(u=>u===ce.UPC_A||u===ce.UPC_E||u===ce.EAN_13||u===ce.EAN_8||u===ce.CODABAR||u===ce.CODE_39||u===ce.CODE_93||u===ce.CODE_128||u===ce.ITF||u===ce.RSS_14||u===ce.RSS_EXPANDED);a&&!r&&o.push(new si(t,this.verbose)),s.includes(ce.QR_CODE)&&o.push(new or),s.includes(ce.DATA_MATRIX)&&o.push(new sr),s.includes(ce.AZTEC)&&o.push(new oo),s.includes(ce.PDF_417)&&o.push(new At),a&&r&&o.push(new si(t,this.verbose))}o.length===0&&(r||o.push(new si(t,this.verbose)),o.push(new or),o.push(new sr),o.push(new oo),o.push(new At),r&&o.push(new si(t,this.verbose))),this.readers=o}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new ho("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(t,this.hints)}catch(s){if(s instanceof ho)continue}throw new H("No MultiFormat Readers were able to detect the code.")}}class Lh extends on{constructor(t=null,r=500){const s=new Hc;s.setHints(t),super(s,r)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class Fh extends on{constructor(t=500){super(new At,t)}}class jh extends on{constructor(t=500){super(new or,t)}}var ea;(function(A){A[A.ERROR_CORRECTION=0]="ERROR_CORRECTION",A[A.CHARACTER_SET=1]="CHARACTER_SET",A[A.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",A[A.MIN_SIZE=3]="MIN_SIZE",A[A.MAX_SIZE=4]="MAX_SIZE",A[A.MARGIN=5]="MARGIN",A[A.PDF417_COMPACT=6]="PDF417_COMPACT",A[A.PDF417_COMPACTION=7]="PDF417_COMPACTION",A[A.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",A[A.AZTEC_LAYERS=9]="AZTEC_LAYERS",A[A.QR_VERSION=10]="QR_VERSION"})(ea||(ea={}));var ht=ea;class ta{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Ut(t,Int32Array.from([1])))}buildGenerator(t){const r=this.cachedGenerators;if(t>=r.length){let s=r[r.length-1];const o=this.field;for(let a=r.length;a<=t;a++){const u=s.multiply(new Ut(o,Int32Array.from([1,o.exp(a-1+o.getGeneratorBase())])));r.push(u),s=u}}return r[t]}encode(t,r){if(r===0)throw new v("No error correction bytes");const s=t.length-r;if(s<=0)throw new v("No data bytes provided");const o=this.buildGenerator(r),a=new Int32Array(s);k.arraycopy(t,0,a,0,s);let u=new Ut(this.field,a);u=u.multiplyByMonomial(r,1);const h=u.divide(o)[1].getCoefficients(),x=r-h.length;for(let w=0;w<x;w++)t[s+w]=0;k.arraycopy(h,0,t,s+x,h.length)}}class rt{constructor(){}static applyMaskPenaltyRule1(t){return rt.applyMaskPenaltyRule1Internal(t,!0)+rt.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let r=0;const s=t.getArray(),o=t.getWidth(),a=t.getHeight();for(let u=0;u<a-1;u++){const d=s[u];for(let h=0;h<o-1;h++){const x=d[h];x===d[h+1]&&x===s[u+1][h]&&x===s[u+1][h+1]&&r++}}return rt.N2*r}static applyMaskPenaltyRule3(t){let r=0;const s=t.getArray(),o=t.getWidth(),a=t.getHeight();for(let u=0;u<a;u++)for(let d=0;d<o;d++){const h=s[u];d+6<o&&h[d]===1&&h[d+1]===0&&h[d+2]===1&&h[d+3]===1&&h[d+4]===1&&h[d+5]===0&&h[d+6]===1&&(rt.isWhiteHorizontal(h,d-4,d)||rt.isWhiteHorizontal(h,d+7,d+11))&&r++,u+6<a&&s[u][d]===1&&s[u+1][d]===0&&s[u+2][d]===1&&s[u+3][d]===1&&s[u+4][d]===1&&s[u+5][d]===0&&s[u+6][d]===1&&(rt.isWhiteVertical(s,d,u-4,u)||rt.isWhiteVertical(s,d,u+7,u+11))&&r++}return r*rt.N3}static isWhiteHorizontal(t,r,s){r=Math.max(r,0),s=Math.min(s,t.length);for(let o=r;o<s;o++)if(t[o]===1)return!1;return!0}static isWhiteVertical(t,r,s,o){s=Math.max(s,0),o=Math.min(o,t.length);for(let a=s;a<o;a++)if(t[a][r]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let r=0;const s=t.getArray(),o=t.getWidth(),a=t.getHeight();for(let h=0;h<a;h++){const x=s[h];for(let w=0;w<o;w++)x[w]===1&&r++}const u=t.getHeight()*t.getWidth();return Math.floor(Math.abs(r*2-u)*10/u)*rt.N4}static getDataMaskBit(t,r,s){let o,a;switch(t){case 0:o=s+r&1;break;case 1:o=s&1;break;case 2:o=r%3;break;case 3:o=(s+r)%3;break;case 4:o=Math.floor(s/2)+Math.floor(r/3)&1;break;case 5:a=s*r,o=(a&1)+a%3;break;case 6:a=s*r,o=(a&1)+a%3&1;break;case 7:a=s*r,o=a%3+(s+r&1)&1;break;default:throw new v("Invalid mask pattern: "+t)}return o===0}static applyMaskPenaltyRule1Internal(t,r){let s=0;const o=r?t.getHeight():t.getWidth(),a=r?t.getWidth():t.getHeight(),u=t.getArray();for(let d=0;d<o;d++){let h=0,x=-1;for(let w=0;w<a;w++){const S=r?u[d][w]:u[w][d];S===x?h++:(h>=5&&(s+=rt.N1+(h-5)),h=1,x=S)}h>=5&&(s+=rt.N1+(h-5))}return s}}rt.N1=3,rt.N2=3,rt.N3=40,rt.N4=10;class xo{constructor(t,r){this.width=t,this.height=r;const s=new Array(r);for(let o=0;o!==r;o++)s[o]=new Uint8Array(t);this.bytes=s}getHeight(){return this.height}getWidth(){return this.width}get(t,r){return this.bytes[r][t]}getArray(){return this.bytes}setNumber(t,r,s){this.bytes[r][t]=s}setBoolean(t,r,s){this.bytes[r][t]=s?1:0}clear(t){for(const r of this.bytes)b.fill(r,t)}equals(t){if(!(t instanceof xo))return!1;const r=t;if(this.width!==r.width||this.height!==r.height)return!1;for(let s=0,o=this.height;s<o;++s){const a=this.bytes[s],u=r.bytes[s];for(let d=0,h=this.width;d<h;++d)if(a[d]!==u[d])return!1}return!0}toString(){const t=new K;for(let r=0,s=this.height;r<s;++r){const o=this.bytes[r];for(let a=0,u=this.width;a<u;++a)switch(o[a]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class Br{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new K;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<Br.NUM_MASK_PATTERNS}}Br.NUM_MASK_PATTERNS=8;class Fe extends p{}Fe.kind="WriterException";class xe{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,r,s,o,a){xe.clearMatrix(a),xe.embedBasicPatterns(s,a),xe.embedTypeInfo(r,o,a),xe.maybeEmbedVersionInfo(s,a),xe.embedDataBits(t,o,a)}static embedBasicPatterns(t,r){xe.embedPositionDetectionPatternsAndSeparators(r),xe.embedDarkDotAtLeftBottomCorner(r),xe.maybeEmbedPositionAdjustmentPatterns(t,r),xe.embedTimingPatterns(r)}static embedTypeInfo(t,r,s){const o=new j;xe.makeTypeInfoBits(t,r,o);for(let a=0,u=o.getSize();a<u;++a){const d=o.get(o.getSize()-1-a),h=xe.TYPE_INFO_COORDINATES[a],x=h[0],w=h[1];if(s.setBoolean(x,w,d),a<8){const S=s.getWidth()-a-1;s.setBoolean(S,8,d)}else{const N=s.getHeight()-7+(a-8);s.setBoolean(8,N,d)}}}static maybeEmbedVersionInfo(t,r){if(t.getVersionNumber()<7)return;const s=new j;xe.makeVersionInfoBits(t,s);let o=6*3-1;for(let a=0;a<6;++a)for(let u=0;u<3;++u){const d=s.get(o);o--,r.setBoolean(a,r.getHeight()-11+u,d),r.setBoolean(r.getHeight()-11+u,a,d)}}static embedDataBits(t,r,s){let o=0,a=-1,u=s.getWidth()-1,d=s.getHeight()-1;for(;u>0;){for(u===6&&(u-=1);d>=0&&d<s.getHeight();){for(let h=0;h<2;++h){const x=u-h;if(!xe.isEmpty(s.get(x,d)))continue;let w;o<t.getSize()?(w=t.get(o),++o):w=!1,r!==255&&rt.getDataMaskBit(r,x,d)&&(w=!w),s.setBoolean(x,d,w)}d+=a}a=-a,d+=a,u-=2}if(o!==t.getSize())throw new Fe("Not all bits consumed: "+o+"/"+t.getSize())}static findMSBSet(t){return 32-T.numberOfLeadingZeros(t)}static calculateBCHCode(t,r){if(r===0)throw new v("0 polynomial");const s=xe.findMSBSet(r);for(t<<=s-1;xe.findMSBSet(t)>=s;)t^=r<<xe.findMSBSet(t)-s;return t}static makeTypeInfoBits(t,r,s){if(!Br.isValidMaskPattern(r))throw new Fe("Invalid mask pattern");const o=t.getBits()<<3|r;s.appendBits(o,5);const a=xe.calculateBCHCode(o,xe.TYPE_INFO_POLY);s.appendBits(a,10);const u=new j;if(u.appendBits(xe.TYPE_INFO_MASK_PATTERN,15),s.xor(u),s.getSize()!==15)throw new Fe("should not happen but we got: "+s.getSize())}static makeVersionInfoBits(t,r){r.appendBits(t.getVersionNumber(),6);const s=xe.calculateBCHCode(t.getVersionNumber(),xe.VERSION_INFO_POLY);if(r.appendBits(s,12),r.getSize()!==18)throw new Fe("should not happen but we got: "+r.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let r=8;r<t.getWidth()-8;++r){const s=(r+1)%2;xe.isEmpty(t.get(r,6))&&t.setNumber(r,6,s),xe.isEmpty(t.get(6,r))&&t.setNumber(6,r,s)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new Fe;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,r,s){for(let o=0;o<8;++o){if(!xe.isEmpty(s.get(t+o,r)))throw new Fe;s.setNumber(t+o,r,0)}}static embedVerticalSeparationPattern(t,r,s){for(let o=0;o<7;++o){if(!xe.isEmpty(s.get(t,r+o)))throw new Fe;s.setNumber(t,r+o,0)}}static embedPositionAdjustmentPattern(t,r,s){for(let o=0;o<5;++o){const a=xe.POSITION_ADJUSTMENT_PATTERN[o];for(let u=0;u<5;++u)s.setNumber(t+u,r+o,a[u])}}static embedPositionDetectionPattern(t,r,s){for(let o=0;o<7;++o){const a=xe.POSITION_DETECTION_PATTERN[o];for(let u=0;u<7;++u)s.setNumber(t+u,r+o,a[u])}}static embedPositionDetectionPatternsAndSeparators(t){const r=xe.POSITION_DETECTION_PATTERN[0].length;xe.embedPositionDetectionPattern(0,0,t),xe.embedPositionDetectionPattern(t.getWidth()-r,0,t),xe.embedPositionDetectionPattern(0,t.getWidth()-r,t);const s=8;xe.embedHorizontalSeparationPattern(0,s-1,t),xe.embedHorizontalSeparationPattern(t.getWidth()-s,s-1,t),xe.embedHorizontalSeparationPattern(0,t.getWidth()-s,t);const o=7;xe.embedVerticalSeparationPattern(o,0,t),xe.embedVerticalSeparationPattern(t.getHeight()-o-1,0,t),xe.embedVerticalSeparationPattern(o,t.getHeight()-o,t)}static maybeEmbedPositionAdjustmentPatterns(t,r){if(t.getVersionNumber()<2)return;const s=t.getVersionNumber()-1,o=xe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s];for(let a=0,u=o.length;a!==u;a++){const d=o[a];if(d>=0)for(let h=0;h!==u;h++){const x=o[h];x>=0&&xe.isEmpty(r.get(x,d))&&xe.embedPositionAdjustmentPattern(x-2,d-2,r)}}}}xe.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),xe.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),xe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),xe.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),xe.VERSION_INFO_POLY=7973,xe.TYPE_INFO_POLY=1335,xe.TYPE_INFO_MASK_PATTERN=21522;class Uh{constructor(t,r){this.dataBytes=t,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class He{constructor(){}static calculateMaskPenalty(t){return rt.applyMaskPenaltyRule1(t)+rt.applyMaskPenaltyRule2(t)+rt.applyMaskPenaltyRule3(t)+rt.applyMaskPenaltyRule4(t)}static encode(t,r,s=null){let o=He.DEFAULT_BYTE_MODE_ENCODING;const a=s!==null&&s.get(ht.CHARACTER_SET)!==void 0;a&&(o=s.get(ht.CHARACTER_SET).toString());const u=this.chooseMode(t,o),d=new j;if(u===de.BYTE&&(a||He.DEFAULT_BYTE_MODE_ENCODING!==o)){const te=X.getCharacterSetECIByName(o);te!==void 0&&this.appendECI(te,d)}this.appendModeInfo(u,d);const h=new j;this.appendBytes(t,u,h,o);let x;if(s!==null&&s.get(ht.QR_VERSION)!==void 0){const te=Number.parseInt(s.get(ht.QR_VERSION).toString(),10);x=fe.getVersionForNumber(te);const J=this.calculateBitsNeeded(u,d,h,x);if(!this.willFit(J,x,r))throw new Fe("Data too big for requested version")}else x=this.recommendVersion(r,u,d,h);const w=new j;w.appendBitArray(d);const S=u===de.BYTE?h.getSizeInBytes():t.length;this.appendLengthInfo(S,x,u,w),w.appendBitArray(h);const N=x.getECBlocksForLevel(r),R=x.getTotalCodewords()-N.getTotalECCodewords();this.terminateBits(R,w);const P=this.interleaveWithECBytes(w,x.getTotalCodewords(),R,N.getNumBlocks()),B=new Br;B.setECLevel(r),B.setMode(u),B.setVersion(x);const U=x.getDimensionForVersion(),G=new xo(U,U),ee=this.chooseMaskPattern(P,r,x,G);return B.setMaskPattern(ee),xe.buildMatrix(P,r,x,ee,G),B.setMatrix(G),B}static recommendVersion(t,r,s,o){const a=this.calculateBitsNeeded(r,s,o,fe.getVersionForNumber(1)),u=this.chooseVersion(a,t),d=this.calculateBitsNeeded(r,s,o,u);return this.chooseVersion(d,t)}static calculateBitsNeeded(t,r,s,o){return r.getSize()+t.getCharacterCountBits(o)+s.getSize()}static getAlphanumericCode(t){return t<He.ALPHANUMERIC_TABLE.length?He.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,r=null){if(X.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(t))return de.KANJI;let s=!1,o=!1;for(let a=0,u=t.length;a<u;++a){const d=t.charAt(a);if(He.isDigit(d))s=!0;else if(this.getAlphanumericCode(d.charCodeAt(0))!==-1)o=!0;else return de.BYTE}return o?de.ALPHANUMERIC:s?de.NUMERIC:de.BYTE}static isOnlyDoubleByteKanji(t){let r;try{r=Se.encode(t,X.SJIS)}catch{return!1}const s=r.length;if(s%2!==0)return!1;for(let o=0;o<s;o+=2){const a=r[o]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0}static chooseMaskPattern(t,r,s,o){let a=Number.MAX_SAFE_INTEGER,u=-1;for(let d=0;d<Br.NUM_MASK_PATTERNS;d++){xe.buildMatrix(t,r,s,d,o);let h=this.calculateMaskPenalty(o);h<a&&(a=h,u=d)}return u}static chooseVersion(t,r){for(let s=1;s<=40;s++){const o=fe.getVersionForNumber(s);if(He.willFit(t,o,r))return o}throw new Fe("Data too big")}static willFit(t,r,s){const o=r.getTotalCodewords(),u=r.getECBlocksForLevel(s).getTotalECCodewords(),d=o-u,h=(t+7)/8;return d>=h}static terminateBits(t,r){const s=t*8;if(r.getSize()>s)throw new Fe("data bits cannot fit in the QR Code"+r.getSize()+" > "+s);for(let u=0;u<4&&r.getSize()<s;++u)r.appendBit(!1);const o=r.getSize()&7;if(o>0)for(let u=o;u<8;u++)r.appendBit(!1);const a=t-r.getSizeInBytes();for(let u=0;u<a;++u)r.appendBits(u&1?17:236,8);if(r.getSize()!==s)throw new Fe("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,r,s,o,a,u){if(o>=s)throw new Fe("Block ID too large");const d=t%s,h=s-d,x=Math.floor(t/s),w=x+1,S=Math.floor(r/s),N=S+1,R=x-S,P=w-N;if(R!==P)throw new Fe("EC bytes mismatch");if(s!==h+d)throw new Fe("RS blocks mismatch");if(t!==(S+R)*h+(N+P)*d)throw new Fe("Total bytes mismatch");o<h?(a[0]=S,u[0]=R):(a[0]=N,u[0]=P)}static interleaveWithECBytes(t,r,s,o){if(t.getSizeInBytes()!==s)throw new Fe("Number of bits and data bytes does not match");let a=0,u=0,d=0;const h=new Array;for(let w=0;w<o;++w){const S=new Int32Array(1),N=new Int32Array(1);He.getNumDataBytesAndNumECBytesForBlockID(r,s,o,w,S,N);const R=S[0],P=new Uint8Array(R);t.toBytes(8*a,P,0,R);const B=He.generateECBytes(P,N[0]);h.push(new Uh(P,B)),u=Math.max(u,R),d=Math.max(d,B.length),a+=S[0]}if(s!==a)throw new Fe("Data bytes does not match offset");const x=new j;for(let w=0;w<u;++w)for(const S of h){const N=S.getDataBytes();w<N.length&&x.appendBits(N[w],8)}for(let w=0;w<d;++w)for(const S of h){const N=S.getErrorCorrectionBytes();w<N.length&&x.appendBits(N[w],8)}if(r!==x.getSizeInBytes())throw new Fe("Interleaving error: "+r+" and "+x.getSizeInBytes()+" differ.");return x}static generateECBytes(t,r){const s=t.length,o=new Int32Array(s+r);for(let u=0;u<s;u++)o[u]=t[u]&255;new ta(Oe.QR_CODE_FIELD_256).encode(o,r);const a=new Uint8Array(r);for(let u=0;u<r;u++)a[u]=o[s+u];return a}static appendModeInfo(t,r){r.appendBits(t.getBits(),4)}static appendLengthInfo(t,r,s,o){const a=s.getCharacterCountBits(r);if(t>=1<<a)throw new Fe(t+" is bigger than "+((1<<a)-1));o.appendBits(t,a)}static appendBytes(t,r,s,o){switch(r){case de.NUMERIC:He.appendNumericBytes(t,s);break;case de.ALPHANUMERIC:He.appendAlphanumericBytes(t,s);break;case de.BYTE:He.append8BitBytes(t,s,o);break;case de.KANJI:He.appendKanjiBytes(t,s);break;default:throw new Fe("Invalid mode: "+r)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const r=He.getDigit(t);return r>=0&&r<=9}static appendNumericBytes(t,r){const s=t.length;let o=0;for(;o<s;){const a=He.getDigit(t.charAt(o));if(o+2<s){const u=He.getDigit(t.charAt(o+1)),d=He.getDigit(t.charAt(o+2));r.appendBits(a*100+u*10+d,10),o+=3}else if(o+1<s){const u=He.getDigit(t.charAt(o+1));r.appendBits(a*10+u,7),o+=2}else r.appendBits(a,4),o++}}static appendAlphanumericBytes(t,r){const s=t.length;let o=0;for(;o<s;){const a=He.getAlphanumericCode(t.charCodeAt(o));if(a===-1)throw new Fe;if(o+1<s){const u=He.getAlphanumericCode(t.charCodeAt(o+1));if(u===-1)throw new Fe;r.appendBits(a*45+u,11),o+=2}else r.appendBits(a,6),o++}}static append8BitBytes(t,r,s){let o;try{o=Se.encode(t,s)}catch(a){throw new Fe(a)}for(let a=0,u=o.length;a!==u;a++){const d=o[a];r.appendBits(d,8)}}static appendKanjiBytes(t,r){let s;try{s=Se.encode(t,X.SJIS)}catch(a){throw new Fe(a)}const o=s.length;for(let a=0;a<o;a+=2){const u=s[a]&255,d=s[a+1]&255,h=u<<8&4294967295|d;let x=-1;if(h>=33088&&h<=40956?x=h-33088:h>=57408&&h<=60351&&(x=h-49472),x===-1)throw new Fe("Invalid byte sequence");const w=(x>>8)*192+(x&255);r.appendBits(w,13)}}static appendECI(t,r){r.appendBits(de.ECI.getBits(),4),r.appendBits(t.getValue(),8)}}He.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),He.DEFAULT_BYTE_MODE_ENCODING=X.UTF8.getName();class Lr{write(t,r,s,o=null){if(t.length===0)throw new v("Found empty contents");if(r<0||s<0)throw new v("Requested dimensions are too small: "+r+"x"+s);let a=ze.L,u=Lr.QUIET_ZONE_SIZE;o!==null&&(o.get(ht.ERROR_CORRECTION)!==void 0&&(a=ze.fromString(o.get(ht.ERROR_CORRECTION).toString())),o.get(ht.MARGIN)!==void 0&&(u=Number.parseInt(o.get(ht.MARGIN).toString(),10)));const d=He.encode(t,a,o);return this.renderResult(d,r,s,u)}writeToDom(t,r,s,o,a=null){typeof t=="string"&&(t=document.querySelector(t));const u=this.write(r,s,o,a);t&&t.appendChild(u)}renderResult(t,r,s,o){const a=t.getMatrix();if(a===null)throw new bn;const u=a.getWidth(),d=a.getHeight(),h=u+o*2,x=d+o*2,w=Math.max(r,h),S=Math.max(s,x),N=Math.min(Math.floor(w/h),Math.floor(S/x)),R=Math.floor((w-u*N)/2),P=Math.floor((S-d*N)/2),B=this.createSVGElement(w,S);for(let U=0,G=P;U<d;U++,G+=N)for(let ee=0,te=R;ee<u;ee++,te+=N)if(a.get(ee,U)===1){const J=this.createSvgRectElement(te,G,N,N);B.appendChild(J)}return B}createSVGElement(t,r){const s=document.createElementNS(Lr.SVG_NS,"svg");return s.setAttributeNS(null,"height",t.toString()),s.setAttributeNS(null,"width",r.toString()),s}createSvgRectElement(t,r,s,o){const a=document.createElementNS(Lr.SVG_NS,"rect");return a.setAttributeNS(null,"x",t.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"height",s.toString()),a.setAttributeNS(null,"width",o.toString()),a.setAttributeNS(null,"fill","#000000"),a}}Lr.QUIET_ZONE_SIZE=4,Lr.SVG_NS="http://www.w3.org/2000/svg";class li{encode(t,r,s,o,a){if(t.length===0)throw new v("Found empty contents");if(r!==ce.QR_CODE)throw new v("Can only encode QR_CODE, but got "+r);if(s<0||o<0)throw new v(`Requested dimensions are too small: ${s}x${o}`);let u=ze.L,d=li.QUIET_ZONE_SIZE;a!==null&&(a.get(ht.ERROR_CORRECTION)!==void 0&&(u=ze.fromString(a.get(ht.ERROR_CORRECTION).toString())),a.get(ht.MARGIN)!==void 0&&(d=Number.parseInt(a.get(ht.MARGIN).toString(),10)));const h=He.encode(t,u,a);return li.renderResult(h,s,o,d)}static renderResult(t,r,s,o){const a=t.getMatrix();if(a===null)throw new bn;const u=a.getWidth(),d=a.getHeight(),h=u+o*2,x=d+o*2,w=Math.max(r,h),S=Math.max(s,x),N=Math.min(Math.floor(w/h),Math.floor(S/x)),R=Math.floor((w-u*N)/2),P=Math.floor((S-d*N)/2),B=new se(w,S);for(let U=0,G=P;U<d;U++,G+=N)for(let ee=0,te=R;ee<u;ee++,te+=N)a.get(ee,U)===1&&B.setRegion(te,G,N,N);return B}}li.QUIET_ZONE_SIZE=4;class zh{encode(t,r,s,o,a){let u;switch(r){case ce.QR_CODE:u=new li;break;default:throw new v("No encoder available for format "+r)}return u.encode(t,r,s,o,a)}}class On extends ie{constructor(t,r,s,o,a,u,d,h){if(super(u,d),this.yuvData=t,this.dataWidth=r,this.dataHeight=s,this.left=o,this.top=a,o+u>r||a+d>s)throw new v("Crop rectangle does not fit within image data.");h&&this.reverseHorizontal(u,d)}getRow(t,r){if(t<0||t>=this.getHeight())throw new v("Requested row is outside the image: "+t);const s=this.getWidth();(r==null||r.length<s)&&(r=new Uint8ClampedArray(s));const o=(t+this.top)*this.dataWidth+this.left;return k.arraycopy(this.yuvData,o,r,0,s),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;const s=t*r,o=new Uint8ClampedArray(s);let a=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return k.arraycopy(this.yuvData,a,o,0,s),o;for(let u=0;u<r;u++){const d=u*t;k.arraycopy(this.yuvData,a,o,d,t),a+=this.dataWidth}return o}isCropSupported(){return!0}crop(t,r,s,o){return new On(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,s,o,!1)}renderThumbnail(){const t=this.getWidth()/On.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/On.THUMBNAIL_SCALE_FACTOR,s=new Int32Array(t*r),o=this.yuvData;let a=this.top*this.dataWidth+this.left;for(let u=0;u<r;u++){const d=u*t;for(let h=0;h<t;h++){const x=o[a+h*On.THUMBNAIL_SCALE_FACTOR]&255;s[d+h]=4278190080|x*65793}a+=this.dataWidth*On.THUMBNAIL_SCALE_FACTOR}return s}getThumbnailWidth(){return this.getWidth()/On.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/On.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,r){const s=this.yuvData;for(let o=0,a=this.top*this.dataWidth+this.left;o<r;o++,a+=this.dataWidth){const u=a+t/2;for(let d=a,h=a+t-1;d<u;d++,h--){const x=s[d];s[d]=s[h],s[h]=x}}}invert(){return new ge(this)}}On.THUMBNAIL_SCALE_FACTOR=2;class na extends ie{constructor(t,r,s,o,a,u,d){if(super(r,s),this.dataWidth=o,this.dataHeight=a,this.left=u,this.top=d,t.BYTES_PER_ELEMENT===4){const h=r*s,x=new Uint8ClampedArray(h);for(let w=0;w<h;w++){const S=t[w],N=S>>16&255,R=S>>7&510,P=S&255;x[w]=(N+R+P)/4&255}this.luminances=x}else this.luminances=t;if(o===void 0&&(this.dataWidth=r),a===void 0&&(this.dataHeight=s),u===void 0&&(this.left=0),d===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+s>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(t,r){if(t<0||t>=this.getHeight())throw new v("Requested row is outside the image: "+t);const s=this.getWidth();(r==null||r.length<s)&&(r=new Uint8ClampedArray(s));const o=(t+this.top)*this.dataWidth+this.left;return k.arraycopy(this.luminances,o,r,0,s),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;const s=t*r,o=new Uint8ClampedArray(s);let a=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return k.arraycopy(this.luminances,a,o,0,s),o;for(let u=0;u<r;u++){const d=u*t;k.arraycopy(this.luminances,a,o,d,t),a+=this.dataWidth}return o}isCropSupported(){return!0}crop(t,r,s,o){return new na(this.luminances,s,o,this.dataWidth,this.dataHeight,this.left+t,this.top+r)}invert(){return new ge(this)}}class Wc extends X{static forName(t){return this.getCharacterSetECIByName(t)}}class ra{}ra.ISO_8859_1=X.ISO8859_1;class Gc{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class Xc{static singletonList(t){return[t]}static min(t,r){return t.sort(r)[0]}}class Vh{constructor(t){this.previous=t}getPrevious(){return this.previous}}class ai extends Vh{constructor(t,r,s){super(t),this.value=r,this.bitCount=s}appendTo(t,r){t.appendBits(this.value,this.bitCount)}add(t,r){return new ai(this,t,r)}addBinaryShift(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ai(this,t,r)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+T.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class ia extends ai{constructor(t,r,s){super(t,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=s}appendTo(t,r){for(let s=0;s<this.binaryShiftByteCount;s++)(s===0||s===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):s===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+s],8)}addBinaryShift(t,r){return new ia(this,t,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Hh(A,t,r){return new ia(A,t,r)}function ns(A,t,r){return new ai(A,t,r)}const Wh=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ar=0,go=1,cn=2,Yc=3,Mn=4,Gh=new ai(null,0,0),sa=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Xh(A){for(let t of A)b.fill(t,-1);return A[ar][Mn]=0,A[go][Mn]=0,A[go][ar]=28,A[Yc][Mn]=0,A[cn][Mn]=0,A[cn][ar]=15,A}const Zc=Xh(b.createInt32Array(6,6));class Dn{constructor(t,r,s,o){this.token=t,this.mode=r,this.binaryShiftByteCount=s,this.bitCount=o}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,r){let s=this.bitCount,o=this.token;if(t!==this.mode){let u=sa[this.mode][t];o=ns(o,u&65535,u>>16),s+=u>>16}let a=t===cn?4:5;return o=ns(o,r,a),new Dn(o,t,0,s+a)}shiftAndAppend(t,r){let s=this.token,o=this.mode===cn?4:5;return s=ns(s,Zc[this.mode][t],o),s=ns(s,r,5),new Dn(s,this.mode,0,this.bitCount+o+5)}addBinaryShiftChar(t){let r=this.token,s=this.mode,o=this.bitCount;if(this.mode===Mn||this.mode===cn){let d=sa[s][ar];r=ns(r,d&65535,d>>16),o+=d>>16,s=ar}let a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,u=new Dn(r,s,this.binaryShiftByteCount+1,o+a);return u.binaryShiftByteCount===2078&&(u=u.endBinaryShift(t+1)),u}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=Hh(r,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new Dn(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let r=this.bitCount+(sa[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?r+=Dn.calculateBinaryShiftCost(t)-Dn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(r+=10),r<=t.bitCount}toBitArray(t){let r=[];for(let o=this.endBinaryShift(t.length).token;o!==null;o=o.getPrevious())r.unshift(o);let s=new j;for(const o of r)o.appendTo(s,t);return s}toString(){return re.format("%s bits=%d bytes=%d",Wh[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}Dn.INITIAL_STATE=new Dn(Gh,ar,0,0);function Yh(A){const t=re.getCharCode(" "),r=re.getCharCode("."),s=re.getCharCode(",");A[ar][t]=1;const o=re.getCharCode("Z"),a=re.getCharCode("A");for(let N=a;N<=o;N++)A[ar][N]=N-a+2;A[go][t]=1;const u=re.getCharCode("z"),d=re.getCharCode("a");for(let N=d;N<=u;N++)A[go][N]=N-d+2;A[cn][t]=1;const h=re.getCharCode("9"),x=re.getCharCode("0");for(let N=x;N<=h;N++)A[cn][N]=N-x+2;A[cn][s]=12,A[cn][r]=13;const w=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let N=0;N<w.length;N++)A[Yc][re.getCharCode(w[N])]=N;const S=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let N=0;N<S.length;N++)re.getCharCode(S[N])>0&&(A[Mn][re.getCharCode(S[N])]=N);return A}const oa=Yh(b.createInt32Array(5,256));class rs{constructor(t){this.text=t}encode(){const t=re.getCharCode(" "),r=re.getCharCode(`
`);let s=Xc.singletonList(Dn.INITIAL_STATE);for(let a=0;a<this.text.length;a++){let u,d=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case re.getCharCode("\r"):u=d===r?2:0;break;case re.getCharCode("."):u=d===t?3:0;break;case re.getCharCode(","):u=d===t?4:0;break;case re.getCharCode(":"):u=d===t?5:0;break;default:u=0}u>0?(s=rs.updateStateListForPair(s,a,u),a++):s=this.updateStateListForChar(s,a)}return Xc.min(s,(a,u)=>a.getBitCount()-u.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,r){const s=[];for(let o of t)this.updateStateForChar(o,r,s);return rs.simplifyStates(s)}updateStateForChar(t,r,s){let o=this.text[r]&255,a=oa[t.getMode()][o]>0,u=null;for(let d=0;d<=Mn;d++){let h=oa[d][o];if(h>0){if(u==null&&(u=t.endBinaryShift(r)),!a||d===t.getMode()||d===cn){const x=u.latchAndAppend(d,h);s.push(x)}if(!a&&Zc[t.getMode()][d]>=0){const x=u.shiftAndAppend(d,h);s.push(x)}}}if(t.getBinaryShiftByteCount()>0||oa[t.getMode()][o]===0){let d=t.addBinaryShiftChar(r);s.push(d)}}static updateStateListForPair(t,r,s){const o=[];for(let a of t)this.updateStateForPair(a,r,s,o);return this.simplifyStates(o)}static updateStateForPair(t,r,s,o){let a=t.endBinaryShift(r);if(o.push(a.latchAndAppend(Mn,s)),t.getMode()!==Mn&&o.push(a.shiftAndAppend(Mn,s)),s===3||s===4){let u=a.latchAndAppend(cn,16-s).latchAndAppend(cn,1);o.push(u)}if(t.getBinaryShiftByteCount()>0){let u=t.addBinaryShiftChar(r).addBinaryShiftChar(r+1);o.push(u)}}static simplifyStates(t){let r=[];for(const s of t){let o=!0;for(const a of r){if(a.isBetterThanOrEqualTo(s)){o=!1;break}s.isBetterThanOrEqualTo(a)&&(r=r.filter(u=>u!==a))}o&&r.push(s)}return r}}class Te{constructor(){}static encodeBytes(t){return Te.encode(t,Te.DEFAULT_EC_PERCENT,Te.DEFAULT_AZTEC_LAYERS)}static encode(t,r,s){let o=new rs(t).encode(),a=T.truncDivision(o.getSize()*r,100)+11,u=o.getSize()+a,d,h,x,w,S;if(s!==Te.DEFAULT_AZTEC_LAYERS){if(d=s<0,h=Math.abs(s),h>(d?Te.MAX_NB_BITS_COMPACT:Te.MAX_NB_BITS))throw new v(re.format("Illegal value %s for layers",s));x=Te.totalBitsInLayer(h,d),w=Te.WORD_SIZE[h];let J=x-x%w;if(S=Te.stuffBits(o,w),S.getSize()+a>J)throw new v("Data to large for user specified layer");if(d&&S.getSize()>w*64)throw new v("Data to large for user specified layer")}else{w=0,S=null;for(let J=0;;J++){if(J>Te.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(d=J<=3,h=d?J+1:J,x=Te.totalBitsInLayer(h,d),u>x)continue;(S==null||w!==Te.WORD_SIZE[h])&&(w=Te.WORD_SIZE[h],S=Te.stuffBits(o,w));let Ae=x-x%w;if(!(d&&S.getSize()>w*64)&&S.getSize()+a<=Ae)break}}let N=Te.generateCheckWords(S,x,w),R=S.getSize()/w,P=Te.generateModeMessage(d,h,R),B=(d?11:14)+h*4,U=new Int32Array(B),G;if(d){G=B;for(let J=0;J<U.length;J++)U[J]=J}else{G=B+1+2*T.truncDivision(T.truncDivision(B,2)-1,15);let J=T.truncDivision(B,2),Ae=T.truncDivision(G,2);for(let ye=0;ye<J;ye++){let Wt=ye+T.truncDivision(ye,15);U[J-ye-1]=Ae-Wt-1,U[J+ye]=Ae+Wt+1}}let ee=new se(G);for(let J=0,Ae=0;J<h;J++){let ye=(h-J)*4+(d?9:12);for(let Wt=0;Wt<ye;Wt++){let yn=Wt*2;for(let Gt=0;Gt<2;Gt++)N.get(Ae+yn+Gt)&&ee.set(U[J*2+Gt],U[J*2+Wt]),N.get(Ae+ye*2+yn+Gt)&&ee.set(U[J*2+Wt],U[B-1-J*2-Gt]),N.get(Ae+ye*4+yn+Gt)&&ee.set(U[B-1-J*2-Gt],U[B-1-J*2-Wt]),N.get(Ae+ye*6+yn+Gt)&&ee.set(U[B-1-J*2-Wt],U[J*2+Gt])}Ae+=ye*8}if(Te.drawModeMessage(ee,d,G,P),d)Te.drawBullsEye(ee,T.truncDivision(G,2),5);else{Te.drawBullsEye(ee,T.truncDivision(G,2),7);for(let J=0,Ae=0;J<T.truncDivision(B,2)-1;J+=15,Ae+=16)for(let ye=T.truncDivision(G,2)&1;ye<G;ye+=2)ee.set(T.truncDivision(G,2)-Ae,ye),ee.set(T.truncDivision(G,2)+Ae,ye),ee.set(ye,T.truncDivision(G,2)-Ae),ee.set(ye,T.truncDivision(G,2)+Ae)}let te=new Gc;return te.setCompact(d),te.setSize(G),te.setLayers(h),te.setCodeWords(R),te.setMatrix(ee),te}static drawBullsEye(t,r,s){for(let o=0;o<s;o+=2)for(let a=r-o;a<=r+o;a++)t.set(a,r-o),t.set(a,r+o),t.set(r-o,a),t.set(r+o,a);t.set(r-s,r-s),t.set(r-s+1,r-s),t.set(r-s,r-s+1),t.set(r+s,r-s),t.set(r+s,r-s+1),t.set(r+s,r+s-1)}static generateModeMessage(t,r,s){let o=new j;return t?(o.appendBits(r-1,2),o.appendBits(s-1,6),o=Te.generateCheckWords(o,28,4)):(o.appendBits(r-1,5),o.appendBits(s-1,11),o=Te.generateCheckWords(o,40,4)),o}static drawModeMessage(t,r,s,o){let a=T.truncDivision(s,2);if(r)for(let u=0;u<7;u++){let d=a-3+u;o.get(u)&&t.set(d,a-5),o.get(u+7)&&t.set(a+5,d),o.get(20-u)&&t.set(d,a+5),o.get(27-u)&&t.set(a-5,d)}else for(let u=0;u<10;u++){let d=a-5+u+T.truncDivision(u,5);o.get(u)&&t.set(d,a-7),o.get(u+10)&&t.set(a+7,d),o.get(29-u)&&t.set(d,a+7),o.get(39-u)&&t.set(a-7,d)}}static generateCheckWords(t,r,s){let o=t.getSize()/s,a=new ta(Te.getGF(s)),u=T.truncDivision(r,s),d=Te.bitsToWords(t,s,u);a.encode(d,u-o);let h=r%s,x=new j;x.appendBits(0,h);for(const w of Array.from(d))x.appendBits(w,s);return x}static bitsToWords(t,r,s){let o=new Int32Array(s),a,u;for(a=0,u=t.getSize()/r;a<u;a++){let d=0;for(let h=0;h<r;h++)d|=t.get(a*r+h)?1<<r-h-1:0;o[a]=d}return o}static getGF(t){switch(t){case 4:return Oe.AZTEC_PARAM;case 6:return Oe.AZTEC_DATA_6;case 8:return Oe.AZTEC_DATA_8;case 10:return Oe.AZTEC_DATA_10;case 12:return Oe.AZTEC_DATA_12;default:throw new v("Unsupported word size "+t)}}static stuffBits(t,r){let s=new j,o=t.getSize(),a=(1<<r)-2;for(let u=0;u<o;u+=r){let d=0;for(let h=0;h<r;h++)(u+h>=o||t.get(u+h))&&(d|=1<<r-1-h);(d&a)===a?(s.appendBits(d&a,r),u--):d&a?s.appendBits(d,r):(s.appendBits(d|1,r),u--)}return s}static totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}Te.DEFAULT_EC_PERCENT=33,Te.DEFAULT_AZTEC_LAYERS=0,Te.MAX_NB_BITS=32,Te.MAX_NB_BITS_COMPACT=4,Te.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class po{encode(t,r,s,o){return this.encodeWithHints(t,r,s,o,null)}encodeWithHints(t,r,s,o,a){let u=ra.ISO_8859_1,d=Te.DEFAULT_EC_PERCENT,h=Te.DEFAULT_AZTEC_LAYERS;return a!=null&&(a.has(ht.CHARACTER_SET)&&(u=Wc.forName(a.get(ht.CHARACTER_SET).toString())),a.has(ht.ERROR_CORRECTION)&&(d=T.parseInt(a.get(ht.ERROR_CORRECTION).toString())),a.has(ht.AZTEC_LAYERS)&&(h=T.parseInt(a.get(ht.AZTEC_LAYERS).toString()))),po.encodeLayers(t,r,s,o,u,d,h)}static encodeLayers(t,r,s,o,a,u,d){if(r!==ce.AZTEC)throw new v("Can only encode AZTEC, but got "+r);let h=Te.encode(re.getBytes(t,a),u,d);return po.renderResult(h,s,o)}static renderResult(t,r,s){let o=t.getMatrix();if(o==null)throw new bn;let a=o.getWidth(),u=o.getHeight(),d=Math.max(r,a),h=Math.max(s,u),x=Math.min(d/a,h/u),w=(d-a*x)/2,S=(h-u*x)/2,N=new se(d,h);for(let R=0,P=S;R<u;R++,P+=x)for(let B=0,U=w;B<a;B++,U+=x)o.get(B,R)&&N.setRegion(U,P,x,x);return N}}i.AbstractExpandedDecoder=Gl,i.ArgumentException=C,i.ArithmeticException=ro,i.AztecCode=Gc,i.AztecCodeReader=oo,i.AztecCodeWriter=po,i.AztecDecoder=Ue,i.AztecDetector=Oc,i.AztecDetectorResult=Tc,i.AztecEncoder=Te,i.AztecHighLevelEncoder=rs,i.AztecPoint=kt,i.BarcodeFormat=ce,i.Binarizer=D,i.BinaryBitmap=I,i.BitArray=j,i.BitMatrix=se,i.BitSource=Ql,i.BrowserAztecCodeReader=yh,i.BrowserBarcodeReader=Sh,i.BrowserCodeReader=on,i.BrowserDatamatrixCodeReader=Ih,i.BrowserMultiFormatReader=Lh,i.BrowserPDF417Reader=Fh,i.BrowserQRCodeReader=jh,i.BrowserQRCodeSvgWriter=Lr,i.CharacterSetECI=X,i.ChecksumException=O,i.Code128Reader=ne,i.Code39Reader=ft,i.DataMatrixDecodedBitStreamParser=ir,i.DataMatrixReader=sr,i.DecodeHintType=z,i.DecoderResult=Xi,i.DefaultGridSampler=Rc,i.DetectorResult=so,i.EAN13Reader=Mr,i.EncodeHintType=ht,i.Exception=p,i.FormatException=L,i.GenericGF=Oe,i.GenericGFPoly=Ut,i.GlobalHistogramBinarizer=Ne,i.GridSampler=zl,i.GridSamplerInstance=nr,i.HTMLCanvasElementLuminanceSource=we,i.HybridBinarizer=me,i.ITFReader=Le,i.IllegalArgumentException=v,i.IllegalStateException=bn,i.InvertedLuminanceSource=ge,i.LuminanceSource=ie,i.MathUtils=_e,i.MultiFormatOneDReader=si,i.MultiFormatReader=Hc,i.MultiFormatWriter=zh,i.NotFoundException=H,i.OneDReader=at,i.PDF417DecodedBitStreamParser=W,i.PDF417DecoderErrorCorrection=Lc,i.PDF417Reader=At,i.PDF417ResultMetadata=jc,i.PerspectiveTransform=mn,i.PlanarYUVLuminanceSource=On,i.QRCodeByteMatrix=xo,i.QRCodeDataMask=an,i.QRCodeDecodedBitStreamParser=Ke,i.QRCodeDecoderErrorCorrectionLevel=ze,i.QRCodeDecoderFormatInformation=Tt,i.QRCodeEncoder=He,i.QRCodeEncoderQRCode=Br,i.QRCodeMaskUtil=rt,i.QRCodeMatrixUtil=xe,i.QRCodeMode=de,i.QRCodeReader=or,i.QRCodeVersion=fe,i.QRCodeWriter=li,i.RGBLuminanceSource=na,i.RSS14Reader=nt,i.RSSExpandedReader=Z,i.ReaderException=ho,i.ReedSolomonDecoder=Zi,i.ReedSolomonEncoder=ta,i.ReedSolomonException=ti,i.Result=Qe,i.ResultMetadataType=pt,i.ResultPoint=ue,i.StringUtils=re,i.UnsupportedOperationException=he,i.VideoInputDevice=Xe,i.WhiteRectangleDetector=zn,i.WriterException=Fe,i.ZXingArrays=b,i.ZXingCharset=Wc,i.ZXingInteger=T,i.ZXingStandardCharsets=ra,i.ZXingStringBuilder=K,i.ZXingStringEncoding=Se,i.ZXingSystem=k,i.createAbstractExpandedDecoder=Pc,Object.defineProperty(i,"__esModule",{value:!0})})})(Ou,Ou.exports);var qe=Ou.exports;const Tm=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var A0=function(){function e(n,i,l){if(this.formatMap=new Map([[le.QR_CODE,qe.BarcodeFormat.QR_CODE],[le.AZTEC,qe.BarcodeFormat.AZTEC],[le.CODABAR,qe.BarcodeFormat.CODABAR],[le.CODE_39,qe.BarcodeFormat.CODE_39],[le.CODE_93,qe.BarcodeFormat.CODE_93],[le.CODE_128,qe.BarcodeFormat.CODE_128],[le.DATA_MATRIX,qe.BarcodeFormat.DATA_MATRIX],[le.MAXICODE,qe.BarcodeFormat.MAXICODE],[le.ITF,qe.BarcodeFormat.ITF],[le.EAN_13,qe.BarcodeFormat.EAN_13],[le.EAN_8,qe.BarcodeFormat.EAN_8],[le.PDF_417,qe.BarcodeFormat.PDF_417],[le.RSS_14,qe.BarcodeFormat.RSS_14],[le.RSS_EXPANDED,qe.BarcodeFormat.RSS_EXPANDED],[le.UPC_A,qe.BarcodeFormat.UPC_A],[le.UPC_E,qe.BarcodeFormat.UPC_E],[le.UPC_EAN_EXTENSION,qe.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Tm)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=i,this.logger=l;var c=this.createZXingFormats(n),f=new Map;f.set(qe.DecodeHintType.POSSIBLE_FORMATS,c),f.set(qe.DecodeHintType.TRY_HARDER,!1),this.hints=f}return e.prototype.decodeAsync=function(n){var i=this;return new Promise(function(l,c){try{l(i.decode(n))}catch(f){c(f)}})},e.prototype.decode=function(n){var i=new qe.MultiFormatReader(this.verbose,this.hints),l=new qe.HTMLCanvasElementLuminanceSource(n),c=new qe.BinaryBitmap(new qe.HybridBinarizer(l)),f=i.decode(c);return{text:f.text,format:ph.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(i,l,c){n.set(i,l)}),n},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createZXingFormats=function(n){for(var i=[],l=0,c=n;l<c.length;l++){var f=c[l];this.formatMap.has(f)?i.push(this.formatMap.get(f)):this.logger.logError("".concat(f," is not supported by")+"ZXingHtml5QrcodeShim")}return i},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),Rm=function(e,n,i,l){function c(f){return f instanceof i?f:new i(function(g){g(f)})}return new(i||(i=Promise))(function(f,g){function y(C){try{p(l.next(C))}catch(v){g(v)}}function m(C){try{p(l.throw(C))}catch(v){g(v)}}function p(C){C.done?f(C.value):c(C.value).then(y,m)}p((l=l.apply(e,n||[])).next())})},Om=function(e,n){var i={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,c,f,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(p){return function(C){return m([p,C])}}function m(p){if(l)throw new TypeError("Generator is already executing.");for(;g&&(g=0,p[0]&&(i=0)),i;)try{if(l=1,c&&(f=p[0]&2?c.return:p[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,p[1])).done)return f;switch(c=0,f&&(p=[p[0]&2,f.value]),p[0]){case 0:case 1:f=p;break;case 4:return i.label++,{value:p[1],done:!1};case 5:i.label++,c=p[1],p=[0];continue;case 7:p=i.ops.pop(),i.trys.pop();continue;default:if(f=i.trys,!(f=f.length>0&&f[f.length-1])&&(p[0]===6||p[0]===2)){i=0;continue}if(p[0]===3&&(!f||p[1]>f[0]&&p[1]<f[3])){i.label=p[1];break}if(p[0]===6&&i.label<f[1]){i.label=f[1],f=p;break}if(f&&i.label<f[2]){i.label=f[2],i.ops.push(p);break}f[2]&&i.ops.pop(),i.trys.pop();continue}p=n.call(e,i)}catch(C){p=[6,C],c=0}finally{l=f=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},S0=function(){function e(n,i,l){if(this.formatMap=new Map([[le.QR_CODE,"qr_code"],[le.AZTEC,"aztec"],[le.CODABAR,"codabar"],[le.CODE_39,"code_39"],[le.CODE_93,"code_93"],[le.CODE_128,"code_128"],[le.DATA_MATRIX,"data_matrix"],[le.ITF,"itf"],[le.EAN_13,"ean_13"],[le.EAN_8,"ean_8"],[le.PDF_417,"pdf417"],[le.UPC_A,"upc_a"],[le.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=i,this.logger=l;var c=this.createBarcodeDetectorFormats(n);if(this.detector=new BarcodeDetector(c),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var n=new BarcodeDetector({formats:["qr_code"]});return typeof n<"u"},e.prototype.decodeAsync=function(n){return Rm(this,void 0,void 0,function(){var i,l;return Om(this,function(c){switch(c.label){case 0:return[4,this.detector.detect(n)];case 1:if(i=c.sent(),!i||i.length===0)throw"No barcode or QR code detected.";return l=this.selectLargestBarcode(i),[2,{text:l.rawValue,format:ph.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(n){for(var i=null,l=0,c=0,f=n;c<f.length;c++){var g=f[c],y=g.boundingBox.width*g.boundingBox.height;y>l&&(l=y,i=g)}if(!i)throw"No largest barcode found";return i},e.prototype.createBarcodeDetectorFormats=function(n){for(var i=[],l=0,c=n;l<c.length;l++){var f=c[l];this.formatMap.has(f)?i.push(this.formatMap.get(f)):this.logger.warn("".concat(f," is not supported by")+"BarcodeDetectorDelegate")}return{formats:i}},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(i,l,c){n.set(i,l)}),n},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),N0=function(e,n,i,l){function c(f){return f instanceof i?f:new i(function(g){g(f)})}return new(i||(i=Promise))(function(f,g){function y(C){try{p(l.next(C))}catch(v){g(v)}}function m(C){try{p(l.throw(C))}catch(v){g(v)}}function p(C){C.done?f(C.value):c(C.value).then(y,m)}p((l=l.apply(e,n||[])).next())})},I0=function(e,n){var i={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,c,f,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(p){return function(C){return m([p,C])}}function m(p){if(l)throw new TypeError("Generator is already executing.");for(;g&&(g=0,p[0]&&(i=0)),i;)try{if(l=1,c&&(f=p[0]&2?c.return:p[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,p[1])).done)return f;switch(c=0,f&&(p=[p[0]&2,f.value]),p[0]){case 0:case 1:f=p;break;case 4:return i.label++,{value:p[1],done:!1};case 5:i.label++,c=p[1],p=[0];continue;case 7:p=i.ops.pop(),i.trys.pop();continue;default:if(f=i.trys,!(f=f.length>0&&f[f.length-1])&&(p[0]===6||p[0]===2)){i=0;continue}if(p[0]===3&&(!f||p[1]>f[0]&&p[1]<f[3])){i.label=p[1];break}if(p[0]===6&&i.label<f[1]){i.label=f[1],f=p;break}if(f&&i.label<f[2]){i.label=f[2],i.ops.push(p);break}f[2]&&i.ops.pop(),i.trys.pop();continue}p=n.call(e,i)}catch(C){p=[6,C],c=0}finally{l=f=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Mm=function(){function e(n,i,l,c){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=l,i&&S0.isSupported()?(this.primaryDecoder=new S0(n,l,c),this.secondaryDecoder=new A0(n,l,c)):this.primaryDecoder=new A0(n,l,c)}return e.prototype.decodeAsync=function(n){return N0(this,void 0,void 0,function(){var i;return I0(this,function(l){switch(l.label){case 0:i=performance.now(),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(n)];case 2:return[2,l.sent()];case 3:return this.possiblyLogPerformance(i),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(n){return N0(this,void 0,void 0,function(){var i,l;return I0(this,function(c){switch(c.label){case 0:i=performance.now(),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(n)];case 2:return[2,c.sent()];case 3:if(l=c.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(n)];throw l;case 4:return this.possiblyLogPerformance(i),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(n){if(this.verbose){var i=performance.now()-n;this.executionResults.push(i),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var n=0,i=0,l=this.executionResults;i<l.length;i++){var c=l[i];n+=c}var f=n/this.executionResults.length;console.log("".concat(f," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),_c=function(){var e=function(n,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},e(n,i)};return function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function l(){this.constructor=n}n.prototype=i===null?Object.create(i):(l.prototype=i.prototype,new l)}}(),yl=function(e,n,i,l){function c(f){return f instanceof i?f:new i(function(g){g(f)})}return new(i||(i=Promise))(function(f,g){function y(C){try{p(l.next(C))}catch(v){g(v)}}function m(C){try{p(l.throw(C))}catch(v){g(v)}}function p(C){C.done?f(C.value):c(C.value).then(y,m)}p((l=l.apply(e,n||[])).next())})},El=function(e,n){var i={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,c,f,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(p){return function(C){return m([p,C])}}function m(p){if(l)throw new TypeError("Generator is already executing.");for(;g&&(g=0,p[0]&&(i=0)),i;)try{if(l=1,c&&(f=p[0]&2?c.return:p[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,p[1])).done)return f;switch(c=0,f&&(p=[p[0]&2,f.value]),p[0]){case 0:case 1:f=p;break;case 4:return i.label++,{value:p[1],done:!1};case 5:i.label++,c=p[1],p=[0];continue;case 7:p=i.ops.pop(),i.trys.pop();continue;default:if(f=i.trys,!(f=f.length>0&&f[f.length-1])&&(p[0]===6||p[0]===2)){i=0;continue}if(p[0]===3&&(!f||p[1]>f[0]&&p[1]<f[3])){i.label=p[1];break}if(p[0]===6&&i.label<f[1]){i.label=f[1],f=p;break}if(f&&i.label<f[2]){i.label=f[2],i.ops.push(p);break}f[2]&&i.ops.pop(),i.trys.pop();continue}p=n.call(e,i)}catch(C){p=[6,C],c=0}finally{l=f=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},wh=function(){function e(n,i){this.name=n,this.track=i}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(n){var i={};i[this.name]=n;var l={advanced:[i]};return this.track.applyConstraints(l)},e.prototype.value=function(){var n=this.track.getSettings();if(this.name in n){var i=n[this.name];return i}return null},e}(),Dm=function(e){_c(n,e);function n(i,l){return e.call(this,i,l)||this}return n.prototype.min=function(){return this.getCapabilities().min},n.prototype.max=function(){return this.getCapabilities().max},n.prototype.step=function(){return this.getCapabilities().step},n.prototype.apply=function(i){var l={};l[this.name]=i;var c={advanced:[l]};return this.track.applyConstraints(c)},n.prototype.getCapabilities=function(){this.failIfNotSupported();var i=this.track.getCapabilities(),l=i[this.name];return{min:l.min,max:l.max,step:l.step}},n.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},n}(wh),km=function(e){_c(n,e);function n(i){return e.call(this,"zoom",i)||this}return n}(Dm),Pm=function(e){_c(n,e);function n(i){return e.call(this,"torch",i)||this}return n}(wh),Bm=function(){function e(n){this.track=n}return e.prototype.zoomFeature=function(){return new km(this.track)},e.prototype.torchFeature=function(){return new Pm(this.track)},e}(),Lm=function(){function e(n,i,l){this.isClosed=!1,this.parentElement=n,this.mediaStream=i,this.callbacks=l,this.surface=this.createVideoElement(this.parentElement.clientWidth),n.append(this.surface)}return e.prototype.createVideoElement=function(n){var i=document.createElement("video");return i.style.width="".concat(n,"px"),i.style.display="block",i.muted=!0,i.setAttribute("muted","true"),i.playsInline=!0,i},e.prototype.setupSurface=function(){var n=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var i=function(){var l=n.surface.clientWidth,c=n.surface.clientHeight;n.callbacks.onRenderSurfaceReady(l,c),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(n,i,l,c){return yl(this,void 0,void 0,function(){var f,g;return El(this,function(y){switch(y.label){case 0:return f=new e(n,i,c),l.aspectRatio?(g={aspectRatio:l.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(g)]):[3,2];case 1:y.sent(),y.label=2;case 2:return f.setupSurface(),[2,f]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(n){this.failIfClosed();var i=this,l=function(){setTimeout(n,200),i.surface.removeEventListener("playing",l)};this.surface.addEventListener("playing",l),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(n){return yl(this,void 0,void 0,function(){return El(this,function(i){if("aspectRatio"in n)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(n)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var n=this;return new Promise(function(i,l){var c=n.mediaStream.getVideoTracks(),f=c.length,g=0;n.mediaStream.getVideoTracks().forEach(function(y){n.mediaStream.removeTrack(y),y.stop(),++g,g>=f&&(n.isClosed=!0,n.parentElement.removeChild(n.surface),i())})})},e.prototype.getCapabilities=function(){return new Bm(this.getFirstTrackOrFail())},e}(),Fm=function(){function e(n){this.mediaStream=n}return e.prototype.render=function(n,i,l){return yl(this,void 0,void 0,function(){return El(this,function(c){return[2,Lm.create(n,this.mediaStream,i,l)]})})},e.create=function(n){return yl(this,void 0,void 0,function(){var i,l;return El(this,function(c){switch(c.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return i={audio:!1,video:n},[4,navigator.mediaDevices.getUserMedia(i)];case 1:return l=c.sent(),[2,new e(l)]}})})},e}(),b0=function(e,n,i,l){function c(f){return f instanceof i?f:new i(function(g){g(f)})}return new(i||(i=Promise))(function(f,g){function y(C){try{p(l.next(C))}catch(v){g(v)}}function m(C){try{p(l.throw(C))}catch(v){g(v)}}function p(C){C.done?f(C.value):c(C.value).then(y,m)}p((l=l.apply(e,n||[])).next())})},_0=function(e,n){var i={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,c,f,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(p){return function(C){return m([p,C])}}function m(p){if(l)throw new TypeError("Generator is already executing.");for(;g&&(g=0,p[0]&&(i=0)),i;)try{if(l=1,c&&(f=p[0]&2?c.return:p[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,p[1])).done)return f;switch(c=0,f&&(p=[p[0]&2,f.value]),p[0]){case 0:case 1:f=p;break;case 4:return i.label++,{value:p[1],done:!1};case 5:i.label++,c=p[1],p=[0];continue;case 7:p=i.ops.pop(),i.trys.pop();continue;default:if(f=i.trys,!(f=f.length>0&&f[f.length-1])&&(p[0]===6||p[0]===2)){i=0;continue}if(p[0]===3&&(!f||p[1]>f[0]&&p[1]<f[3])){i.label=p[1];break}if(p[0]===6&&i.label<f[1]){i.label=f[1],f=p;break}if(f&&i.label<f[2]){i.label=f[2],i.ops.push(p);break}f[2]&&i.ops.pop(),i.trys.pop();continue}p=n.call(e,i)}catch(C){p=[6,C],c=0}finally{l=f=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},jm=function(){function e(){}return e.failIfNotSupported=function(){return b0(this,void 0,void 0,function(){return _0(this,function(n){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(n){return b0(this,void 0,void 0,function(){return _0(this,function(i){return[2,Fm.create(n)]})})},e}(),Um=function(e,n,i,l){function c(f){return f instanceof i?f:new i(function(g){g(f)})}return new(i||(i=Promise))(function(f,g){function y(C){try{p(l.next(C))}catch(v){g(v)}}function m(C){try{p(l.throw(C))}catch(v){g(v)}}function p(C){C.done?f(C.value):c(C.value).then(y,m)}p((l=l.apply(e,n||[])).next())})},zm=function(e,n){var i={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,c,f,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(p){return function(C){return m([p,C])}}function m(p){if(l)throw new TypeError("Generator is already executing.");for(;g&&(g=0,p[0]&&(i=0)),i;)try{if(l=1,c&&(f=p[0]&2?c.return:p[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,p[1])).done)return f;switch(c=0,f&&(p=[p[0]&2,f.value]),p[0]){case 0:case 1:f=p;break;case 4:return i.label++,{value:p[1],done:!1};case 5:i.label++,c=p[1],p=[0];continue;case 7:p=i.ops.pop(),i.trys.pop();continue;default:if(f=i.trys,!(f=f.length>0&&f[f.length-1])&&(p[0]===6||p[0]===2)){i=0;continue}if(p[0]===3&&(!f||p[1]>f[0]&&p[1]<f[3])){i.label=p[1];break}if(p[0]===6&&i.label<f[1]){i.label=f[1],f=p;break}if(f&&i.label<f[2]){i.label=f[2],i.ops.push(p);break}f[2]&&i.ops.pop(),i.trys.pop();continue}p=n.call(e,i)}catch(C){p=[6,C],c=0}finally{l=f=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Vm=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var n=MediaStreamTrack;return MediaStreamTrack&&n.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var n=Si.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(n=Si.insecureContextCameraQueryError()),Promise.reject(n)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var n=location.host.split(":")[0];return n==="127.0.0.1"||n==="localhost"},e.getCamerasFromMediaDevices=function(){return Um(this,void 0,void 0,function(){var n,i,l,c,f,g,y;return zm(this,function(m){switch(m.label){case 0:return n=function(p){for(var C=p.getVideoTracks(),v=0,I=C;v<I.length;v++){var O=I[v];O.enabled=!1,O.stop(),p.removeTrack(O)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return i=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(l=m.sent(),c=[],f=0,g=l;f<g.length;f++)y=g[f],y.kind==="videoinput"&&c.push({id:y.deviceId,label:y.label});return n(i),[2,c]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(n,i){var l=function(f){for(var g=[],y=0,m=f;y<m.length;y++){var p=m[y];p.kind==="video"&&g.push({id:p.id,label:p.label})}n(g)},c=MediaStreamTrack;c.getSources(l)})},e}(),it;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(it||(it={}));var Hm=function(){function e(){this.state=it.NOT_STARTED,this.onGoingTransactionNewState=it.UNKNOWN}return e.prototype.directTransition=function(n){this.failIfTransitionOngoing(),this.validateTransition(n),this.state=n},e.prototype.startTransition=function(n){return this.failIfTransitionOngoing(),this.validateTransition(n),this.onGoingTransactionNewState=n,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===it.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var n=this.onGoingTransactionNewState;this.onGoingTransactionNewState=it.UNKNOWN,this.directTransition(n)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===it.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=it.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==it.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(n){switch(this.state){case it.UNKNOWN:throw"Transition from unknown is not allowed";case it.NOT_STARTED:this.failIfNewStateIs(n,[it.PAUSED]);break;case it.SCANNING:break;case it.PAUSED:break}},e.prototype.failIfNewStateIs=function(n,i){for(var l=0,c=i;l<c.length;l++){var f=c[l];if(n===f)throw"Cannot transition from ".concat(this.state," to ").concat(n)}},e}(),Wm=function(){function e(n){this.stateManager=n}return e.prototype.startTransition=function(n){return this.stateManager.startTransition(n)},e.prototype.directTransition=function(n){this.stateManager.directTransition(n)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===it.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==it.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===it.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===it.PAUSED},e}(),Gm=function(){function e(){}return e.create=function(){return new Wm(new Hm)},e}(),Xm=function(){var e=function(n,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},e(n,i)};return function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function l(){this.constructor=n}n.prototype=i===null?Object.create(i):(l.prototype=i.prototype,new l)}}(),Jt=function(e){Xm(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.DEFAULT_WIDTH=300,n.DEFAULT_WIDTH_OFFSET=2,n.FILE_SCAN_MIN_HEIGHT=300,n.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,n.MIN_QR_BOX_SIZE=50,n.SHADED_LEFT=1,n.SHADED_RIGHT=2,n.SHADED_TOP=3,n.SHADED_BOTTOM=4,n.SHADED_REGION_ELEMENT_ID="qr-shaded-region",n.VERBOSE=!1,n.BORDER_SHADER_DEFAULT_COLOR="#ffffff",n.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",n}(Im),Ym=function(){function e(n,i){this.logger=i,this.fps=Jt.SCAN_DEFAULT_FPS,n?(n.fps&&(this.fps=n.fps),this.disableFlip=n.disableFlip===!0,this.qrbox=n.qrbox,this.aspectRatio=n.aspectRatio,this.videoConstraints=n.videoConstraints):this.disableFlip=Jt.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?mh.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Vn(this.qrbox)},e.create=function(n,i){return new e(n,i)},e}(),Zm=function(){function e(n,i){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.elementId=n,this.verbose=!1;var l;typeof i=="boolean"?this.verbose=i===!0:i&&(l=i,this.verbose=l.verbose===!0,l.experimentalFeatures),this.logger=new _m(this.verbose),this.qrcode=new Mm(this.getSupportedFormats(i),this.getUseBarCodeDetectorIfSupported(l),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Gm.create()}return e.prototype.start=function(n,i,l,c){var f=this;if(!n)throw"cameraIdOrConfig is required";if(!l||typeof l!="function")throw"qrCodeSuccessCallback is required and should be a function.";var g;c?g=c:g=this.verbose?this.logger.log:function(){};var y=Ym.create(i,this.logger);this.clearElement();var m=!1;y.videoConstraints&&(y.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=m,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:Jt.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var v=this,I=this.stateManagerProxy.startTransition(it.SCANNING);return new Promise(function(O,D){var k=p?y.videoConstraints:v.createVideoConstraints(n);if(!k){I.cancel(),D("videoConstraints should be defined");return}var F={};(!p||y.aspectRatio)&&(F.aspectRatio=y.aspectRatio);var M={onRenderSurfaceReady:function(b,T){v.setupUi(b,T,y),v.isScanning=!0,v.foreverScan(y,l,g)}};jm.failIfNotSupported().then(function(b){b.create(k).then(function(T){return T.render(f.element,F,M).then(function(j){v.renderedCamera=j,I.execute(),O(null)}).catch(function(j){I.cancel(),D(j)})}).catch(function(T){I.cancel(),D(Si.errorGettingUserMedia(T))})}).catch(function(b){I.cancel(),D(Si.cameraStreamingNotSupported())})})},e.prototype.pause=function(n){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(it.PAUSED),this.showPausedState(),(Vn(n)||n!==!0)&&(n=!1),n&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var n=this,i=function(){n.stateManagerProxy.directTransition(it.SCANNING),n.hidePausedState()};if(!this.renderedCamera.isPaused()){i();return}this.renderedCamera.resume(function(){i()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var n=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var i=this.stateManagerProxy.startTransition(it.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var l=function(){if(n.element){var f=document.getElementById(Jt.SHADED_REGION_ELEMENT_ID);f&&n.element.removeChild(f)}},c=this;return this.renderedCamera.close().then(function(){return c.renderedCamera=null,c.element&&(c.element.removeChild(c.canvasElement),c.canvasElement=null),l(),c.qrRegion&&(c.qrRegion=null),c.context&&(c.context=null),i.execute(),c.hidePausedState(),c.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(n,i){return this.scanFileV2(n,i).then(function(l){return l.decodedText})},e.prototype.scanFileV2=function(n,i){var l=this;if(!n||!(n instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Vn(i)&&(i=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(c,f){l.possiblyCloseLastScanImageFile(),l.clearElement(),l.lastScanImageFile=URL.createObjectURL(n);var g=new Image;g.onload=function(){var y=g.width,m=g.height,p=document.getElementById(l.elementId),C=p.clientWidth?p.clientWidth:Jt.DEFAULT_WIDTH,v=Math.max(p.clientHeight?p.clientHeight:m,Jt.FILE_SCAN_MIN_HEIGHT),I=l.computeCanvasDrawConfig(y,m,C,v);if(i){var O=l.createCanvasElement(C,v,"qr-canvas-visible");O.style.display="inline-block",p.appendChild(O);var D=O.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=C,D.canvas.height=v,D.drawImage(g,0,0,y,m,I.x,I.y,I.width,I.height)}var k=Jt.FILE_SCAN_HIDDEN_CANVAS_PADDING,F=Math.max(g.width,I.width),M=Math.max(g.height,I.height),b=F+2*k,T=M+2*k,j=l.createCanvasElement(b,T);p.appendChild(j);var q=j.getContext("2d");if(!q)throw"Unable to get 2d context from canvas";q.canvas.width=b,q.canvas.height=T,q.drawImage(g,0,0,y,m,k,k,F,M);try{l.qrcode.decodeRobustlyAsync(j).then(function(z){c(v0.createFromQrcodeResult(z))}).catch(f)}catch(z){f("QR code parse error, error = ".concat(z))}},g.onerror=f,g.onabort=f,g.onstalled=f,g.onsuspend=f,g.src=URL.createObjectURL(n)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return Vm.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(n){if(n){if(!mh.isMediaStreamConstraintsValid(n,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(n)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(n){var i=[le.QR_CODE,le.AZTEC,le.CODABAR,le.CODE_39,le.CODE_93,le.CODE_128,le.DATA_MATRIX,le.MAXICODE,le.ITF,le.EAN_13,le.EAN_8,le.PDF_417,le.RSS_14,le.RSS_EXPANDED,le.UPC_A,le.UPC_E,le.UPC_EAN_EXTENSION];if(!n||typeof n=="boolean"||!n.formatsToSupport)return i;if(!Array.isArray(n.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(n.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var l=[],c=0,f=n.formatsToSupport;c<f.length;c++){var g=f[c];Nm(g)?l.push(g):this.logger.warn("Invalid format: ".concat(g," passed in config, ignoring."))}if(l.length===0)throw"None of formatsToSupport match supported values.";return l},e.prototype.getUseBarCodeDetectorIfSupported=function(n){if(Vn(n))return!0;if(!Vn(n.useBarCodeDetectorIfSupported))return n.useBarCodeDetectorIfSupported!==!1;if(Vn(n.experimentalFeatures))return!0;var i=n.experimentalFeatures;return Vn(i.useBarCodeDetectorIfSupported)?!0:i.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(n,i,l){var c=this,f=l.qrbox;this.validateQrboxConfig(f);var g=this.toQrdimensions(n,i,f),y=function(p){if(p<Jt.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Jt.MIN_QR_BOX_SIZE,"px.")},m=function(p){return p>n&&(c.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=n),p};y(g.width),y(g.height),g.width=m(g.width)},e.prototype.validateQrboxConfig=function(n){if(typeof n!="number"&&typeof n!="function"&&(n.width===void 0||n.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(n,i,l){if(typeof l=="number")return{width:l,height:l};if(typeof l=="function")try{return l(n,i)}catch(c){throw new Error("qrbox config was passed as a function but it failed with unknown error"+c)}return l},e.prototype.setupUi=function(n,i,l){l.isShadedBoxEnabled()&&this.validateQrboxSize(n,i,l);var c=Vn(l.qrbox)?{width:n,height:i}:l.qrbox;this.validateQrboxConfig(c);var f=this.toQrdimensions(n,i,c);f.height>i&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var g=l.isShadedBoxEnabled()&&f.height<=i,y={x:0,y:0,width:n,height:i},m=g?this.getShadedRegionBounds(n,i,f):y,p=this.createCanvasElement(m.width,m.height),C={willReadFrequently:!0},v=p.getContext("2d",C);v.canvas.width=m.width,v.canvas.height=m.height,this.element.append(p),g&&this.possiblyInsertShadingElement(this.element,n,i,f),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=v,this.canvasElement=p},e.prototype.createScannerPausedUiElement=function(n){var i=document.createElement("div");i.innerText=Si.scannerPaused(),i.style.display="none",i.style.position="absolute",i.style.top="0px",i.style.zIndex="1",i.style.background="rgba(9, 9, 9, 0.46)",i.style.color="#FFECEC",i.style.textAlign="center",i.style.width="100%",n.appendChild(i),this.scannerPausedUiElement=i},e.prototype.scanContext=function(n,i){var l=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(c){return n(c.text,v0.createFromQrcodeResult(c)),l.possiblyUpdateShaders(!0),!0}).catch(function(c){l.possiblyUpdateShaders(!1);var f=Si.codeParseError(c);return i(f,bm.createFrom(f)),!1})},e.prototype.foreverScan=function(n,i,l){var c=this;if(this.shouldScan&&this.renderedCamera){var f=this.renderedCamera.getSurface(),g=f.videoWidth/f.clientWidth,y=f.videoHeight/f.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*g,p=this.qrRegion.height*y,C=this.qrRegion.x*g,v=this.qrRegion.y*y;this.context.drawImage(f,C,v,m,p,0,0,this.qrRegion.width,this.qrRegion.height);var I=function(){c.foreverScanTimeout=setTimeout(function(){c.foreverScan(n,i,l)},c.getTimeoutFps(n.fps))};this.scanContext(i,l).then(function(O){!O&&n.disableFlip!==!0?(c.context.translate(c.context.canvas.width,0),c.context.scale(-1,1),c.scanContext(i,l).finally(function(){I()})):I()}).catch(function(O){c.logger.logError("Error happend while scanning context",O),I()})}},e.prototype.createVideoConstraints=function(n){if(typeof n=="string")return{deviceId:{exact:n}};if(typeof n=="object"){var i="facingMode",l="deviceId",c={user:!0,environment:!0},f="exact",g=function(D){if(D in c)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(D,"'")},y=Object.keys(n);if(y.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(y.length," keys");var m=Object.keys(n)[0];if(m!==i&&m!==l)throw"Only '".concat(i,"' and '").concat(l,"' ")+" are supported for 'cameraIdOrConfig'";if(m===i){var p=n.facingMode;if(typeof p=="string"){if(g(p))return{facingMode:p}}else if(typeof p=="object")if(f in p){if(g(p["".concat(f)]))return{facingMode:{exact:p["".concat(f)]}}}else throw"'facingMode' should be string or object with"+" ".concat(f," as key.");else{var C=typeof p;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var v=n.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(f in v)return{deviceId:{exact:v["".concat(f)]}};throw"'deviceId' should be string or object with"+" ".concat(f," as key.")}else{var I=typeof v;throw"Invalid type of 'deviceId' = ".concat(I)}}}var O=typeof n;throw"Invalid type of 'cameraIdOrConfig' = ".concat(O)},e.prototype.computeCanvasDrawConfig=function(n,i,l,c){if(n<=l&&i<=c){var f=(l-n)/2,g=(c-i)/2;return{x:f,y:g,width:n,height:i}}else{var y=n,m=i;return n>l&&(i=l/n*i,n=l),i>c&&(n=c/i*n,i=c),this.logger.log("Image downsampled from "+"".concat(y,"X").concat(m)+" to ".concat(n,"X").concat(i,".")),this.computeCanvasDrawConfig(n,i,l,c)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var n=document.getElementById(this.elementId);n&&(n.innerHTML="")},e.prototype.possiblyUpdateShaders=function(n){this.qrMatch!==n&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(i){i.style.backgroundColor=n?Jt.BORDER_SHADER_MATCH_COLOR:Jt.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=n)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(n,i,l){var c=n,f=i,g=document.createElement("canvas");return g.style.width="".concat(c,"px"),g.style.height="".concat(f,"px"),g.style.display="none",g.id=Vn(l)?"qr-canvas":l,g},e.prototype.getShadedRegionBounds=function(n,i,l){if(l.width>n||l.height>i)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(n-l.width)/2,y:(i-l.height)/2,width:l.width,height:l.height}},e.prototype.possiblyInsertShadingElement=function(n,i,l,c){if(!(i-c.width<1||l-c.height<1)){var f=document.createElement("div");f.style.position="absolute";var g=(i-c.width)/2,y=(l-c.height)/2;if(f.style.borderLeft="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderRight="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderTop="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderBottom="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),f.style.boxSizing="border-box",f.style.top="0px",f.style.bottom="0px",f.style.left="0px",f.style.right="0px",f.id="".concat(Jt.SHADED_REGION_ELEMENT_ID),i-c.width<11||l-c.height<11)this.hasBorderShaders=!1;else{var m=5,p=40;this.insertShaderBorders(f,p,m,-m,null,0,!0),this.insertShaderBorders(f,p,m,-m,null,0,!1),this.insertShaderBorders(f,p,m,null,-m,0,!0),this.insertShaderBorders(f,p,m,null,-m,0,!1),this.insertShaderBorders(f,m,p+m,-m,null,-m,!0),this.insertShaderBorders(f,m,p+m,null,-m,-m,!0),this.insertShaderBorders(f,m,p+m,-m,null,-m,!1),this.insertShaderBorders(f,m,p+m,null,-m,-m,!1),this.hasBorderShaders=!0}n.append(f)}},e.prototype.insertShaderBorders=function(n,i,l,c,f,g,y){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=Jt.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(i,"px"),m.style.height="".concat(l,"px"),c!==null&&(m.style.top="".concat(c,"px")),f!==null&&(m.style.bottom="".concat(f,"px")),y?m.style.left="".concat(g,"px"):m.style.right="".concat(g,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),n.appendChild(m)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(n){return 1e3/n},e}(),T0;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(T0||(T0={}));function Qm(){var he,Se;const e=Un(),{questId:n}=eh(),i=Hi(),l=(he=i.state)==null?void 0:he.quest,c=((Se=i.state)==null?void 0:Se.participants)||[],f=Y.useRef(null),{user:g}=er(),{addCrystals:y,addCoins:m,completeQuest:p,monster:C}=Wi(),{trackQuestComplete:v}=Gi(),[I,O]=Y.useState(""),[D,k]=Y.useState(!1),[F,M]=Y.useState(!1),[b]=Y.useState(Date.now()),[T,j]=Y.useState(null),[q,z]=Y.useState(null);Y.useEffect(()=>{if(!l){e("/quests");return}const re=`BUDDY_${n}_${Date.now()}`;O(re)},[l,n,e]),Y.useEffect(()=>{if(!F||!I||D)return;const re=new Zm("qr-reader");return f.current=re,re.start({facingMode:"environment"},{fps:8,qrbox:{width:200,height:200}},K=>{K.trim()===I.trim()&&(re.stop().catch(()=>{}),f.current=null,M(!1),z(K.trim()))},()=>{}).catch(K=>{j("Camera not available. Use Confirm Check-In for demo."),console.warn("QR scanner start failed:",K)}),()=>{f.current&&(f.current.stop().catch(()=>{}),f.current=null)}},[F,I,D]),Y.useEffect(()=>{q&&I&&q===I&&!D&&(z(null),L())},[q,I,D]);const L=()=>{if(D)return;k(!0);const re=c.length>1,K=re?Math.floor(l.crystals*1.5):l.crystals,se=Math.max(10,Math.floor(K/2));y(K),m(se),p(l.type,re);const H=Math.floor((Date.now()-b)/1e3/60);v(n,c.length,H),setTimeout(()=>{e("/hub",{state:{questCompleted:!0,crystalsEarned:K,coinsEarned:se,questName:l.title}})},3e3)},Q=()=>{D||L()},X=()=>{e("/quests")};return l?E.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-pixel-dark via-pixel-purple to-pixel-dark pb-20",children:[E.jsx("div",{className:"bg-pixel-dark border-b-4 border-pixel-purple p-4 sticky top-0 z-10",children:E.jsx("div",{className:"max-w-4xl mx-auto",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h1",{className:"font-pixel text-sm md:text-base text-pixel-yellow",children:"Quest Check-In"}),E.jsx("button",{onClick:X,className:"text-pixel-pink hover:text-pixel-light text-sm font-game",children:"Cancel"})]})})}),E.jsx("div",{className:"max-w-4xl mx-auto p-4",children:D?E.jsxs("div",{className:"text-center",children:[E.jsxs("div",{className:"pixel-card p-8 mb-6 bg-pixel-green bg-opacity-20",children:[E.jsx("div",{className:"text-6xl mb-4 animate-float",children:""}),E.jsx("h2",{className:"font-pixel text-xl text-pixel-yellow mb-4",children:"Quest Complete!"}),E.jsxs("p",{className:"font-game text-lg text-pixel-light mb-6",children:["You earned ",E.jsx("span",{className:"text-pixel-yellow",children:Math.floor(l.crystals*1.5)})," crystals!"]}),E.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center mb-6",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-3xl mb-2",children:""}),E.jsxs("p",{className:"text-xs font-game text-pixel-light",children:["+",Math.floor(l.crystals*1.5)]})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-3xl mb-2",children:""}),E.jsx("p",{className:"text-xs font-game text-pixel-light",children:"+10 XP"})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-3xl mb-2",children:""}),E.jsxs("p",{className:"text-xs font-game text-pixel-light",children:["+",c.length-1," connection",c.length>2?"s":""]})]})]}),E.jsx("div",{className:"animate-pulse-slow",children:E.jsx("p",{className:"font-game text-pixel-blue",children:"Returning to hub..."})})]}),C.crystals+Math.floor(l.crystals*1.5)>=C.level*100&&E.jsxs("div",{className:"pixel-card p-6 bg-pixel-pink bg-opacity-20 animate-pulse",children:[E.jsx("p",{className:"text-4xl mb-2",children:""}),E.jsx("p",{className:"font-pixel text-sm text-pixel-yellow",children:"Your monster is ready to evolve!"})]})]}):E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"pixel-card p-5 mb-6 bg-pixel-blue bg-opacity-20",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[E.jsx("span",{className:"text-4xl",children:l.icon}),E.jsxs("div",{children:[E.jsx("h2",{className:"font-pixel text-base text-pixel-light",children:l.title}),E.jsx("p",{className:"text-xs text-pixel-blue font-game mt-1",children:l.location})]})]}),E.jsx("p",{className:"text-xs text-pixel-light font-game mb-2",children:"Meet your group in person at the location. Scan the hosts QR code to verify you earned this quest."}),E.jsx("p",{className:"text-xs text-pixel-yellow font-game",children:" Personal connection in person = rewards unlocked"})]}),E.jsxs("div",{className:"pixel-card p-5 mb-6",children:[E.jsxs("h3",{className:"font-pixel text-xs text-pixel-yellow mb-3",children:["Quest Party (",c.length,")"]}),E.jsx("div",{className:"space-y-2",children:c.map(re=>E.jsxs("div",{className:"flex items-center gap-3 p-2 bg-pixel-purple bg-opacity-20 rounded",children:[E.jsx("div",{className:"text-2xl",children:re.id===g.id?"":""}),E.jsxs("div",{className:"flex-1",children:[E.jsxs("p",{className:"text-sm font-game text-pixel-light",children:[re.name,re.id===g.id&&" (You)"]}),E.jsxs("p",{className:"text-xs text-pixel-blue",children:["Level ",re.monster.level," ",re.monster.evolution]})]})]},re.id))})]}),E.jsxs("div",{className:"pixel-card p-8 mb-6 text-center bg-white",children:[E.jsx("h3",{className:"font-pixel text-xs text-pixel-dark mb-4",children:"Check-In Code"}),E.jsx("div",{className:"flex justify-center mb-4",children:E.jsx(Sm,{value:I,size:200,level:"H",includeMargin:!0})}),E.jsx("p",{className:"text-xs font-game text-pixel-dark opacity-75",children:"Show this to your group or scan someone else's code"})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsx("button",{onClick:Q,className:"pixel-button bg-pixel-green hover:bg-pixel-yellow text-white w-full py-6 text-base",children:" Confirm Check-In"}),E.jsx("button",{onClick:()=>M(!F),className:"pixel-button bg-pixel-blue hover:bg-pixel-pink text-white w-full py-4",children:" Scan QR Code"})]}),F&&E.jsxs("div",{className:"mt-4 pixel-card p-4 bg-pixel-dark",children:[E.jsx("p",{className:"font-game text-pixel-yellow text-sm mb-2 text-center",children:"Point camera at hosts QR code to verify"}),E.jsx("div",{id:"qr-reader",className:"rounded overflow-hidden mb-3"}),T&&E.jsx("p",{className:"text-xs text-pixel-pink font-game text-center mb-2",children:T}),E.jsx("button",{type:"button",onClick:()=>{M(!1),j(null)},className:"pixel-button bg-pixel-purple text-white w-full py-2 text-xs",children:"Close Scanner"})]}),E.jsxs("div",{className:"mt-6 pixel-card p-4 bg-pixel-purple bg-opacity-20",children:[E.jsx("h4",{className:"font-pixel text-xs text-pixel-yellow mb-2",children:" Safety Reminders"}),E.jsxs("ul",{className:"text-xs text-pixel-light font-game space-y-1",children:[E.jsx("li",{children:" Meet in public, well-lit locations"}),E.jsx("li",{children:" Keep your location sharing on"}),E.jsx("li",{children:" Report any concerns immediately"})]})]})]})})]}):null}const R0=[{id:"hat_cap",name:"Cool Cap",slot:"hat",cost:80,emoji:""},{id:"hat_wizard",name:"Wizard Hat",slot:"hat",cost:150,emoji:""},{id:"hat_crown",name:"Crown",slot:"hat",cost:220,emoji:""},{id:"outfit_hoodie",name:"Hoodie",slot:"outfit",cost:120,emoji:""},{id:"outfit_armor",name:"Armor",slot:"outfit",cost:260,emoji:""},{id:"outfit_dress",name:"Dress",slot:"outfit",cost:180,emoji:""}],Km=[{id:"egg_common",name:"Common Egg",rarity:"common",cost:120,emoji:""},{id:"egg_rare",name:"Rare Egg",rarity:"rare",cost:240,emoji:""},{id:"egg_legend",name:"Legend Egg",rarity:"legendary",cost:400,emoji:""}];function qm(){const e=Un(),{user:n,currentHub:i,logout:l}=er(),{monster:c,monsters:f,inventory:g,eggs:y,evolveMonster:m,addCrystals:p,buyItem:C,buyEgg:v,equipItem:I,unequipItem:O,hatchEgg:D,setActiveMonster:k}=Wi(),{questHistory:F,belongingScores:M,trackBelongingScore:b}=Gi(),[T,j]=Y.useState(!1),[q,z]=Y.useState(5),L=F.filter(K=>K.status==="completed"),Q=F.length>0?Math.round(L.length/F.length*100):0,X=()=>{l(),e("/login")},he=()=>{if(c.crystals>=c.level*100){let K=c.evolution,se=[];c.level>=10&&c.evolution==="baby"?(K="teen",se=["Growing"]):c.level>=20&&c.evolution==="teen"&&(L.filter(Ne=>Ne.groupSize>2).length/L.length>.7?(K="leader",se=["Social Leader"]):L.filter(Ne=>Ne.questType==="help_neighbor").length>5?(K="support",se=["Community Helper"]):(K="adult",se=["Mature"])),K!==c.evolution&&(m(K,se),alert(` Your monster evolved into a ${K}!`))}},Se=()=>{b(q),j(!1),alert("Thank you for your feedback! ")},re=M.length>0?(M.reduce((K,se)=>K+se.score,0)/M.length).toFixed(1):"N/A";return E.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-pixel-dark via-pixel-purple to-pixel-dark pb-20",children:[E.jsx("div",{className:"bg-pixel-dark border-b-4 border-pixel-purple p-4 sticky top-0 z-10",children:E.jsxs("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[E.jsx("h1",{className:"font-pixel text-sm md:text-base text-pixel-yellow",children:"Profile"}),E.jsx("button",{onClick:X,className:"text-pixel-pink hover:text-pixel-light text-sm font-game",children:"Logout"})]})}),E.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[E.jsxs("div",{className:"pixel-card p-6 mb-6 bg-gradient-to-br from-pixel-blue to-pixel-purple bg-opacity-20",children:[E.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.picture?E.jsx("img",{src:n.picture,alt:n.name,className:"w-16 h-16 rounded-full border-4 border-pixel-yellow"}):E.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-pixel-yellow bg-pixel-blue flex items-center justify-center",children:E.jsx("span",{className:"font-pixel text-2xl text-white",children:n.name[0]})}),E.jsxs("div",{children:[E.jsx("h2",{className:"font-pixel text-base text-pixel-light",children:n.name}),E.jsx("p",{className:"text-xs text-pixel-blue font-game",children:n.email}),E.jsxs("p",{className:"text-xs text-pixel-green font-game mt-1",children:[" ",(i==null?void 0:i.name)||"No hub selected"]})]})]}),E.jsx("button",{onClick:()=>e("/hub-selection"),className:"w-full pixel-button bg-pixel-purple hover:bg-pixel-blue text-white py-2 text-xs",children:"Change Hub"})]}),E.jsxs("div",{className:"pixel-card p-6 mb-6 text-center",children:[E.jsx("h3",{className:"font-pixel text-sm text-pixel-yellow mb-4",children:"Your Monster"}),E.jsx("div",{className:"mb-4",children:E.jsx(Zs,{evolution:c.evolution,size:"large",animated:!0,isPlayer:!0,skin:c.activeSkin||"default",equippedItems:c.equippedItems})}),E.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm font-game mb-4",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-pixel-blue",children:"Evolution"}),E.jsx("p",{className:"text-pixel-light capitalize",children:c.evolution})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-pixel-blue",children:"Level"}),E.jsx("p",{className:"text-pixel-light",children:c.level})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-pixel-blue",children:"Crystals"}),E.jsxs("p",{className:"text-pixel-yellow",children:[" ",c.crystals]})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-pixel-blue",children:"Coins"}),E.jsxs("p",{className:"text-pixel-yellow",children:[" ",c.coins]})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-pixel-blue",children:"Social Score"}),E.jsxs("p",{className:"text-pixel-green",children:[" ",c.socialScore]})]})]}),E.jsxs("div",{className:"mb-4",children:[E.jsxs("div",{className:"flex justify-between text-xs font-game text-pixel-light mb-2",children:[E.jsx("span",{children:"Next Level"}),E.jsxs("span",{children:[c.crystals%100," / 100"]})]}),E.jsx("div",{className:"w-full h-4 bg-pixel-dark border-2 border-pixel-purple rounded overflow-hidden",children:E.jsx("div",{className:"h-full bg-gradient-to-r from-pixel-blue to-pixel-green transition-all duration-500",style:{width:`${c.crystals%100}%`}})})]}),c.traits.length>0&&E.jsxs("div",{className:"mb-4",children:[E.jsx("p",{className:"text-xs text-pixel-blue font-game mb-2",children:"Traits"}),E.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:c.traits.map((K,se)=>E.jsx("span",{className:"px-3 py-1 bg-pixel-yellow text-pixel-dark text-xs rounded font-game",children:K},se))})]}),E.jsx("button",{onClick:he,disabled:c.crystals<c.level*100,className:"pixel-button bg-pixel-pink hover:bg-pixel-yellow text-white w-full py-3",children:c.crystals>=c.level*100?" Check Evolution":" Need More Crystals"})]}),E.jsxs("div",{className:"pixel-card p-6 mb-6",children:[E.jsx("h3",{className:"font-pixel text-sm text-pixel-yellow mb-3",children:"Marketplace"}),E.jsx("p",{className:"text-xs text-pixel-light font-game mb-4",children:"Use coins to buy hats, outfits, or eggs."}),E.jsxs("div",{className:"mb-6",children:[E.jsx("h4",{className:"font-pixel text-xs text-pixel-blue mb-3",children:"Items"}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:R0.map(K=>{const se=g.includes(K.id),H=c.coins>=K.cost&&!se;return E.jsxs("button",{onClick:()=>H&&C(K),disabled:!H,className:`pixel-card p-3 text-left transition-all ${se?"border-pixel-green bg-pixel-green bg-opacity-10":"hover:border-pixel-yellow"} ${!H&&!se?"opacity-70":""}`,children:[E.jsx("div",{className:"text-2xl mb-2",children:K.emoji}),E.jsx("p",{className:"text-xs font-game text-pixel-light",children:K.name}),E.jsx("p",{className:"text-xs font-game text-pixel-yellow mt-1",children:se?"Owned":` ${K.cost}`})]},K.id)})})]}),E.jsxs("div",{children:[E.jsx("h4",{className:"font-pixel text-xs text-pixel-blue mb-3",children:"Eggs"}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Km.map(K=>{const se=c.coins>=K.cost;return E.jsxs("button",{onClick:()=>se&&v(K),disabled:!se,className:`pixel-card p-3 text-left transition-all ${se?"hover:border-pixel-yellow":"opacity-70"}`,children:[E.jsx("div",{className:"text-2xl mb-2",children:K.emoji}),E.jsx("p",{className:"text-xs font-game text-pixel-light",children:K.name}),E.jsxs("p",{className:"text-xs font-game text-pixel-yellow mt-1",children:[" ",K.cost]})]},K.id)})})]})]}),E.jsxs("div",{className:"pixel-card p-6 mb-6",children:[E.jsx("h3",{className:"font-pixel text-sm text-pixel-yellow mb-3",children:"Inventory"}),E.jsx("p",{className:"text-xs text-pixel-light font-game mb-4",children:"Equip hats or outfits on your active monster."}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:g.length>0?g.map(K=>{var Ne;const se=R0.find(me=>me.id===K);if(!se)return null;const H=((Ne=c.equippedItems)==null?void 0:Ne[se.slot])===se.id;return E.jsxs("div",{className:"pixel-card p-3 text-left",children:[E.jsx("div",{className:"text-2xl mb-2",children:se.emoji}),E.jsx("p",{className:"text-xs font-game text-pixel-light",children:se.name}),E.jsx("button",{onClick:()=>H?O(se.slot):I(se.slot,se.id),className:`pixel-button mt-2 w-full text-xs ${H?"bg-pixel-yellow text-pixel-dark":"bg-pixel-blue text-white"}`,children:H?"Unequip":"Equip"})]},se.id)}):E.jsx("p",{className:"text-xs text-pixel-light font-game",children:"No items yet. Buy some in the marketplace."})})]}),E.jsxs("div",{className:"pixel-card p-6 mb-6",children:[E.jsx("h3",{className:"font-pixel text-sm text-pixel-yellow mb-3",children:"Eggs & Hatchery"}),E.jsx("p",{className:"text-xs text-pixel-light font-game mb-4",children:"Hatch eggs to unlock new monsters."}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:y.length>0?y.map(K=>E.jsxs("div",{className:"pixel-card p-3 text-left",children:[E.jsx("div",{className:"text-2xl mb-2",children:""}),E.jsx("p",{className:"text-xs font-game text-pixel-light",children:K.name}),E.jsx("p",{className:"text-xs font-game text-pixel-blue",children:K.rarity}),E.jsx("button",{onClick:()=>D(K.id),className:"pixel-button mt-2 w-full text-xs bg-pixel-green text-white",children:"Hatch"})]},K.id)):E.jsx("p",{className:"text-xs text-pixel-light font-game",children:"No eggs yet. Buy one in the marketplace."})})]}),E.jsxs("div",{className:"pixel-card p-6 mb-6",children:[E.jsx("h3",{className:"font-pixel text-sm text-pixel-yellow mb-3",children:"Monster Collection"}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:f.length>0?f.map(K=>E.jsxs("div",{className:"pixel-card p-3 text-center",children:[E.jsx(Zs,{evolution:K.evolution,size:"medium",animated:!0,equippedItems:K.equippedItems}),E.jsx("p",{className:"text-xs font-game text-pixel-light mt-2",children:K.name}),E.jsxs("p",{className:"text-xs font-game text-pixel-blue",children:["Lv ",K.level]}),E.jsx("button",{onClick:()=>k(K.id),className:`pixel-button mt-2 w-full text-xs ${c.id===K.id?"bg-pixel-yellow text-pixel-dark":"bg-pixel-blue text-white"}`,children:c.id===K.id?"Active":"Set Active"})]},K.id)):E.jsx("p",{className:"text-xs text-pixel-light font-game",children:"Hatch eggs to grow your collection."})})]}),E.jsxs("div",{className:"pixel-card p-6 mb-6",children:[E.jsx("h3",{className:"font-pixel text-sm text-pixel-yellow mb-4",children:"Quest Statistics"}),E.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center font-game",children:[E.jsxs("div",{className:"p-3 bg-pixel-purple bg-opacity-20 rounded",children:[E.jsx("p",{className:"text-3xl mb-1",children:""}),E.jsx("p",{className:"text-2xl text-pixel-light",children:c.questsCompleted}),E.jsx("p",{className:"text-xs text-pixel-blue mt-1",children:"Completed"})]}),E.jsxs("div",{className:"p-3 bg-pixel-purple bg-opacity-20 rounded",children:[E.jsx("p",{className:"text-3xl mb-1",children:""}),E.jsxs("p",{className:"text-2xl text-pixel-green",children:[Q,"%"]}),E.jsx("p",{className:"text-xs text-pixel-blue mt-1",children:"Success Rate"})]}),E.jsxs("div",{className:"p-3 bg-pixel-purple bg-opacity-20 rounded",children:[E.jsx("p",{className:"text-3xl mb-1",children:""}),E.jsx("p",{className:"text-2xl text-pixel-light",children:L.filter(K=>K.groupSize>1).length}),E.jsx("p",{className:"text-xs text-pixel-blue mt-1",children:"Group Quests"})]}),E.jsxs("div",{className:"p-3 bg-pixel-purple bg-opacity-20 rounded",children:[E.jsx("p",{className:"text-3xl mb-1",children:""}),E.jsx("p",{className:"text-2xl text-pixel-pink",children:re}),E.jsx("p",{className:"text-xs text-pixel-blue mt-1",children:"Belonging"})]})]})]}),Object.keys(c.preferredQuestTypes).length>0&&E.jsxs("div",{className:"pixel-card p-6 mb-6",children:[E.jsx("h3",{className:"font-pixel text-sm text-pixel-yellow mb-4",children:"Favorite Quest Types"}),E.jsx("div",{className:"space-y-2",children:Object.entries(c.preferredQuestTypes).sort((K,se)=>se[1]-K[1]).slice(0,3).map(([K,se])=>E.jsxs("div",{className:"flex justify-between items-center p-2 bg-pixel-purple bg-opacity-20 rounded",children:[E.jsx("span",{className:"text-sm font-game text-pixel-light capitalize",children:K.replace(/_/g," ")}),E.jsxs("span",{className:"text-sm font-game text-pixel-blue",children:[se," completed"]})]},K))})]}),T?E.jsxs("div",{className:"pixel-card p-6 mb-6 bg-pixel-blue bg-opacity-20",children:[E.jsx("h3",{className:"font-pixel text-sm text-pixel-yellow mb-3 text-center",children:"How connected do you feel?"}),E.jsx("p",{className:"text-xs font-game text-pixel-light text-center mb-4",children:"1 = Not at all, 10 = Very connected"}),E.jsx("div",{className:"flex justify-center gap-2 mb-4",children:[1,2,3,4,5,6,7,8,9,10].map(K=>E.jsx("button",{onClick:()=>z(K),className:`
                    w-8 h-8 rounded font-game text-sm
                    ${q===K?"bg-pixel-yellow text-pixel-dark":"bg-pixel-purple text-pixel-light hover:bg-pixel-pink"}
                  `,children:K},K))}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("button",{onClick:Se,className:"pixel-button bg-pixel-green text-white flex-1 py-3",children:"Submit"}),E.jsx("button",{onClick:()=>j(!1),className:"pixel-button bg-pixel-purple text-white flex-1 py-3",children:"Cancel"})]})]}):E.jsx("button",{onClick:()=>j(!0),className:"pixel-button bg-pixel-blue hover:bg-pixel-green text-white w-full py-4 mb-6",children:" Rate Your Belonging (1-Tap Survey)"}),E.jsxs("div",{className:"pixel-card p-4 bg-pixel-purple bg-opacity-20 text-center",children:[E.jsx("p",{className:"text-xs text-pixel-light font-game mb-2",children:"BuddyBeasts v0.1.0 - Built for Building Belonging"}),E.jsx("p",{className:"text-xs text-pixel-blue font-game",children:" Turning local connections into pixel adventures"})]})]}),E.jsx(Ul,{})]})}function Jm(){Un();const{user:e,currentHub:n}=er(),{messages:i,conversations:l,currentConversationId:c,sendMessage:f,setCurrentConversation:g}=dh(),{onlineUsers:y}=fh(),{questHistory:m}=Gi(),[p,C]=Y.useState(""),[v,I]=Y.useState(null),[O,D]=Y.useState(!0),k=Y.useRef(null);Y.useEffect(()=>{if(!v&&n){const z=`hub_${n.id}`,L=l.filter(Q=>Q.isQuest);L.length>0?I(L[0].id):I(z)}},[v,n,l]),Y.useEffect(()=>{var z;(z=k.current)==null||z.scrollIntoView({behavior:"smooth"})},[i]);const F=()=>{if(!p.trim()||!v)return;const z=l.find(Q=>Q.id===v),L=(z==null?void 0:z.name)||(n==null?void 0:n.name)||"Chat";f({userId:e.id,userName:e.name,userAvatar:e.picture,text:p,conversationName:L}),C("")},M=z=>{I(z),g(z),D(!1)},b=i.filter(z=>z.conversationId===v),T=l.find(z=>z.id===v),j=l.filter(z=>z.isQuest),q=`hub_${n==null?void 0:n.id}`;return E.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-pixel-dark via-pixel-purple to-pixel-dark pb-20 flex flex-col",children:[E.jsx("div",{className:"bg-pixel-dark border-b-4 border-pixel-purple p-4 sticky top-0 z-10",children:E.jsxs("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[E.jsxs("div",{children:[E.jsx("h1",{className:"font-pixel text-lg md:text-2xl text-pixel-yellow",children:" Messages"}),E.jsx("p",{className:"text-xs text-pixel-light font-game mt-1",children:(T==null?void 0:T.name)||"Select a conversation"})]}),!O&&E.jsx("button",{onClick:()=>D(!0),className:"pixel-button bg-pixel-purple hover:bg-pixel-blue text-white text-xs px-3 py-2",children:" Chats"})]})}),E.jsxs("div",{className:"flex-1 max-w-4xl w-full mx-auto flex flex-col md:flex-row gap-4 px-4 py-4",children:[E.jsxs("div",{className:`${O?"block":"hidden"} md:block md:w-1/3 space-y-2`,children:[E.jsxs("div",{onClick:()=>M(q),className:`pixel-card p-4 cursor-pointer transition-all ${v===q?"border-pixel-yellow bg-pixel-yellow bg-opacity-10":"hover:border-pixel-blue"}`,children:[E.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[E.jsx("span",{className:"text-lg",children:""}),E.jsxs("h3",{className:"font-pixel text-xs text-pixel-light",children:[n==null?void 0:n.name," Hub"]})]}),E.jsxs("p",{className:"text-xs text-pixel-blue font-game",children:[" ",y.length+1," online"]})]}),j.length>0&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"px-2 py-1",children:E.jsx("p",{className:"text-xs font-pixel text-pixel-yellow",children:"Quest Teams"})}),j.map(z=>E.jsxs("div",{onClick:()=>M(z.id),className:`pixel-card p-4 cursor-pointer transition-all ${v===z.id?"border-pixel-yellow bg-pixel-yellow bg-opacity-10":"hover:border-pixel-blue"}`,children:[E.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[E.jsx("span",{className:"text-lg",children:""}),E.jsx("h3",{className:"font-pixel text-xs text-pixel-light",children:z.name})]}),E.jsxs("p",{className:"text-xs text-pixel-blue font-game",children:[z.members.length," members"]}),z.lastMessage&&E.jsx("p",{className:"text-xs text-pixel-light opacity-75 mt-2 truncate",children:z.lastMessage})]},z.id))]}),j.length===0&&E.jsx("div",{className:"pixel-card p-4 bg-pixel-dark border-2 border-pixel-purple opacity-50",children:E.jsx("p",{className:"text-xs text-pixel-light font-game text-center",children:"Complete quests to chat with your team!"})})]}),E.jsx("div",{className:`${O?"hidden md:flex":"flex"} flex-1 flex-col`,children:v?E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"flex-1 overflow-y-auto mb-4 space-y-3 pixel-card p-4 bg-pixel-dark bg-opacity-50",children:[b.length>0?b.map(z=>E.jsxs("div",{className:`flex gap-2 ${z.userId===e.id?"justify-end":"justify-start"}`,children:[E.jsxs("div",{className:`max-w-xs ${z.userId===e.id?"order-2 bg-pixel-green":"order-1 bg-pixel-blue"} pixel-card p-3 rounded`,children:[z.userId!==e.id&&E.jsx("p",{className:"text-xs font-pixel text-pixel-yellow mb-1",children:z.userName}),E.jsx("p",{className:"text-sm font-game text-white break-words",children:z.text}),E.jsx("p",{className:"text-xs text-pixel-light opacity-75 mt-1",children:new Date(z.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),z.userId!==e.id&&z.userAvatar&&E.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border-2 border-pixel-pink order-1",children:E.jsx("img",{src:z.userAvatar,alt:z.userName,className:"w-full h-full object-cover"})})]},z.id)):E.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-center",children:[E.jsx("div",{className:"text-4xl mb-2",children:""}),E.jsx("p",{className:"text-xs text-pixel-light font-game",children:"No messages yet. Start the conversation!"})]}),E.jsx("div",{ref:k})]}),E.jsxs("div",{className:"pixel-card p-4 bg-pixel-dark border-2 border-pixel-purple",children:[E.jsxs("div",{className:"flex gap-2",children:[E.jsx("input",{type:"text",value:p,onChange:z=>C(z.target.value),onKeyPress:z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),F())},placeholder:"Type a message... (Enter to send)",className:"flex-1 p-3 bg-pixel-dark border-2 border-pixel-purple text-pixel-light font-game text-sm placeholder-pixel-blue placeholder-opacity-50 focus:outline-none focus:border-pixel-yellow rounded"}),E.jsx("button",{onClick:F,disabled:!p.trim(),className:"pixel-button bg-pixel-green hover:bg-pixel-blue text-white disabled:opacity-50 disabled:cursor-not-allowed px-4",children:""})]}),E.jsx("p",{className:"text-xs text-pixel-blue font-game mt-2 opacity-75",children:" Chat with quest teammates and hub members!"})]})]}):E.jsx("div",{className:"flex-1 flex items-center justify-center pixel-card p-8",children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"text-6xl mb-4",children:""}),E.jsx("p",{className:"font-game text-pixel-light",children:"Select a conversation to start chatting"})]})})})]}),E.jsx(Ul,{})]})}function Fr({children:e}){const{user:n}=er();return n?e:E.jsx(ih,{to:"/login"})}function $m(){return E.jsx(yp,{clientId:"780151936899-s4nu85eta204uuoafkjnciftivo6lpen.apps.googleusercontent.com",children:E.jsx(mp,{children:E.jsx("div",{className:"app min-h-screen bg-pixel-dark",children:E.jsxs(xp,{children:[E.jsx(Pn,{path:"/login",element:E.jsx(sm,{})}),E.jsx(Pn,{path:"/hub-selection",element:E.jsx(Fr,{children:E.jsx(om,{})})}),E.jsx(Pn,{path:"/hub",element:E.jsx(Fr,{children:E.jsx(lm,{})})}),E.jsx(Pn,{path:"/quests",element:E.jsx(Fr,{children:E.jsx(um,{})})}),E.jsx(Pn,{path:"/lobby/:questId",element:E.jsx(Fr,{children:E.jsx(cm,{})})}),E.jsx(Pn,{path:"/checkin/:questId",element:E.jsx(Fr,{children:E.jsx(Qm,{})})}),E.jsx(Pn,{path:"/profile",element:E.jsx(Fr,{children:E.jsx(qm,{})})}),E.jsx(Pn,{path:"/chat",element:E.jsx(Fr,{children:E.jsx(Jm,{})})}),E.jsx(Pn,{path:"/",element:E.jsx(ih,{to:"/hub"})})]})})})})}Pa.createRoot(document.getElementById("root")).render(E.jsx(Gn.StrictMode,{children:E.jsx($m,{})}));
